(function(A){if(typeof exports=="object"&&typeof module=="object"){module.exports=A()}else{if(typeof define=="function"&&define.amd){return define([],A)}else{this.CodeMirror=A()}}})(function(){var FR=/gecko\/\d/i.test(navigator.userAgent);var Al=/MSIE \d/.test(navigator.userAgent);var D1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var Au=Al||D1;var D5=Au&&(Al?document.documentMode||6:D1[1]);var AB=/WebKit\//.test(navigator.userAgent);var CR=AB&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var B0=/Chrome\//.test(navigator.userAgent);var Fr=/Opera\//.test(navigator.userAgent);var Gf=/Apple Computer/.test(navigator.vendor);var BB=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var R=/PhantomJS/.test(navigator.userAgent);var C3=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var O=C3||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var FZ=C3||/Mac/.test(navigator.platform);var I=/win/i.test(navigator.platform);var Fs=Fr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(Fs){Fs=Number(Fs[1])}if(Fs&&Fs>=15){Fr=false;AB=true}var ER=FZ&&(CR||Fr&&(Fs==null||Fs<12.11));var DY=FR||(Au&&D5>=9);var Fy=false,Bb=false;function Da(Gj,Gk){if(!(this instanceof Da)){return new Da(Gj,Gk)}this.options=Gk=Gk?CG(Gk):{};CG(Du,Gk,false);s(Gk);var Gl=Gk.value;if(typeof Gl=="string"){Gl=new EZ(Gl,Gk.mode,null,Gk.lineSeparator)}this.doc=Gl;var Gm=new Da.inputStyles[Gk.inputStyle](this);var Gn=this.display=new m(Gj,Gl,Gm);Gn.wrapper.CodeMirror=this;Cm(this);Cg(this);if(Gk.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(Gk.autofocus&&!O){Gn.input.focus()}Bl(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new Fg(),keySeq:null,specialChars:null};var Gh=this;if(Au&&D5<11){setTimeout(function(){Gh.display.input.reset(true)},20)}c(this);Eq();DN(this);this.curOp.forceUpdate=true;V(this,Gl);if((Gk.autofocus&&!O)||Gh.hasFocus()){setTimeout(Cx(DM,this),20)}else{Z(this)}for(var Gg in FX){if(FX.hasOwnProperty(Gg)){FX[Gg](this,Gk[Gg],DL)}}Es(this);if(Gk.finishInit){Gk.finishInit(this)}for(var Gi=0;Gi<A4.length;++Gi){A4[Gi](this)}E4(this);if(AB&&Gk.lineWrapping&&getComputedStyle(Gn.lineDiv).textRendering=="optimizelegibility"){Gn.lineDiv.style.textRendering="auto"}}function m(Gg,Gj,Gi){var Gh=this;this.input=Gi;Gh.scrollbarFiller=Bf("div",null,"CodeMirror-scrollbar-filler");Gh.scrollbarFiller.setAttribute("cm-not-content","true");Gh.gutterFiller=Bf("div",null,"CodeMirror-gutter-filler");Gh.gutterFiller.setAttribute("cm-not-content","true");Gh.lineDiv=Bf("div",null,"CodeMirror-code");Gh.selectionDiv=Bf("div",null,null,"position: relative; z-index: 1");Gh.cursorDiv=Bf("div",null,"CodeMirror-cursors");Gh.measure=Bf("div",null,"CodeMirror-measure");Gh.lineMeasure=Bf("div",null,"CodeMirror-measure");Gh.lineSpace=Bf("div",[Gh.measure,Gh.lineMeasure,Gh.selectionDiv,Gh.cursorDiv,Gh.lineDiv],null,"position: relative; outline: none");Gh.mover=Bf("div",[Bf("div",[Gh.lineSpace],"CodeMirror-lines")],null,"position: relative");Gh.sizer=Bf("div",[Gh.mover],"CodeMirror-sizer");Gh.sizerWidth=null;Gh.heightForcer=Bf("div",null,null,"position: absolute; height: "+BR+"px; width: 1px;");Gh.gutters=Bf("div",null,"CodeMirror-gutters");Gh.lineGutter=null;Gh.scroller=Bf("div",[Gh.sizer,Gh.heightForcer,Gh.gutters],"CodeMirror-scroll");Gh.scroller.setAttribute("tabIndex","-1");Gh.wrapper=Bf("div",[Gh.scrollbarFiller,Gh.gutterFiller,Gh.scroller],"CodeMirror");if(Au&&D5<8){Gh.gutters.style.zIndex=-1;Gh.scroller.style.paddingRight=0}if(!AB&&!(FR&&O)){Gh.scroller.draggable=true}if(Gg){if(Gg.appendChild){Gg.appendChild(Gh.wrapper)}else{Gg(Gh.wrapper)}}Gh.viewFrom=Gh.viewTo=Gj.first;Gh.reportedViewFrom=Gh.reportedViewTo=Gj.first;Gh.view=[];Gh.renderedView=null;Gh.externalMeasured=null;Gh.viewOffset=0;Gh.lastWrapHeight=Gh.lastWrapWidth=0;Gh.updateLineNumbers=null;Gh.nativeBarWidth=Gh.barHeight=Gh.barWidth=0;Gh.scrollbarsClipped=false;Gh.lineNumWidth=Gh.lineNumInnerWidth=Gh.lineNumChars=null;Gh.alignWidgets=false;Gh.cachedCharWidth=Gh.cachedTextHeight=Gh.cachedPaddingH=null;Gh.maxLine=null;Gh.maxLineLength=0;Gh.maxLineChanged=false;Gh.wheelDX=Gh.wheelDY=Gh.wheelStartX=Gh.wheelStartY=null;Gh.shift=false;Gh.selForContextMenu=null;Gh.activeTouch=null;Gi.init(Gh)}function Fh(Gg){Gg.doc.mode=Da.getMode(Gg.options,Gg.doc.modeOption);CU(Gg)}function CU(Gg){Gg.doc.iter(function(Gh){if(Gh.stateAfter){Gh.stateAfter=null}if(Gh.styles){Gh.styles=null}});Gg.doc.frontier=Gg.doc.first;CD(Gg,100);Gg.state.modeGen++;if(Gg.curOp){DA(Gg)}}function Cf(Gg){if(Gg.options.lineWrapping){FC(Gg.display.wrapper,"CodeMirror-wrap");Gg.display.sizer.style.minWidth="";Gg.display.sizerWidth=null}else{Fw(Gg.display.wrapper,"CodeMirror-wrap");DK(Gg)}Bm(Gg);DA(Gg);d(Gg);setTimeout(function(){AP(Gg)},100)}function AL(Gi){var Gh=D8(Gi.display),Gj=Gi.options.lineWrapping;var Gg=Gj&&Math.max(5,Gi.display.scroller.clientWidth/Dd(Gi.display)-3);return function(Gm){if(EN(Gi.doc,Gm)){return 0}var Gl=0;if(Gm.widgets){for(var Gk=0;Gk<Gm.widgets.length;Gk++){if(Gm.widgets[Gk].height){Gl+=Gm.widgets[Gk].height}}}if(Gj){return Gl+(Math.ceil(Gm.text.length/Gg)||1)*Gh}else{return Gl+Gh}}}function Bm(Gh){var Gi=Gh.doc,Gg=AL(Gh);Gi.iter(function(Gj){var Gk=Gg(Gj);if(Gk!=Gj.height){CN(Gj,Gk)}})}function Cg(Gg){Gg.display.wrapper.className=Gg.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+Gg.options.theme.replace(/(^|\s)\s*/g," cm-s-");d(Gg)}function CQ(Gg){Cm(Gg);DA(Gg);setTimeout(function(){Ex(Gg)},20)}function Cm(Gl){var Gi=Gl.display.gutters,Gk=Gl.options.gutters;AS(Gi);for(var Gg=0;Gg<Gk.length;++Gg){var Gj=Gk[Gg];var Gh=Gi.appendChild(Bf("div",null,"CodeMirror-gutter "+Gj));if(Gj=="CodeMirror-linenumbers"){Gl.display.lineGutter=Gh;Gh.style.width=(Gl.display.lineNumWidth||1)+"px"}}Gi.style.display=Gg?"":"none";C2(Gl)}function C2(Gh){var Gg=Gh.display.gutters.offsetWidth;Gh.display.sizer.style.marginLeft=Gg+"px"}function BM(Gj){if(Gj.height==0){return 0}var Gi=Gj.text.length,Gh,Gg=Gj;while(Gh=E(Gg)){var Gk=Gh.find(0,true);Gg=Gk.from.line;Gi+=Gk.from.ch-Gk.to.ch}Gg=Gj;while(Gh=Co(Gg)){var Gk=Gh.find(0,true);Gi-=Gg.text.length-Gk.from.ch;Gg=Gk.to.line;Gi+=Gg.text.length-Gk.to.ch}return Gi}function DK(Gh){var Gg=Gh.display,Gi=Gh.doc;Gg.maxLine=Df(Gi,Gi.first);Gg.maxLineLength=BM(Gg.maxLine);Gg.maxLineChanged=true;Gi.iter(function(Gk){var Gj=BM(Gk);if(Gj>Gg.maxLineLength){Gg.maxLineLength=Gj;Gg.maxLine=Gk}})}function s(Gg){var Gh=DG(Gg.gutters,"CodeMirror-linenumbers");if(Gh==-1&&Gg.lineNumbers){Gg.gutters=Gg.gutters.concat(["CodeMirror-linenumbers"])}else{if(Gh>-1&&!Gg.lineNumbers){Gg.gutters=Gg.gutters.slice(0);Gg.gutters.splice(Gh,1)}}}function A9(Gj){var Gg=Gj.display,Gh=Gg.gutters.offsetWidth;var Gi=Math.round(Gj.doc.height+Fq(Gj.display));return{clientHeight:Gg.scroller.clientHeight,viewHeight:Gg.wrapper.clientHeight,scrollWidth:Gg.scroller.scrollWidth,clientWidth:Gg.scroller.clientWidth,viewWidth:Gg.wrapper.clientWidth,barLeft:Gj.options.fixedGutter?Gh:0,docHeight:Gi,scrollHeight:Gi+q(Gj)+Gg.barHeight,nativeBarWidth:Gg.nativeBarWidth,gutterWidth:Gh}}function Bd(Gg,Gi,Gk){this.cm=Gk;var Gj=this.vert=Bf("div",[Bf("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var Gh=this.horiz=Bf("div",[Bf("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");Gg(Gj);Gg(Gh);B(Gj,"scroll",function(){if(Gj.clientHeight){Gi(Gj.scrollTop,"vertical")}});B(Gh,"scroll",function(){if(Gh.clientWidth){Gi(Gh.scrollLeft,"horizontal")}});this.checkedOverlay=false;if(Au&&D5<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}Bd.prototype=CG({update:function(Gl){var Gk=Gl.scrollWidth>Gl.clientWidth+1;var Gi=Gl.scrollHeight>Gl.clientHeight+1;var Gj=Gl.nativeBarWidth;if(Gi){this.vert.style.display="block";this.vert.style.bottom=Gk?Gj+"px":"0";var Gg=Gl.viewHeight-(Gk?Gj:0);this.vert.firstChild.style.height=Math.max(0,Gl.scrollHeight-Gl.clientHeight+Gg)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(Gk){this.horiz.style.display="block";this.horiz.style.right=Gi?Gj+"px":"0";this.horiz.style.left=Gl.barLeft+"px";var Gh=Gl.viewWidth-Gl.barLeft-(Gi?Gj:0);this.horiz.firstChild.style.width=(Gl.scrollWidth-Gl.clientWidth+Gh)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedOverlay&&Gl.clientHeight>0){if(Gj==0){this.overlayHack()}this.checkedOverlay=true}return{right:Gi?Gj:0,bottom:Gk?Gj:0}},setScrollLeft:function(Gg){if(this.horiz.scrollLeft!=Gg){this.horiz.scrollLeft=Gg}},setScrollTop:function(Gg){if(this.vert.scrollTop!=Gg){this.vert.scrollTop=Gg}},overlayHack:function(){var Gi=FZ&&!BB?"12px":"18px";this.horiz.style.minHeight=this.vert.style.minWidth=Gi;var Gg=this;var Gh=function(Gj){if(Cd(Gj)!=Gg.vert&&Cd(Gj)!=Gg.horiz){BQ(Gg.cm,Er)(Gj)}};B(this.vert,"mousedown",Gh);B(this.horiz,"mousedown",Gh)},clear:function(){var Gg=this.horiz.parentNode;Gg.removeChild(this.horiz);Gg.removeChild(this.vert)}},Bd.prototype);function DJ(){}DJ.prototype=CG({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},DJ.prototype);Da.scrollbarModel={"native":Bd,"null":DJ};function Bl(Gg){if(Gg.display.scrollbars){Gg.display.scrollbars.clear();if(Gg.display.scrollbars.addClass){Fw(Gg.display.wrapper,Gg.display.scrollbars.addClass)}}Gg.display.scrollbars=new Da.scrollbarModel[Gg.options.scrollbarStyle](function(Gh){Gg.display.wrapper.insertBefore(Gh,Gg.display.scrollbarFiller);B(Gh,"mousedown",function(){if(Gg.state.focused){setTimeout(function(){Gg.display.input.focus()},0)}});Gh.setAttribute("cm-not-content","true")},function(Gh,Gi){if(Gi=="horizontal"){Bg(Gg,Gh)}else{Dg(Gg,Gh)}},Gg);if(Gg.display.scrollbars.addClass){FC(Gg.display.wrapper,Gg.display.scrollbars.addClass)}}function AP(Gj,Gk){if(!Gk){Gk=A9(Gj)}var Gg=Gj.display.barWidth,Gh=Gj.display.barHeight;J(Gj,Gk);for(var Gi=0;Gi<4&&Gg!=Gj.display.barWidth||Gh!=Gj.display.barHeight;Gi++){if(Gg!=Gj.display.barWidth&&Gj.options.lineWrapping){BH(Gj)}J(Gj,A9(Gj));Gg=Gj.display.barWidth;Gh=Gj.display.barHeight}}function J(Gi,Gj){var Gg=Gi.display;var Gh=Gg.scrollbars.update(Gj);Gg.sizer.style.paddingRight=(Gg.barWidth=Gh.right)+"px";Gg.sizer.style.paddingBottom=(Gg.barHeight=Gh.bottom)+"px";if(Gh.right&&Gh.bottom){Gg.scrollbarFiller.style.display="block";Gg.scrollbarFiller.style.height=Gh.bottom+"px";Gg.scrollbarFiller.style.width=Gh.right+"px"}else{Gg.scrollbarFiller.style.display=""}if(Gh.bottom&&Gi.options.coverGutterNextToScrollbar&&Gi.options.fixedGutter){Gg.gutterFiller.style.display="block";Gg.gutterFiller.style.height=Gh.bottom+"px";Gg.gutterFiller.style.width=Gj.gutterWidth+"px"}else{Gg.gutterFiller.style.display=""}}function t(Gn,Gk,Gj){var Gh=Gj&&Gj.top!=null?Math.max(0,Gj.top):Gn.scroller.scrollTop;Gh=Math.floor(Gh-S(Gn));var Gl=Gj&&Gj.bottom!=null?Gj.bottom:Gh+Gn.wrapper.clientHeight;var Gg=FF(Gk,Gh),Go=FF(Gk,Gl);if(Gj&&Gj.ensure){var Gi=Gj.ensure.from.line,Gm=Gj.ensure.to.line;if(Gi<Gg){Gg=Gi;Go=FF(Gk,E8(Df(Gk,Gi))+Gn.wrapper.clientHeight)}else{if(Math.min(Gm,Gk.lastLine())>=Go){Gg=FF(Gk,E8(Df(Gk,Gm))-Gn.wrapper.clientHeight);Go=Gm}}}return{from:Gg,to:Math.max(Go,Gg+1)}}function Ex(Gi){var Go=Gi.display,Gg=Go.view;if(!Go.alignWidgets&&(!Go.gutters.firstChild||!Gi.options.fixedGutter)){return}var Gn=By(Go)-Go.scroller.scrollLeft+Gi.doc.scrollLeft;var Gh=Go.gutters.offsetWidth,Gl=Gn+"px";for(var Gm=0;Gm<Gg.length;Gm++){if(!Gg[Gm].hidden){if(Gi.options.fixedGutter&&Gg[Gm].gutter){Gg[Gm].gutter.style.left=Gl}var Gk=Gg[Gm].alignable;if(Gk){for(var Gj=0;Gj<Gk.length;Gj++){Gk[Gj].style.left=Gl}}}}if(Gi.options.fixedGutter){Go.gutters.style.left=(Gn+Gh)+"px"}}function Es(Gl){if(!Gl.options.lineNumbers){return false}var Gm=Gl.doc,Gk=A0(Gl.options,Gm.first+Gm.size-1),Gi=Gl.display;if(Gk.length!=Gi.lineNumChars){var Gg=Gi.measure.appendChild(Bf("div",[Bf("div",Gk)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var Gj=Gg.firstChild.offsetWidth,Gh=Gg.offsetWidth-Gj;Gi.lineGutter.style.width="";Gi.lineNumInnerWidth=Math.max(Gj,Gi.lineGutter.offsetWidth-Gh)+1;Gi.lineNumWidth=Gi.lineNumInnerWidth+Gh;Gi.lineNumChars=Gi.lineNumInnerWidth?Gk.length:-1;Gi.lineGutter.style.width=Gi.lineNumWidth+"px";C2(Gl);return true}return false}function A0(Gh,Gg){return String(Gh.lineNumberFormatter(Gg+Gh.firstLineNumber))}function By(Gg){return Gg.scroller.getBoundingClientRect().left-Gg.sizer.getBoundingClientRect().left}function A5(Gj,Gi,Gh){var Gg=Gj.display;this.viewport=Gi;this.visible=t(Gg,Gj.doc,Gi);this.editorIsHidden=!Gg.wrapper.offsetWidth;this.wrapperHeight=Gg.wrapper.clientHeight;this.wrapperWidth=Gg.wrapper.clientWidth;this.oldDisplayWidth=CT(Gj);this.force=Gh;this.dims=EV(Gj);this.events=[]}A5.prototype.signal=function(Gh,Gg){if(AK(Gh,Gg)){this.events.push(arguments)}};A5.prototype.finish=function(){for(var Gg=0;Gg<this.events.length;Gg++){BA.apply(null,this.events[Gg])}};function Bx(Gh){var Gg=Gh.display;if(!Gg.scrollbarsClipped&&Gg.scroller.offsetWidth){Gg.nativeBarWidth=Gg.scroller.offsetWidth-Gg.scroller.clientWidth;Gg.heightForcer.style.height=q(Gh)+"px";Gg.sizer.style.marginBottom=-Gg.nativeBarWidth+"px";Gg.sizer.style.borderRightWidth=q(Gh)+"px";Gg.scrollbarsClipped=true}}function w(Gk,Gl){var Go=Gk.display,Gm=Gk.doc;if(Gl.editorIsHidden){DH(Gk);return false}if(!Gl.force&&Gl.visible.from>=Go.viewFrom&&Gl.visible.to<=Go.viewTo&&(Go.updateLineNumbers==null||Go.updateLineNumbers>=Go.viewTo)&&Go.renderedView==Go.view&&Dq(Gk)==0){return false}if(Es(Gk)){DH(Gk);Gl.dims=EV(Gk)}var Gj=Gm.first+Gm.size;var Gg=Math.max(Gl.visible.from-Gk.options.viewportMargin,Gm.first);var Gp=Math.min(Gj,Gl.visible.to+Gk.options.viewportMargin);if(Go.viewFrom<Gg&&Gg-Go.viewFrom<20){Gg=Math.max(Gm.first,Go.viewFrom)}if(Go.viewTo>Gp&&Go.viewTo-Gp<20){Gp=Math.min(Gj,Go.viewTo)}if(Bb){Gg=Cb(Gk.doc,Gg);Gp=Ds(Gk.doc,Gp)}var Gn=Gg!=Go.viewFrom||Gp!=Go.viewTo||Go.lastWrapHeight!=Gl.wrapperHeight||Go.lastWrapWidth!=Gl.wrapperWidth;Ey(Gk,Gg,Gp);Go.viewOffset=E8(Df(Gk.doc,Go.viewFrom));Gk.display.mover.style.top=Go.viewOffset+"px";var Gi=Dq(Gk);if(!Gn&&Gi==0&&!Gl.force&&Go.renderedView==Go.view&&(Go.updateLineNumbers==null||Go.updateLineNumbers>=Go.viewTo)){return false}var Gh=Db();if(Gi>4){Go.lineDiv.style.display="none"}D2(Gk,Go.updateLineNumbers,Gl.dims);if(Gi>4){Go.lineDiv.style.display=""}Go.renderedView=Go.view;if(Gh&&Db()!=Gh&&Gh.offsetHeight){Gh.focus()}AS(Go.cursorDiv);AS(Go.selectionDiv);Go.gutters.style.height=Go.sizer.style.minHeight=0;if(Gn){Go.lastWrapHeight=Gl.wrapperHeight;Go.lastWrapWidth=Gl.wrapperWidth;CD(Gk,400)}Go.updateLineNumbers=null;return true}function Ci(Gk,Gh){var Gj=Gh.viewport;for(var Gi=true;;Gi=false){if(!Gi||!Gk.options.lineWrapping||Gh.oldDisplayWidth==CT(Gk)){if(Gj&&Gj.top!=null){Gj={top:Math.min(Gk.doc.height+Fq(Gk.display)-Bu(Gk),Gj.top)}}Gh.visible=t(Gk.display,Gk.doc,Gj);if(Gh.visible.from>=Gk.display.viewFrom&&Gh.visible.to<=Gk.display.viewTo){break}}if(!w(Gk,Gh)){break}BH(Gk);var Gg=A9(Gk);B2(Gk);Ed(Gk,Gg);AP(Gk,Gg)}Gh.signal(Gk,"update",Gk);if(Gk.display.viewFrom!=Gk.display.reportedViewFrom||Gk.display.viewTo!=Gk.display.reportedViewTo){Gh.signal(Gk,"viewportChange",Gk,Gk.display.viewFrom,Gk.display.viewTo);Gk.display.reportedViewFrom=Gk.display.viewFrom;Gk.display.reportedViewTo=Gk.display.viewTo}}function E9(Gj,Gi){var Gh=new A5(Gj,Gi);if(w(Gj,Gh)){BH(Gj);Ci(Gj,Gh);var Gg=A9(Gj);B2(Gj);Ed(Gj,Gg);AP(Gj,Gg);Gh.finish()}}function Ed(Gh,Gi){Gh.display.sizer.style.minHeight=Gi.docHeight+"px";var Gg=Gi.docHeight+Gh.display.barHeight;Gh.display.heightForcer.style.top=Gg+"px";Gh.display.gutters.style.height=Math.max(Gg+q(Gh),Gi.clientHeight)+"px"}function BH(Gi){var Go=Gi.display;var Gm=Go.lineDiv.offsetTop;for(var Gl=0;Gl<Go.view.length;Gl++){var Gg=Go.view[Gl],Gh;if(Gg.hidden){continue}if(Au&&D5<8){var Gp=Gg.node.offsetTop+Gg.node.offsetHeight;Gh=Gp-Gm;Gm=Gp}else{var Gk=Gg.node.getBoundingClientRect();Gh=Gk.bottom-Gk.top}var Gj=Gg.line.height-Gh;if(Gh<2){Gh=D8(Go)}if(Gj>0.001||Gj<-0.001){CN(Gg.line,Gh);BD(Gg.line);if(Gg.rest){for(var Gn=0;Gn<Gg.rest.length;Gn++){BD(Gg.rest[Gn])}}}}}function BD(Gh){if(Gh.widgets){for(var Gg=0;Gg<Gh.widgets.length;++Gg){Gh.widgets[Gg].height=Gh.widgets[Gg].node.offsetHeight}}}function EV(Gm){var Gh=Gm.display,Gi={},Gl={};var Gg=Gh.gutters.clientLeft;for(var Gj=Gh.gutters.firstChild,Gk=0;Gj;Gj=Gj.nextSibling,++Gk){Gi[Gm.options.gutters[Gk]]=Gj.offsetLeft+Gj.clientLeft+Gg;Gl[Gm.options.gutters[Gk]]=Gj.clientWidth}return{fixedPos:By(Gh),gutterTotalWidth:Gh.gutters.offsetWidth,gutterLeft:Gi,gutterWidth:Gl,wrapperWidth:Gh.wrapper.clientWidth}}function D2(Gl,Gn,Gg){var Gs=Gl.display,Gj=Gl.options.lineNumbers;var Gq=Gs.lineDiv,Gh=Gq.firstChild;function Go(Gu){var Gv=Gu.nextSibling;if(AB&&FZ&&Gl.display.currentWheelTarget==Gu){Gu.style.display="none"}else{Gu.parentNode.removeChild(Gu)}return Gv}var Gi=Gs.view,Gm=Gs.viewFrom;for(var Gp=0;Gp<Gi.length;Gp++){var Gk=Gi[Gp];if(Gk.hidden){}else{if(!Gk.node||Gk.node.parentNode!=Gq){var Gr=BG(Gl,Gk,Gm,Gg);Gq.insertBefore(Gr,Gh)}else{while(Gh!=Gk.node){Gh=Go(Gh)}var Gt=Gj&&Gn!=null&&Gn<=Gm&&Gk.lineNumber;if(Gk.changes){if(DG(Gk.changes,"gutter")>-1){Gt=false}M(Gl,Gk,Gm,Gg)}if(Gt){AS(Gk.lineNumber);Gk.lineNumber.appendChild(document.createTextNode(A0(Gl.options,Gm)))}Gh=Gk.node.nextSibling}}Gm+=Gk.size}while(Gh){Gh=Go(Gh)}}function M(Gk,Gh,Gj,Gi){for(var Gl=0;Gl<Gh.changes.length;Gl++){var Gg=Gh.changes[Gl];if(Gg=="text"){D6(Gk,Gh)}else{if(Gg=="gutter"){D9(Gk,Gh,Gj,Gi)}else{if(Gg=="class"){r(Gh)}else{if(Gg=="widget"){y(Gk,Gh,Gi)}}}}}Gh.changes=null}function E7(Gg){if(Gg.node==Gg.text){Gg.node=Bf("div",null,null,"position: relative");if(Gg.text.parentNode){Gg.text.parentNode.replaceChild(Gg.node,Gg.text)}Gg.node.appendChild(Gg.text);if(Au&&D5<8){Gg.node.style.zIndex=2}}return Gg.node}function BY(Gg){var Gh=Gg.bgClass?Gg.bgClass+" "+(Gg.line.bgClass||""):Gg.line.bgClass;if(Gh){Gh+=" CodeMirror-linebackground"}if(Gg.background){if(Gh){Gg.background.className=Gh}else{Gg.background.parentNode.removeChild(Gg.background);Gg.background=null}}else{if(Gh){var Gi=E7(Gg);Gg.background=Gi.insertBefore(Bf("div",null,Gh),Gi.firstChild)}}}function ED(Gi,Gh){var Gg=Gi.display.externalMeasured;if(Gg&&Gg.line==Gh.line){Gi.display.externalMeasured=null;Gh.measure=Gg.measure;return Gg.built}return T(Gi,Gh)}function D6(Gj,Gh){var Gi=Gh.text.className;var Gg=ED(Gj,Gh);if(Gh.text==Gh.node){Gh.node=Gg.pre}Gh.text.parentNode.replaceChild(Gg.pre,Gh.text);Gh.text=Gg.pre;if(Gg.bgClass!=Gh.bgClass||Gg.textClass!=Gh.textClass){Gh.bgClass=Gg.bgClass;Gh.textClass=Gg.textClass;r(Gh)}else{if(Gi){Gh.text.className=Gi}}}function r(Gg){BY(Gg);if(Gg.line.wrapClass){E7(Gg).className=Gg.line.wrapClass}else{if(Gg.node!=Gg.text){Gg.node.className=""}}var Gh=Gg.textClass?Gg.textClass+" "+(Gg.line.textClass||""):Gg.line.textClass;Gg.text.className=Gh||""}function D9(Gi,Gh,Gj,Gm){if(Gh.gutter){Gh.node.removeChild(Gh.gutter);Gh.gutter=null}if(Gh.gutterBackground){Gh.node.removeChild(Gh.gutterBackground);Gh.gutterBackground=null}if(Gh.line.gutterClass){var Gk=E7(Gh);Gh.gutterBackground=Bf("div",null,"CodeMirror-gutter-background "+Gh.line.gutterClass,"left: "+(Gi.options.fixedGutter?Gm.fixedPos:-Gm.gutterTotalWidth)+"px; width: "+Gm.gutterTotalWidth+"px");Gk.insertBefore(Gh.gutterBackground,Gh.text)}var Gg=Gh.line.gutterMarkers;if(Gi.options.lineNumbers||Gg){var Gk=E7(Gh);var Go=Gh.gutter=Bf("div",null,"CodeMirror-gutter-wrapper","left: "+(Gi.options.fixedGutter?Gm.fixedPos:-Gm.gutterTotalWidth)+"px");Gi.display.input.setUneditable(Go);Gk.insertBefore(Go,Gh.text);if(Gh.line.gutterClass){Go.className+=" "+Gh.line.gutterClass}if(Gi.options.lineNumbers&&(!Gg||!Gg["CodeMirror-linenumbers"])){Gh.lineNumber=Go.appendChild(Bf("div",A0(Gi.options,Gj),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+Gm.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+Gi.display.lineNumInnerWidth+"px"))}if(Gg){for(var Gl=0;Gl<Gi.options.gutters.length;++Gl){var Gn=Gi.options.gutters[Gl],Gp=Gg.hasOwnProperty(Gn)&&Gg[Gn];if(Gp){Go.appendChild(Bf("div",[Gp],"CodeMirror-gutter-elt","left: "+Gm.gutterLeft[Gn]+"px; width: "+Gm.gutterWidth[Gn]+"px"))}}}}}function y(Gk,Gg,Gj){if(Gg.alignable){Gg.alignable=null}for(var Gi=Gg.node.firstChild,Gh;Gi;Gi=Gh){var Gh=Gi.nextSibling;if(Gi.className=="CodeMirror-linewidget"){Gg.node.removeChild(Gi)}}AC(Gk,Gg,Gj)}function BG(Gk,Gh,Gj,Gi){var Gg=ED(Gk,Gh);Gh.text=Gh.node=Gg.pre;if(Gg.bgClass){Gh.bgClass=Gg.bgClass}if(Gg.textClass){Gh.textClass=Gg.textClass}r(Gh);D9(Gk,Gh,Gj,Gi);AC(Gk,Gh,Gi);return Gh.node}function AC(Gj,Gg,Gi){Cy(Gj,Gg.line,Gg,Gi,true);if(Gg.rest){for(var Gh=0;Gh<Gg.rest.length;Gh++){Cy(Gj,Gg.rest[Gh],Gg,Gi,false)}}}function Cy(Gi,Gg,Gh,Gm,Gl){if(!Gg.widgets){return}var Gj=E7(Gh);for(var Go=0,Gk=Gg.widgets;Go<Gk.length;++Go){var Gn=Gk[Go],Gp=Bf("div",[Gn.node],"CodeMirror-linewidget");if(!Gn.handleMouseEvents){Gp.setAttribute("cm-ignore-events","true")}De(Gn,Gp,Gh,Gm);Gi.display.input.setUneditable(Gp);if(Gl&&Gn.above){Gj.insertBefore(Gp,Gh.gutter||Gh.text)}else{Gj.appendChild(Gp)}U(Gn,"redraw")}}function De(Gk,Gi,Gg,Gj){if(Gk.noHScroll){(Gg.alignable||(Gg.alignable=[])).push(Gi);var Gh=Gj.wrapperWidth;Gi.style.left=Gj.fixedPos+"px";if(!Gk.coverGutter){Gh-=Gj.gutterTotalWidth;Gi.style.paddingLeft=Gj.gutterTotalWidth+"px"}Gi.style.width=Gh+"px"}if(Gk.coverGutter){Gi.style.zIndex=5;Gi.style.position="relative";if(!Gk.noHScroll){Gi.style.marginLeft=-Gj.gutterTotalWidth+"px"}}}var AW=Da.Pos=function(Gh,Gg){if(!(this instanceof AW)){return new AW(Gh,Gg)}this.line=Gh;this.ch=Gg};var BP=Da.cmpPos=function(Gh,Gg){return Gh.line-Gg.line||Gh.ch-Gg.ch};function FN(Gg){return AW(Gg.line,Gg.ch)}function Dp(Gh,Gg){return BP(Gh,Gg)<0?Gg:Gh}function EA(Gh,Gg){return BP(Gh,Gg)<0?Gh:Gg}function CA(Gg){if(!Gg.state.focused){Gg.display.input.focus();DM(Gg)}}function EM(Gg){return Gg.options.readOnly||Gg.doc.cantEdit}var Be=null;function EX(Gk,Gl,Gg,Gn,Go){var Gp=Gk.doc;Gk.display.shift=false;if(!Gn){Gn=Gp.sel}var Gu=Gk.state.pasteIncoming||Go=="paste";var Gh=Gp.splitLines(Gl),Gt=null;if(Gu&&Gn.ranges.length>1){if(Be&&Be.join("\n")==Gl){if(Gn.ranges.length%Be.length==0){Gt=[];for(var Gr=0;Gr<Be.length;Gr++){Gt.push(Gp.splitLines(Be[Gr]))}}}else{if(Gh.length==Gn.ranges.length){Gt=FT(Gh,function(Gv){return[Gv]})}}}for(var Gr=Gn.ranges.length-1;Gr>=0;Gr--){var Gs=Gn.ranges[Gr];var Gj=Gs.from(),Gi=Gs.to();if(Gs.empty()){if(Gg&&Gg>0){Gj=AW(Gj.line,Gj.ch-Gg)}else{if(Gk.state.overwrite&&!Gu){Gi=AW(Gi.line,Math.min(Df(Gp,Gi.line).text.length,Gi.ch+Am(Gh).length))}}}var Gq=Gk.curOp.updateInput;var Gm={from:Gj,to:Gi,text:Gt?Gt[Gr%Gt.length]:Gh,origin:Go||(Gu?"paste":Gk.state.cutIncoming?"cut":"+input")};EB(Gk.doc,Gm);U(Gk,"inputRead",Gk,Gm)}if(Gl&&!Gu){W(Gk,Gl)}F(Gk);Gk.curOp.updateInput=Gq;Gk.curOp.typing=true;Gk.state.pasteIncoming=Gk.state.cutIncoming=false}function Ab(Gg,Gh){var Gi=Gg.clipboardData&&Gg.clipboardData.getData("text/plain");if(Gi){Gg.preventDefault();Cc(Gh,function(){EX(Gh,Gi,0,null,"paste")});return true}}function W(Gh,Gi){if(!Gh.options.electricChars||!Gh.options.smartIndent){return}var Gj=Gh.doc.sel;for(var Gk=Gj.ranges.length-1;Gk>=0;Gk--){var Gn=Gj.ranges[Gk];if(Gn.head.ch>100||(Gk&&Gj.ranges[Gk-1].head.line==Gn.head.line)){continue}var Gl=Gh.getModeAt(Gn.head);var Gg=false;if(Gl.electricChars){for(var Gm=0;Gm<Gl.electricChars.length;Gm++){if(Gi.indexOf(Gl.electricChars.charAt(Gm))>-1){Gg=AI(Gh,Gn.head.line,"smart");break}}}else{if(Gl.electricInput){if(Gl.electricInput.test(Df(Gh.doc,Gn.head.line).text.slice(0,Gn.head.ch))){Gg=AI(Gh,Gn.head.line,"smart")}}}if(Gg){U(Gh,"electricInput",Gh,Gn.head.line)}}}function e(Gl){var Gj=[],Gi=[];for(var Gh=0;Gh<Gl.doc.sel.ranges.length;Gh++){var Gk=Gl.doc.sel.ranges[Gh].head.line;var Gg={anchor:AW(Gk,0),head:AW(Gk+1,0)};Gi.push(Gg);Gj.push(Gl.getRange(Gg.anchor,Gg.head))}return{text:Gj,ranges:Gi}}function k(Gg){Gg.setAttribute("autocorrect","off");Gg.setAttribute("autocapitalize","off");Gg.setAttribute("spellcheck","false")}function FS(Gg){this.cm=Gg;this.prevInput="";this.pollingFast=false;this.polling=new Fg();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null}function F3(){var Gh=Bf("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var Gg=Bf("div",[Gh],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(AB){Gh.style.width="1000px"}else{Gh.setAttribute("wrap","off")}if(C3){Gh.style.border="1px solid black"}k(Gh);return Gg}FS.prototype=CG({init:function(Gi){var Gj=this,Gl=this.cm;var Gk=this.wrapper=F3();var Gh=this.textarea=Gk.firstChild;Gi.wrapper.insertBefore(Gk,Gi.wrapper.firstChild);if(C3){Gh.style.width="0px"}B(Gh,"input",function(){if(Au&&D5>=9&&Gj.hasSelection){Gj.hasSelection=null}Gj.poll()});B(Gh,"paste",function(Gm){if(Ab(Gm,Gl)){return true}Gl.state.pasteIncoming=true;Gj.fastPoll()});function Gg(Gm){if(Gl.somethingSelected()){Be=Gl.getSelections();if(Gj.inaccurateSelection){Gj.prevInput="";Gj.inaccurateSelection=false;Gh.value=Be.join("\n");El(Gh)}}else{if(!Gl.options.lineWiseCopyCut){return}else{var Gn=e(Gl);Be=Gn.text;if(Gm.type=="cut"){Gl.setSelections(Gn.ranges,null,BI)}else{Gj.prevInput="";Gh.value=Gn.text.join("\n");El(Gh)}}}if(Gm.type=="cut"){Gl.state.cutIncoming=true}}B(Gh,"cut",Gg);B(Gh,"copy",Gg);B(Gi.scroller,"paste",function(Gm){if(AM(Gi,Gm)){return}Gl.state.pasteIncoming=true;Gj.focus()});B(Gi.lineSpace,"selectstart",function(Gm){if(!AM(Gi,Gm)){FQ(Gm)}});B(Gh,"compositionstart",function(){var Gm=Gl.getCursor("from");Gj.composing={start:Gm,range:Gl.markText(Gm,Gl.getCursor("to"),{className:"CodeMirror-composing"})}});B(Gh,"compositionend",function(){if(Gj.composing){Gj.poll();Gj.composing.range.clear();Gj.composing=null}})},prepareSelection:function(){var Gl=this.cm,Gj=Gl.display,Gm=Gl.doc;var Gi=CS(Gl);if(Gl.options.moveInputWithCursor){var Gh=b(Gl,Gm.sel.primary().head,"div");var Gg=Gj.wrapper.getBoundingClientRect(),Gk=Gj.lineDiv.getBoundingClientRect();Gi.teTop=Math.max(0,Math.min(Gj.wrapper.clientHeight-10,Gh.top+Gk.top-Gg.top));Gi.teLeft=Math.max(0,Math.min(Gj.wrapper.clientWidth-10,Gh.left+Gk.left-Gg.left))}return Gi},showSelection:function(Gh){var Gg=this.cm,Gi=Gg.display;Eb(Gi.cursorDiv,Gh.cursors);Eb(Gi.selectionDiv,Gh.selection);if(Gh.teTop!=null){this.wrapper.style.top=Gh.teTop+"px";this.wrapper.style.left=Gh.teLeft+"px"}},reset:function(Gh){if(this.contextMenuPending){return}var Gg,Gm,Gl=this.cm,Gj=Gl.doc;if(Gl.somethingSelected()){this.prevInput="";var Gi=Gj.sel.primary();Gg=Av&&(Gi.to().line-Gi.from().line>100||(Gm=Gl.getSelection()).length>1000);var Gk=Gg?"-":Gm||Gl.getSelection();this.textarea.value=Gk;if(Gl.state.focused){El(this.textarea)}if(Au&&D5>=9){this.hasSelection=Gk}}else{if(!Gh){this.prevInput=this.textarea.value="";if(Au&&D5>=9){this.hasSelection=null}}}this.inaccurateSelection=Gg},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!O||Db()!=this.textarea)){try{this.textarea.focus()}catch(Gg){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var Gg=this;if(Gg.pollingFast){return}Gg.polling.set(this.cm.options.pollInterval,function(){Gg.poll();if(Gg.cm.state.focused){Gg.slowPoll()}})},fastPoll:function(){var Gh=false,Gi=this;Gi.pollingFast=true;function Gg(){var Gj=Gi.poll();if(!Gj&&!Gh){Gh=true;Gi.polling.set(60,Gg)}else{Gi.pollingFast=false;Gi.slowPoll()}}Gi.polling.set(20,Gg)},poll:function(){var Gj=this.cm,Gn=this.textarea,Gg=this.prevInput;if(this.contextMenuPending||!Gj.state.focused||(Dn(Gn)&&!Gg&&!this.composing)||EM(Gj)||Gj.options.disableInput||Gj.state.keySeq){return false}var Gl=Gn.value;if(Gl==Gg&&!Gj.somethingSelected()){return false}if(Au&&D5>=9&&this.hasSelection===Gl||FZ&&/[\uf700-\uf7ff]/.test(Gl)){Gj.display.input.reset();return false}if(Gj.doc.sel==Gj.display.selForContextMenu){var Gi=Gl.charCodeAt(0);if(Gi==8203&&!Gg){Gg="\u200b"}if(Gi==8666){this.reset();return this.cm.execCommand("undo")}}var Gh=0,Gm=Math.min(Gg.length,Gl.length);while(Gh<Gm&&Gg.charCodeAt(Gh)==Gl.charCodeAt(Gh)){++Gh}var Gk=this;Cc(Gj,function(){EX(Gj,Gl.slice(Gh),Gg.length-Gh,null,Gk.composing?"*compose":null);if(Gl.length>1000||Gl.indexOf("\n")>-1){Gn.value=Gk.prevInput=""}else{Gk.prevInput=Gl}if(Gk.composing){Gk.composing.range.clear();Gk.composing.range=Gj.markText(Gk.composing.start,Gj.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(Au&&D5>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(Gg){var Go=this,Gl=Go.cm,Gq=Gl.display,Gr=Go.textarea;var Gn=DR(Gl,Gg),Gs=Gq.scroller.scrollTop;if(!Gn||Fr){return}var Gk=Gl.options.resetSelectionOnContextMenu;if(Gk&&Gl.doc.sel.contains(Gn)==-1){BQ(Gl,Cz)(Gl.doc,Ff(Gn),BI)}var Gh=Gr.style.cssText;Go.wrapper.style.position="absolute";Gr.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(Gg.clientY-5)+"px; left: "+(Gg.clientX-5)+"px; z-index: 1000; background: "+(Au?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(AB){var Gm=window.scrollY}Gq.input.focus();if(AB){window.scrollTo(null,Gm)}Gq.input.reset();if(!Gl.somethingSelected()){Gr.value=Go.prevInput=" "}Go.contextMenuPending=true;Gq.selForContextMenu=Gl.doc.sel;clearTimeout(Gq.detectingSelectAll);function Gj(){if(Gr.selectionStart!=null){var Gu=Gl.somethingSelected();var Gt="\u200b"+(Gu?Gr.value:"");Gr.value="\u21da";Gr.value=Gt;Go.prevInput=Gu?"":"\u200b";Gr.selectionStart=1;Gr.selectionEnd=Gt.length;Gq.selForContextMenu=Gl.doc.sel}}function Gp(){Go.contextMenuPending=false;Go.wrapper.style.position="relative";Gr.style.cssText=Gh;if(Au&&D5<9){Gq.scrollbars.setScrollTop(Gq.scroller.scrollTop=Gs)}if(Gr.selectionStart!=null){if(!Au||(Au&&D5<9)){Gj()}var Gt=0,Gu=function(){if(Gq.selForContextMenu==Gl.doc.sel&&Gr.selectionStart==0&&Gr.selectionEnd>0&&Go.prevInput=="\u200b"){BQ(Gl,AV.selectAll)(Gl)}else{if(Gt++<10){Gq.detectingSelectAll=setTimeout(Gu,500)}else{Gq.input.reset()}}};Gq.detectingSelectAll=setTimeout(Gu,200)}}if(Au&&D5>=9){Gj()}if(DY){DF(Gg);var Gi=function(){Aq(window,"mouseup",Gi);setTimeout(Gp,20)};B(window,"mouseup",Gi)}else{setTimeout(Gp,50)}},setUneditable:EW,needsContentAttribute:false},FS.prototype);function AX(Gg){this.cm=Gg;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Fg();this.gracePeriod=false}AX.prototype=CG({init:function(Gh){var Gi=this,Gk=Gi.cm;var Gj=Gi.div=Gh.lineDiv;Gj.contentEditable="true";k(Gj);B(Gj,"paste",function(Gl){Ab(Gl,Gk)});B(Gj,"compositionstart",function(Gl){var Gp=Gl.data;Gi.composing={sel:Gk.doc.sel,data:Gp,startData:Gp};if(!Gp){return}var Gm=Gk.doc.sel.primary();var Gn=Gk.getLine(Gm.head.line);var Go=Gn.indexOf(Gp,Math.max(0,Gm.head.ch-Gp.length));if(Go>-1&&Go<=Gm.head.ch){Gi.composing.sel=Ff(AW(Gm.head.line,Go),AW(Gm.head.line,Go+Gp.length))}});B(Gj,"compositionupdate",function(Gl){Gi.composing.data=Gl.data});B(Gj,"compositionend",function(Gl){var Gm=Gi.composing;if(!Gm){return}if(Gl.data!=Gm.startData&&!/\u200b/.test(Gl.data)){Gm.data=Gl.data}setTimeout(function(){if(!Gm.handled){Gi.applyComposition(Gm)}if(Gi.composing==Gm){Gi.composing=null}},50)});B(Gj,"touchstart",function(){Gi.forceCompositionEnd()});B(Gj,"input",function(){if(Gi.composing){return}if(!Gi.pollContent()){Cc(Gi.cm,function(){DA(Gk)})}});function Gg(Gl){if(Gk.somethingSelected()){Be=Gk.getSelections();if(Gl.type=="cut"){Gk.replaceSelection("",null,"cut")}}else{if(!Gk.options.lineWiseCopyCut){return}else{var Gn=e(Gk);Be=Gn.text;if(Gl.type=="cut"){Gk.operation(function(){Gk.setSelections(Gn.ranges,0,BI);Gk.replaceSelection("",null,"cut")})}}}if(Gl.clipboardData&&!C3){Gl.preventDefault();Gl.clipboardData.clearData();Gl.clipboardData.setData("text/plain",Be.join("\n"))}else{var Go=F3(),Gp=Go.firstChild;Gk.display.lineSpace.insertBefore(Go,Gk.display.lineSpace.firstChild);Gp.value=Be.join("\n");var Gm=document.activeElement;El(Gp);setTimeout(function(){Gk.display.lineSpace.removeChild(Go);Gm.focus()},50)}}B(Gj,"copy",Gg);B(Gj,"cut",Gg)},prepareSelection:function(){var Gg=CS(this.cm,false);Gg.focus=this.cm.state.focused;return Gg},showSelection:function(Gg){if(!Gg||!this.cm.display.view.length){return}if(Gg.focus){this.showPrimarySelection()}this.showMultipleSelections(Gg)},showPrimarySelection:function(){var Go=window.getSelection(),Gn=this.cm.doc.sel.primary();var Gp=C5(this.cm,Go.anchorNode,Go.anchorOffset);var Gi=C5(this.cm,Go.focusNode,Go.focusOffset);if(Gp&&!Gp.bad&&Gi&&!Gi.bad&&BP(EA(Gp,Gi),Gn.from())==0&&BP(Dp(Gp,Gi),Gn.to())==0){return}var Gj=FE(this.cm,Gn.from());var Gl=FE(this.cm,Gn.to());if(!Gj&&!Gl){return}var Gg=this.cm.display.view;var Gh=Go.rangeCount&&Go.getRangeAt(0);if(!Gj){Gj={node:Gg[0].measure.map[2],offset:0}}else{if(!Gl){var Gm=Gg[Gg.length-1].measure;var Gq=Gm.maps?Gm.maps[Gm.maps.length-1]:Gm.map;Gl={node:Gq[Gq.length-1],offset:Gq[Gq.length-2]-Gq[Gq.length-3]}}}try{var Gr=A2(Gj.node,Gj.offset,Gl.offset,Gl.node)}catch(Gk){}if(Gr){Go.removeAllRanges();Go.addRange(Gr);if(Gh&&Go.anchorNode==null){Go.addRange(Gh)}else{if(FR){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var Gg=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){Gg.gracePeriod=false;if(Gg.selectionChanged()){Gg.cm.operation(function(){Gg.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(Gg){Eb(this.cm.display.cursorDiv,Gg.cursors);Eb(this.cm.display.selectionDiv,Gg.selection)},rememberSelection:function(){var Gg=window.getSelection();this.lastAnchorNode=Gg.anchorNode;this.lastAnchorOffset=Gg.anchorOffset;this.lastFocusNode=Gg.focusNode;this.lastFocusOffset=Gg.focusOffset},selectionInEditor:function(){var Gh=window.getSelection();if(!Gh.rangeCount){return false}var Gg=Gh.getRangeAt(0).commonAncestorContainer;return CM(this.div,Gg)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var Gh=this;if(this.selectionInEditor()){this.pollSelection()}else{Cc(this.cm,function(){Gh.cm.curOp.selectionChanged=true})}function Gg(){if(Gh.cm.state.focused){Gh.pollSelection();Gh.polling.set(Gh.cm.options.pollInterval,Gg)}}this.polling.set(this.cm.options.pollInterval,Gg)},selectionChanged:function(){var Gg=window.getSelection();return Gg.anchorNode!=this.lastAnchorNode||Gg.anchorOffset!=this.lastAnchorOffset||Gg.focusNode!=this.lastFocusNode||Gg.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var Gi=window.getSelection(),Gj=this.cm;this.rememberSelection();var Gh=C5(Gj,Gi.anchorNode,Gi.anchorOffset);var Gg=C5(Gj,Gi.focusNode,Gi.focusOffset);if(Gh&&Gg){Cc(Gj,function(){Cz(Gj.doc,Ff(Gh,Gg),BI);if(Gh.bad||Gg.bad){Gj.curOp.selectionChanged=true}})}}},pollContent:function(){var Gv=this.cm,Gw=Gv.display,Go=Gv.doc.sel.primary();var Gs=Go.from(),Gh=Go.to();if(Gs.line<Gw.viewFrom||Gh.line>Gw.viewTo-1){return false}var Gm;if(Gs.line==Gw.viewFrom||(Gm=Bj(Gv,Gs.line))==0){var Gg=E5(Gw.view[0].line);var Gx=Gw.view[0].node}else{var Gg=E5(Gw.view[Gm].line);var Gx=Gw.view[Gm-1].node.nextSibling}var Gr=Bj(Gv,Gh.line);if(Gr==Gw.view.length-1){var GB=Gw.viewTo-1;var Gl=Gw.lineDiv.lastChild}else{var GB=E5(Gw.view[Gr+1].line)-1;var Gl=Gw.view[Gr+1].node.previousSibling}var Gj=Gv.doc.splitLines(Bw(Gv,Gx,Gl,Gg,GB));var Gu=Cq(Gv.doc,AW(Gg,0),AW(GB,Df(Gv.doc,GB).text.length));while(Gj.length>1&&Gu.length>1){if(Am(Gj)==Am(Gu)){Gj.pop();Gu.pop();GB--}else{if(Gj[0]==Gu[0]){Gj.shift();Gu.shift();Gg++}else{break}}}var Gp=0,Gk=0;var GA=Gj[0],Gq=Gu[0],GC=Math.min(GA.length,Gq.length);while(Gp<GC&&GA.charCodeAt(Gp)==Gq.charCodeAt(Gp)){++Gp}var Gi=Am(Gj),Gt=Am(Gu);var Gz=Math.min(Gi.length-(Gj.length==1?Gp:0),Gt.length-(Gu.length==1?Gp:0));while(Gk<Gz&&Gi.charCodeAt(Gi.length-Gk-1)==Gt.charCodeAt(Gt.length-Gk-1)){++Gk}Gj[Gj.length-1]=Gi.slice(0,Gi.length-Gk);Gj[0]=Gj[0].slice(Gp);var Gn=AW(Gg,Gp);var Gy=AW(GB,Gu.length?Am(Gu).length-Gk:0);if(Gj.length>1||Gj[0]||BP(Gn,Gy)){E2(Gv.doc,Gj,Gn,Gy,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(Gg){if(Gg.data&&Gg.data!=Gg.startData){BQ(this.cm,EX)(this.cm,Gg.data,0,Gg.sel)}},setUneditable:function(Gg){Gg.setAttribute("contenteditable","false")},onKeyPress:function(Gg){Gg.preventDefault();BQ(this.cm,EX)(this.cm,String.fromCharCode(Gg.charCode==null?Gg.keyCode:Gg.charCode),0)},onContextMenu:EW,resetPosition:EW,needsContentAttribute:true},AX.prototype);function FE(Gk,Gm){var Gg=Cw(Gk,Gm.line);if(!Gg||Gg.hidden){return null}var Gh=Df(Gk.doc,Gm.line);var Gn=B4(Gg,Gh,Gm.line);var Go=Ea(Gh),Gi="left";if(Go){var Gl=Ah(Go,Gm.ch);Gi=Gl%2?"right":"left"}var Gj=BC(Gn.map,Gm.ch,Gi);Gj.offset=Gj.collapse=="right"?Gj.end:Gj.start;return Gj}function Q(Gh,Gg){if(Gg){Gh.bad=true}return Gh}function C5(Gl,Gj,Gg){var Gi;if(Gj==Gl.display.lineDiv){Gi=Gl.display.lineDiv.childNodes[Gg];if(!Gi){return Q(Gl.clipPos(AW(Gl.display.viewTo-1)),true)}Gj=null;Gg=0}else{for(Gi=Gj;;Gi=Gi.parentNode){if(!Gi||Gi==Gl.display.lineDiv){return null}if(Gi.parentNode&&Gi.parentNode==Gl.display.lineDiv){break}}}for(var Gh=0;Gh<Gl.display.view.length;Gh++){var Gk=Gl.display.view[Gh];if(Gk.node==Gi){return CK(Gk,Gj,Gg)}}}function CK(Gj,Gq,Gh){var Gt=Gj.text.firstChild,Gn=false;if(!Gq||!CM(Gt,Gq)){return Q(AW(E5(Gj.line),0),true)}if(Gq==Gt){Gn=true;Gq=Gt.childNodes[Gh];Gh=0;if(!Gq){var Gg=Gj.rest?Am(Gj.rest):Gj.line;return Q(AW(E5(Gg),Gg.text.length),Gn)}}var Gk=Gq.nodeType==3?Gq:null,Gi=Gq;if(!Gk&&Gq.childNodes.length==1&&Gq.firstChild.nodeType==3){Gk=Gq.firstChild;if(Gh){Gh=Gk.nodeValue.length}}while(Gi.parentNode!=Gt){Gi=Gi.parentNode}var Gm=Gj.measure,Gr=Gm.maps;function Go(Gx,GB,Gw){for(var GA=-1;GA<(Gr?Gr.length:0);GA++){var GD=GA<0?Gm.map:Gr[GA];for(var Gy=0;Gy<GD.length;Gy+=3){var GC=GD[Gy+2];if(GC==Gx||GC==GB){var Gv=E5(GA<0?Gj.line:Gj.rest[GA]);var Gz=GD[Gy]+Gw;if(Gw<0||GC!=Gx){Gz=GD[Gy+(Gw?1:0)]}return AW(Gv,Gz)}}}}var Gp=Go(Gk,Gi,Gh);if(Gp){return Q(Gp,Gn)}for(var Gl=Gi.nextSibling,Gs=Gk?Gk.nodeValue.length-Gh:0;Gl;Gl=Gl.nextSibling){Gp=Go(Gl,Gl.firstChild,0);if(Gp){return Q(AW(Gp.line,Gp.ch-Gs),Gn)}else{Gs+=Gl.textContent.length}}for(var Gu=Gi.previousSibling,Gs=Gh;Gu;Gu=Gu.previousSibling){Gp=Go(Gu,Gu.firstChild,-1);if(Gp){return Q(AW(Gp.line,Gp.ch+Gs),Gn)}else{Gs+=Gl.textContent.length}}}function Bw(Gi,Gm,Go,Gn,Gh){var Gl="",Gk=false,Gp=Gi.doc.lineSeparator();function Gg(Gq){return function(Gr){return Gr.id==Gq}}function Gj(Gs){if(Gs.nodeType==1){var Gt=Gs.getAttribute("cm-text");if(Gt!=null){if(Gt==""){Gt=Gs.textContent.replace(/\u200b/g,"")}Gl+=Gt;return}var Gr=Gs.getAttribute("cm-marker"),Gv;if(Gr){var Gw=Gi.findMarks(AW(Gn,0),AW(Gh+1,0),Gg(+Gr));if(Gw.length&&(Gv=Gw[0].find())){Gl+=Cq(Gi.doc,Gv.from,Gv.to).join(Gp)}return}if(Gs.getAttribute("contenteditable")=="false"){return}for(var Gq=0;Gq<Gs.childNodes.length;Gq++){Gj(Gs.childNodes[Gq])}if(/^(pre|div|p)$/i.test(Gs.nodeName)){Gk=true}}else{if(Gs.nodeType==3){var Gu=Gs.nodeValue;if(!Gu){return}if(Gk){Gl+=Gp;Gk=false}Gl+=Gu}}}for(;;){Gj(Gm);if(Gm==Go){break}Gm=Gm.nextSibling}return Gl}Da.inputStyles={"textarea":FS,"contenteditable":AX};function CW(Gh,Gg){this.ranges=Gh;this.primIndex=Gg}CW.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(Gj){if(Gj==this){return true}if(Gj.primIndex!=this.primIndex||Gj.ranges.length!=this.ranges.length){return false}for(var Gg=0;Gg<this.ranges.length;Gg++){var Gh=this.ranges[Gg],Gi=Gj.ranges[Gg];if(BP(Gh.anchor,Gi.anchor)!=0||BP(Gh.head,Gi.head)!=0){return false}}return true},deepCopy:function(){for(var Gh=[],Gg=0;Gg<this.ranges.length;Gg++){Gh[Gg]=new A(FN(this.ranges[Gg].anchor),FN(this.ranges[Gg].head))}return new CW(Gh,this.primIndex)},somethingSelected:function(){for(var Gg=0;Gg<this.ranges.length;Gg++){if(!this.ranges[Gg].empty()){return true}}return false},contains:function(Gh,Gi){if(!Gi){Gi=Gh}for(var Gg=0;Gg<this.ranges.length;Gg++){var Gj=this.ranges[Gg];if(BP(Gi,Gj.from())>=0&&BP(Gh,Gj.to())<=0){return Gg}}return -1}};function A(Gh,Gg){this.anchor=Gh;this.head=Gg}A.prototype={from:function(){return EA(this.anchor,this.head)},to:function(){return Dp(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function BL(Gm,Gh){var Gj=Gm[Gh];Gm.sort(function(Gq,Gp){return BP(Gq.from(),Gp.from())});Gh=DG(Gm,Gj);for(var Gk=1;Gk<Gm.length;Gk++){var Gg=Gm[Gk],Gl=Gm[Gk-1];if(BP(Gl.to(),Gg.from())>=0){var Gn=EA(Gl.from(),Gg.from()),Go=Dp(Gl.to(),Gg.to());var Gi=Gl.empty()?Gg.from()==Gg.head:Gl.from()==Gl.head;if(Gk<=Gh){--Gh}Gm.splice(--Gk,2,new A(Gi?Go:Gn,Gi?Gn:Go))}}return new CW(Gm,Gh)}function Ff(Gh,Gg){return new CW([new A(Gh,Gg||Gh)],0)}function o(Gh,Gg){return Math.max(Gh.first,Math.min(Gg,Gh.first+Gh.size-1))}function F8(Gi,Gg){if(Gg.line<Gi.first){return AW(Gi.first,0)}var Gh=Gi.first+Gi.size-1;if(Gg.line>Gh){return AW(Gh,Df(Gi,Gh).text.length)}return Ez(Gg,Df(Gi,Gg.line).text.length)}function Ez(Gg,Gi){var Gh=Gg.ch;if(Gh==null||Gh>Gi){return AW(Gg.line,Gi)}else{if(Gh<0){return AW(Gg.line,0)}else{return Gg}}}function Fp(Gh,Gg){return Gg>=Gh.first&&Gg<Gh.first+Gh.size}function FH(Gj,Gg){for(var Gi=[],Gh=0;Gh<Gg.length;Gh++){Gi[Gh]=F8(Gj,Gg[Gh])}return Gi}function AQ(Gl,Gk,Gi,Gj){if(Gl.cm&&Gl.cm.display.shift||Gl.extend){var Gg=Gk.anchor;if(Gj){var Gh=BP(Gi,Gg)<0;if(Gh!=(BP(Gj,Gg)<0)){Gg=Gi;Gi=Gj}else{if(Gh!=(BP(Gi,Gj)<0)){Gi=Gj}}}return new A(Gg,Gi)}else{return new A(Gj||Gi,Gi)}}function Gc(Gj,Gh,Gi,Gg){Cz(Gj,new CW([AQ(Gj,Gj.sel.primary(),Gh,Gi)],0),Gg)}function F2(Gl,Gh,Gi){for(var Gj=[],Gg=0;Gg<Gl.sel.ranges.length;Gg++){Gj[Gg]=AQ(Gl,Gl.sel.ranges[Gg],Gh[Gg],null)}var Gk=BL(Gj,Gl.sel.primIndex);Cz(Gl,Gk,Gi)}function E1(Gk,Gg,Gj,Gi){var Gh=Gk.sel.ranges.slice(0);Gh[Gg]=Gj;Cz(Gk,BL(Gh,Gk.sel.primIndex),Gi)}function z(Gj,Gi,Gh,Gg){Cz(Gj,Ff(Gi,Gh),Gg)}function AD(Gi,Gh){var Gg={ranges:Gh.ranges,update:function(Gk){this.ranges=[];for(var Gj=0;Gj<Gk.length;Gj++){this.ranges[Gj]=new A(F8(Gi,Gk[Gj].anchor),F8(Gi,Gk[Gj].head))}}};BA(Gi,"beforeSelectionChange",Gi,Gg);if(Gi.cm){BA(Gi.cm,"beforeSelectionChange",Gi.cm,Gg)}if(Gg.ranges!=Gh.ranges){return BL(Gg.ranges,Gg.ranges.length-1)}else{return Gh}}function Dk(Gk,Gi,Gh){var Gg=Gk.history.done,Gj=Am(Gg);if(Gj&&Gj.ranges){Gg[Gg.length-1]=Gi;C0(Gk,Gi,Gh)}else{Cz(Gk,Gi,Gh)}}function Cz(Gi,Gh,Gg){C0(Gi,Gh,Gg);x(Gi,Gi.sel,Gi.cm?Gi.cm.curOp.id:NaN,Gg)}function C0(Gj,Gi,Gh){if(AK(Gj,"beforeSelectionChange")||Gj.cm&&AK(Gj.cm,"beforeSelectionChange")){Gi=AD(Gj,Gi)}var Gg=Gh&&Gh.bias||(BP(Gi.primary().head,Gj.sel.primary().head)<0?-1:1);B5(Gj,FA(Gj,Gi,Gg,true));if(!(Gh&&Gh.scroll===false)&&Gj.cm){F(Gj.cm)}}function B5(Gh,Gg){if(Gg.equals(Gh.sel)){return}Gh.sel=Gg;if(Gh.cm){Gh.cm.curOp.updateInput=Gh.cm.curOp.selectionChanged=true;DB(Gh.cm)}U(Gh,"cursorActivity",Gh)}function Fj(Gg){B5(Gg,FA(Gg,Gg.sel,null,false),BI)}function FA(Gk,Gj,Gl,Gh){var Gg;for(var Gm=0;Gm<Gj.ranges.length;Gm++){var Gn=Gj.ranges[Gm];var Go=Aw(Gk,Gn.anchor,Gl,Gh);var Gi=Aw(Gk,Gn.head,Gl,Gh);if(Gg||Go!=Gn.anchor||Gi!=Gn.head){if(!Gg){Gg=Gj.ranges.slice(0,Gm)}Gg[Gm]=new A(Go,Gi)}}return Gg?BL(Gg,Gj.primIndex):Gj}function Aw(Go,Gj,Gp,Gk){var Gi=false,Gm=Gj;var Gh=Gp||1;Go.cantEdit=false;search:for(;;){var Gg=Df(Go,Gm.line);if(Gg.markedSpans){for(var Gn=0;Gn<Gg.markedSpans.length;++Gn){var Gr=Gg.markedSpans[Gn],Gq=Gr.marker;if((Gr.from==null||(Gq.inclusiveLeft?Gr.from<=Gm.ch:Gr.from<Gm.ch))&&(Gr.to==null||(Gq.inclusiveRight?Gr.to>=Gm.ch:Gr.to>Gm.ch))){if(Gk){BA(Gq,"beforeCursorEnter");if(Gq.explicitlyCleared){if(!Gg.markedSpans){break}else{--Gn;continue}}}if(!Gq.atomic){continue}var Gl=Gq.find(Gh<0?-1:1);if(BP(Gl,Gm)==0){Gl.ch+=Gh;if(Gl.ch<0){if(Gl.line>Go.first){Gl=F8(Go,AW(Gl.line-1))}else{Gl=null}}else{if(Gl.ch>Gg.text.length){if(Gl.line<Go.first+Go.size-1){Gl=AW(Gl.line+1,0)}else{Gl=null}}}if(!Gl){if(Gi){if(!Gk){return Aw(Go,Gj,Gp,true)}Go.cantEdit=true;return AW(Go.first,0)}Gi=true;Gl=Gj;Gh=-Gh}}Gm=Gl;continue search}}}return Gm}}function B2(Gg){Gg.display.input.showSelection(Gg.display.input.prepareSelection())}function CS(Gh,Gi){var Gl=Gh.doc,Gg={};var Go=Gg.cursors=document.createDocumentFragment();var Gk=Gg.selection=document.createDocumentFragment();for(var Gj=0;Gj<Gl.sel.ranges.length;Gj++){if(Gi===false&&Gj==Gl.sel.primIndex){continue}var Gm=Gl.sel.ranges[Gj];var Gn=Gm.empty();if(Gn||Gh.options.showCursorWhenSelecting){Fc(Gh,Gm,Go)}if(!Gn){Cr(Gh,Gm,Gk)}}return Gg}function Fc(Gk,Gi,Gl){var Gj=b(Gk,Gi.head,"div",null,null,!Gk.options.singleCursorHeightPerLine);var Gg=Gl.appendChild(Bf("div","\u00a0","CodeMirror-cursor"));Gg.style.left=Gj.left+"px";Gg.style.top=Gj.top+"px";Gg.style.height=Math.max(0,Gj.bottom-Gj.top)*Gk.options.cursorHeight+"px";if(Gj.other){var Gh=Gl.appendChild(Bf("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));Gh.style.display="";Gh.style.left=Gj.other.left+"px";Gh.style.top=Gj.other.top+"px";Gh.style.height=(Gj.other.bottom-Gj.other.top)*0.85+"px"}}function Cr(Gt,Gi,Gn){var Gu=Gt.display,Gr=Gt.doc;var Gm=document.createDocumentFragment();var Gp=g(Gt.display),Gk=Gp.left;var Gw=Math.max(Gu.sizerWidth,CT(Gt)-Gu.sizer.offsetLeft)-Gp.right;function Gv(Gy,Gz,GA,GB){if(Gz<0){Gz=0}Gz=Math.round(Gz);GB=Math.round(GB);Gm.appendChild(Bf("div",null,"CodeMirror-selected","position: absolute; left: "+Gy+"px; top: "+Gz+"px; width: "+(GA==null?Gw-Gy:GA)+"px; height: "+(GB-Gz)+"px"))}function Gs(Gy,GA,GD){var GF=Df(Gr,Gy);var GC=GF.text.length;var Gz,GB;function GE(GG,GH){return Cj(Gt,AW(Gy,GG),"div",GF,GH)}EJ(Ea(GF),GA||0,GD==null?GC:GD,function(GL,GM,GI){var GG=GE(GL,"left"),GN,GK,GH;if(GL==GM){GN=GG;GK=GH=GG.left}else{GN=GE(GM-1,"right");if(GI=="rtl"){var GJ=GG;GG=GN;GN=GJ}GK=GG.left;GH=GN.right}if(GA==null&&GL==0){GK=Gk}if(GN.top-GG.top>3){Gv(GK,GG.top,null,GG.bottom);GK=Gk;if(GG.bottom<GN.top){Gv(GK,GG.bottom,null,GN.top)}}if(GD==null&&GM==GC){GH=Gw}if(!Gz||GG.top<Gz.top||GG.top==Gz.top&&GG.left<Gz.left){Gz=GG}if(!GB||GN.bottom>GB.bottom||GN.bottom==GB.bottom&&GN.right>GB.right){GB=GN}if(GK<Gk+1){GK=Gk}Gv(GK,GN.top,GH-GK,GN.bottom)});return{start:Gz,end:GB}}var Gl=Gi.from(),Gg=Gi.to();if(Gl.line==Gg.line){Gs(Gl.line,Gl.ch,Gg.ch)}else{var Gh=Df(Gr,Gl.line),Gx=Df(Gr,Gg.line);var Go=Fm(Gh)==Fm(Gx);var Gq=Gs(Gl.line,Gl.ch,Go?Gh.text.length+1:null).end;var Gj=Gs(Gg.line,Go?0:null,Gg.ch).start;if(Go){if(Gq.top<Gj.top-2){Gv(Gq.right,Gq.top,null,Gq.bottom);Gv(Gk,Gj.top,Gj.left,Gj.bottom)}else{Gv(Gq.right,Gq.top,Gj.left-Gq.right,Gq.bottom)}}if(Gq.bottom<Gj.top){Gv(Gk,Gq.bottom,null,Gj.top)}}Gn.appendChild(Gm)}function EC(Gi){if(!Gi.state.focused){return}var Gg=Gi.display;clearInterval(Gg.blinker);var Gh=true;Gg.cursorDiv.style.visibility="";if(Gi.options.cursorBlinkRate>0){Gg.blinker=setInterval(function(){Gg.cursorDiv.style.visibility=(Gh=!Gh)?"":"hidden"},Gi.options.cursorBlinkRate)}else{if(Gi.options.cursorBlinkRate<0){Gg.cursorDiv.style.visibility="hidden"}}}function CD(Gh,Gg){if(Gh.doc.mode.startState&&Gh.doc.frontier<Gh.display.viewTo){Gh.state.highlight.set(Gg,Cx(Eo,Gh))}}function Eo(Gj){var Gk=Gj.doc;if(Gk.frontier<Gk.first){Gk.frontier=Gk.first}if(Gk.frontier>=Gj.display.viewTo){return}var Gh=+new Date+Gj.options.workTime;var Gg=Ck(Gk.mode,EK(Gj,Gk.frontier));var Gi=[];Gk.iter(Gk.frontier,Math.min(Gk.first+Gk.size,Gj.display.viewTo+500),function(Gr){if(Gk.frontier>=Gj.display.viewFrom){var Gq=Gr.styles;var Go=DT(Gj,Gr,Gg,true);Gr.styles=Go.styles;var Gp=Gr.styleClasses,Gl=Go.classes;if(Gl){Gr.styleClasses=Gl}else{if(Gp){Gr.styleClasses=null}}var Gm=!Gq||Gq.length!=Gr.styles.length||Gp!=Gl&&(!Gp||!Gl||Gp.bgClass!=Gl.bgClass||Gp.textClass!=Gl.textClass);for(var Gn=0;!Gm&&Gn<Gq.length;++Gn){Gm=Gq[Gn]!=Gr.styles[Gn]}if(Gm){Gi.push(Gk.frontier)}Gr.stateAfter=Ck(Gk.mode,Gg)}else{AR(Gj,Gr.text,Gg);Gr.stateAfter=Gk.frontier%5==0?Ck(Gk.mode,Gg):null}++Gk.frontier;if(+new Date>Gh){CD(Gj,Gj.options.workDelay);return true}});if(Gi.length){Cc(Gj,function(){for(var Gl=0;Gl<Gi.length;Gl++){BZ(Gj,Gi[Gl],"text")}})}}function Cn(Gj,Gk,Gn){var Gp,Go,Gl=Gj.doc;var Gm=Gn?-1:Gk-(Gj.doc.mode.innerMode?1000:100);for(var Gi=Gk;Gi>Gm;--Gi){if(Gi<=Gl.first){return Gl.first}var Gg=Df(Gl,Gi-1);if(Gg.stateAfter&&(!Gn||Gi<=Gl.frontier)){return Gi}var Gh=h(Gg.text,null,Gj.options.tabSize);if(Go==null||Gp>Gh){Go=Gi-1;Gp=Gh}}return Go}function EK(Gl,Gh,Gj){var Gm=Gl.doc,Gi=Gl.display;if(!Gm.mode.startState){return true}var Gg=Cn(Gl,Gh,Gj),Gk=Gg>Gm.first&&Df(Gm,Gg-1).stateAfter;if(!Gk){Gk=Af(Gm.mode)}else{Gk=Ck(Gm.mode,Gk)}Gm.iter(Gg,Gh,function(Go){AR(Gl,Go.text,Gk);var Gn=Gg==Gh-1||Gg%5==0||Gg>=Gi.viewFrom&&Gg<Gi.viewTo;Go.stateAfter=Gn?Ck(Gm.mode,Gk):null;++Gg});if(Gj){Gm.frontier=Gg}return Gk}function S(Gg){return Gg.lineSpace.offsetTop}function Fq(Gg){return Gg.mover.offsetHeight-Gg.lineSpace.offsetHeight}function g(Gh){if(Gh.cachedPaddingH){return Gh.cachedPaddingH}var Gg=Eb(Gh.measure,Bf("pre","x"));var Gi=window.getComputedStyle?window.getComputedStyle(Gg):Gg.currentStyle;var Gj={left:parseInt(Gi.paddingLeft),right:parseInt(Gi.paddingRight)};if(!isNaN(Gj.left)&&!isNaN(Gj.right)){Gh.cachedPaddingH=Gj}return Gj}function q(Gg){return BR-Gg.display.nativeBarWidth}function CT(Gg){return Gg.display.scroller.clientWidth-q(Gg)-Gg.display.barWidth}function Bu(Gg){return Gg.display.scroller.clientHeight-q(Gg)-Gg.display.barHeight}function Dv(Gk,Gi,Gh){var Gg=Gk.options.lineWrapping;var Gp=Gg&&CT(Gk);if(!Gi.measure.heights||Gg&&Gi.measure.width!=Gp){var Gm=Gi.measure.heights=[];if(Gg){Gi.measure.width=Gp;var Gj=Gi.text.firstChild.getClientRects();for(var Gl=0;Gl<Gj.length-1;Gl++){var Gn=Gj[Gl],Go=Gj[Gl+1];if(Math.abs(Gn.bottom-Go.bottom)>2){Gm.push((Gn.bottom+Go.top)/2-Gh.top)}}}Gm.push(Gh.bottom-Gh.top)}}function B4(Gg,Gj,Gi){if(Gg.line==Gj){return{map:Gg.measure.map,cache:Gg.measure.cache}}for(var Gh=0;Gh<Gg.rest.length;Gh++){if(Gg.rest[Gh]==Gj){return{map:Gg.measure.maps[Gh],cache:Gg.measure.caches[Gh]}}}for(var Gh=0;Gh<Gg.rest.length;Gh++){if(E5(Gg.rest[Gh])>Gi){return{map:Gg.measure.maps[Gh],cache:Gg.measure.caches[Gh],before:true}}}}function Bq(Gj,Gi){Gi=Fm(Gi);var Gh=E5(Gi);var Gg=Gj.display.externalMeasured=new As(Gj.doc,Gi,Gh);Gg.lineN=Gh;var Gk=Gg.built=T(Gj,Gg);Gg.text=Gk.pre;Eb(Gj.display.lineMeasure,Gk.pre);return Gg}function D3(Gi,Gh,Gg,Gj){return AT(Gi,FL(Gi,Gh),Gg,Gj)}function Cw(Gi,Gh){if(Gh>=Gi.display.viewFrom&&Gh<Gi.display.viewTo){return Gi.display.view[Bj(Gi,Gh)]}var Gg=Gi.display.externalMeasured;if(Gg&&Gh>=Gg.lineN&&Gh<Gg.lineN+Gg.size){return Gg}}function FL(Gj,Gi){var Gh=E5(Gi);var Gg=Cw(Gj,Gh);if(Gg&&!Gg.text){Gg=null}else{if(Gg&&Gg.changes){M(Gj,Gg,Gh,EV(Gj));Gj.curOp.forceUpdate=true}}if(!Gg){Gg=Bq(Gj,Gi)}var Gk=B4(Gg,Gi,Gh);return{line:Gi,view:Gg,rect:null,map:Gk.map,cache:Gk.cache,before:Gk.before,hasHeights:false}}function AT(Gl,Gh,Gk,Gm,Gj){if(Gh.before){Gk=-1}var Gg=Gk+(Gm||""),Gi;if(Gh.cache.hasOwnProperty(Gg)){Gi=Gh.cache[Gg]}else{if(!Gh.rect){Gh.rect=Gh.view.text.getBoundingClientRect()}if(!Gh.hasHeights){Dv(Gl,Gh.view,Gh.rect);Gh.hasHeights=true}Gi=DD(Gl,Gh,Gk,Gm);if(!Gi.bogus){Gh.cache[Gg]=Gi}}return{left:Gi.left,right:Gi.right,top:Gj?Gi.rtop:Gi.top,bottom:Gj?Gi.rbottom:Gi.bottom}}var Ax={left:0,right:0,top:0,bottom:0};function BC(Gp,Gj,Gm){var Gl,Gh,Gi,Gn;for(var Gk=0;Gk<Gp.length;Gk+=3){var Gg=Gp[Gk],Go=Gp[Gk+1];if(Gj<Gg){Gh=0;Gi=1;Gn="left"}else{if(Gj<Go){Gh=Gj-Gg;Gi=Gh+1}else{if(Gk==Gp.length-3||Gj==Go&&Gp[Gk+3]>Gj){Gi=Go-Gg;Gh=Gi-1;if(Gj>=Go){Gn="right"}}}}if(Gh!=null){Gl=Gp[Gk+2];if(Gg==Go&&Gm==(Gl.insertLeft?"left":"right")){Gn=Gm}if(Gm=="left"&&Gh==0){while(Gk&&Gp[Gk-2]==Gp[Gk-3]&&Gp[Gk-1].insertLeft){Gl=Gp[(Gk-=3)+2];Gn="left"}}if(Gm=="right"&&Gh==Go-Gg){while(Gk<Gp.length-3&&Gp[Gk+3]==Gp[Gk+4]&&!Gp[Gk+5].insertLeft){Gl=Gp[(Gk+=3)+2];Gn="right"}}break}}return{node:Gl,start:Gh,end:Gi,collapse:Gn,coverStart:Gg,coverEnd:Go}}function DD(Gs,Gx,Go,Gy){var Gv=BC(Gx.map,Go,Gy);var Gu=Gv.node,Gq=Gv.start,Gm=Gv.end,Gr=Gv.collapse;var Gn;if(Gu.nodeType==3){for(var Gi=0;Gi<4;Gi++){while(Gq&&EY(Gx.line.text.charAt(Gv.coverStart+Gq))){--Gq}while(Gv.coverStart+Gm<Gv.coverEnd&&EY(Gx.line.text.charAt(Gv.coverStart+Gm))){++Gm}if(Au&&D5<9&&Gq==0&&Gm==Gv.coverEnd-Gv.coverStart){Gn=Gu.parentNode.getBoundingClientRect()}else{if(Au&&Gs.options.lineWrapping){var Gz=A2(Gu,Gq,Gm).getClientRects();if(Gz.length){Gn=Gz[Gy=="right"?Gz.length-1:0]}else{Gn=Ax}}else{Gn=A2(Gu,Gq,Gm).getBoundingClientRect()||Ax}}if(Gn.left||Gn.right||Gq==0){break}Gm=Gq;Gq=Gq-1;Gr="right"}if(Au&&D5<11){Gn=Ge(Gs.display.measure,Gn)}}else{if(Gq>0){Gr=Gy="right"}var Gz;if(Gs.options.lineWrapping&&(Gz=Gu.getClientRects()).length>1){Gn=Gz[Gy=="right"?Gz.length-1:0]}else{Gn=Gu.getBoundingClientRect()}}if(Au&&D5<9&&!Gq&&(!Gn||!Gn.left&&!Gn.right)){var Gp=Gu.parentNode.getClientRects()[0];if(Gp){Gn={left:Gp.left,right:Gp.left+Dd(Gs.display),top:Gp.top,bottom:Gp.bottom}}else{Gn=Ax}}var Gt=Gn.top-Gx.rect.top,Gg=Gn.bottom-Gx.rect.top;var Gk=(Gt+Gg)/2;var Gw=Gx.view.measure.heights;for(var Gi=0;Gi<Gw.length-1;Gi++){if(Gk<Gw[Gi]){break}}var Gl=Gi?Gw[Gi-1]:0,Gj=Gw[Gi];var Gh={left:(Gr=="right"?Gn.right:Gn.left)-Gx.rect.left,right:(Gr=="left"?Gn.left:Gn.right)-Gx.rect.left,top:Gl,bottom:Gj};if(!Gn.left&&!Gn.right){Gh.bogus=true}if(!Gs.options.singleCursorHeightPerLine){Gh.rtop=Gt;Gh.rbottom=Gg}return Gh}function Ge(Gj,Gg){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Dh(Gj)){return Gg}var Gh=screen.logicalXDPI/screen.deviceXDPI;var Gi=screen.logicalYDPI/screen.deviceYDPI;return{left:Gg.left*Gh,right:Gg.right*Gh,top:Gg.top*Gi,bottom:Gg.bottom*Gi}}function E0(Gg){if(Gg.measure){Gg.measure.cache={};Gg.measure.heights=null;if(Gg.rest){for(var Gh=0;Gh<Gg.rest.length;Gh++){Gg.measure.caches[Gh]={}}}}}function Ec(Gh){Gh.display.externalMeasure=null;AS(Gh.display.lineMeasure);for(var Gg=0;Gg<Gh.display.view.length;Gg++){E0(Gh.display.view[Gg])}}function d(Gg){Ec(Gg);Gg.display.cachedCharWidth=Gg.display.cachedTextHeight=Gg.display.cachedPaddingH=null;if(!Gg.options.lineWrapping){Gg.display.maxLineChanged=true}Gg.display.lineNumChars=null}function Ev(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ew(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function B7(Gj,Go,Gi,Gk){if(Go.widgets){for(var Gm=0;Gm<Go.widgets.length;++Gm){if(Go.widgets[Gm].above){var Gl=F0(Go.widgets[Gm]);Gi.top+=Gl;Gi.bottom+=Gl}}}if(Gk=="line"){return Gi}if(!Gk){Gk="local"}var Gh=E8(Go);if(Gk=="local"){Gh+=S(Gj.display)}else{Gh-=Gj.display.viewOffset}if(Gk=="page"||Gk=="window"){var Gg=Gj.display.lineSpace.getBoundingClientRect();Gh+=Gg.top+(Gk=="window"?0:Ew());var Gn=Gg.left+(Gk=="window"?0:Ev());Gi.left+=Gn;Gi.right+=Gn}Gi.top+=Gh;Gi.bottom+=Gh;return Gi}function A6(Gm,Gi,Gh){if(Gh=="div"){return Gi}var Gj=Gi.left,Gk=Gi.top;if(Gh=="page"){Gj-=Ev();Gk-=Ew()}else{if(Gh=="local"||!Gh){var Gg=Gm.display.sizer.getBoundingClientRect();Gj+=Gg.left;Gk+=Gg.top}}var Gl=Gm.display.lineSpace.getBoundingClientRect();return{left:Gj-Gl.left,top:Gk-Gl.top}}function Cj(Gj,Gh,Gg,Gi,Gk){if(!Gi){Gi=Df(Gj.doc,Gh.line)}return B7(Gj,Gi,D3(Gj,Gi,Gh.ch,Gk),Gg)}function b(Gi,Gm,Gj,Gp,Gg,Gk){Gp=Gp||Df(Gi.doc,Gm.line);if(!Gg){Gg=FL(Gi,Gp)}function Gl(Gu,Gs){var Gt=AT(Gi,Gg,Gu,Gs?"right":"left",Gk);if(Gs){Gt.left=Gt.right}else{Gt.right=Gt.left}return B7(Gi,Gp,Gt,Gj)}function Go(Gu,Gv){var Gt=Gr[Gv],Gs=Gt.level%2;if(Gu==l(Gt)&&Gv&&Gt.level<Gr[Gv-1].level){Gt=Gr[--Gv];Gu=FI(Gt)-(Gt.level%2?0:1);Gs=true}else{if(Gu==FI(Gt)&&Gv<Gr.length-1&&Gt.level<Gr[Gv+1].level){Gt=Gr[++Gv];Gu=l(Gt)-Gt.level%2;Gs=false}}if(Gs&&Gu==Gt.to&&Gu>Gt.from){return Gl(Gu-1)}return Gl(Gu,Gs)}var Gr=Ea(Gp),Gh=Gm.ch;if(!Gr){return Gl(Gh)}var Gn=Ah(Gr,Gh);var Gq=Go(Gh,Gn);if(Cp!=null){Gq.other=Go(Gh,Cp)}return Gq}function Dl(Gk,Gh){var Gg=0,Gh=F8(Gk.doc,Gh);if(!Gk.options.lineWrapping){Gg=Dd(Gk.display)*Gh.ch}var Gj=Df(Gk.doc,Gh.line);var Gi=E8(Gj)+S(Gk.display);return{left:Gg,right:Gg,top:Gi,bottom:Gi+Gj.height}}function F5(Gk,Gi,Gg,Gj){var Gh=AW(Gk,Gi);Gh.xRel=Gj;if(Gg){Gh.outside=true}return Gh}function Ao(Gi,Gn,Go){var Gl=Gi.doc;Go+=Gi.display.viewOffset;if(Go<0){return F5(Gl.first,0,true,-1)}var Gj=FF(Gl,Go),Gk=Gl.first+Gl.size-1;if(Gj>Gk){return F5(Gl.first+Gl.size-1,Df(Gl,Gk).text.length,true,1)}if(Gn<0){Gn=0}var Gg=Df(Gl,Gj);for(;;){var Gp=DS(Gi,Gg,Gj,Gn,Go);var Gh=Co(Gg);var Gm=Gh&&Gh.find(0,true);if(Gh&&(Gp.ch>Gm.from.ch||Gp.ch==Gm.from.ch&&Gp.xRel>0)){Gj=E5(Gg=Gm.to.line)}else{return Gp}}}function DS(Gy,Gp,Gi,GC,GD){var Gz=GD-E8(Gp);var GA=false,Gk=2*Gy.display.wrapper.clientWidth;var GB=FL(Gy,Gp);function Gg(GG){var GF=b(Gy,AW(Gi,GG),"line",Gp,GB);GA=true;if(Gz>GF.bottom){return GF.left-Gk}else{if(Gz<GF.top){return GF.left+Gk}else{GA=false}}return GF.left}var Gn=Ea(Gp),Gw=Gp.text.length;var Gt=Fi(Gp),Gh=Bp(Gp);var Gr=Gg(Gt),Gs=GA,Gx=Gg(Gh),Gu=GA;if(GC>Gx){return F5(Gi,Gh,Gu,1)}for(;;){if(Gn?Gh==Gt||Gh==Fz(Gp,Gt,1):Gh-Gt<=1){var Gq=GC<Gr||GC-Gr<=Gx-GC?Gt:Gh;var Go=GC-(Gq==Gt?Gr:Gx);while(EY(Gp.text.charAt(Gq))){++Gq}var Gv=F5(Gi,Gq,Gq==Gt?Gs:Gu,Go<-1?-1:Go>1?1:0);return Gv}var Gl=Math.ceil(Gw/2),GE=Gt+Gl;if(Gn){GE=Gt;for(var Gm=0;Gm<Gl;++Gm){GE=Fz(Gp,GE,1)}}var Gj=Gg(GE);if(Gj>GC){Gh=GE;Gx=Gj;if(Gu=GA){Gx+=1000}Gw=Gl}else{Gt=GE;Gr=Gj;Gs=GA;Gw-=Gl}}}var E3;function D8(Gh){if(Gh.cachedTextHeight!=null){return Gh.cachedTextHeight}if(E3==null){E3=Bf("pre");for(var Gg=0;Gg<49;++Gg){E3.appendChild(document.createTextNode("x"));E3.appendChild(Bf("br"))}E3.appendChild(document.createTextNode("x"))}Eb(Gh.measure,E3);var Gi=E3.offsetHeight/50;if(Gi>3){Gh.cachedTextHeight=Gi}AS(Gh.measure);return Gi||1}function Dd(Gg){if(Gg.cachedCharWidth!=null){return Gg.cachedCharWidth}var Gk=Bf("span","xxxxxxxxxx");var Gh=Bf("pre",[Gk]);Eb(Gg.measure,Gh);var Gi=Gk.getBoundingClientRect(),Gj=(Gi.right-Gi.left)/10;if(Gj>2){Gg.cachedCharWidth=Gj}return Gj||10}var Dt=null;var DP=0;function DN(Gg){Gg.curOp={cm:Gg,viewChanged:false,startHeight:Gg.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++DP};if(Dt){Dt.ops.push(Gg.curOp)}else{Gg.curOp.ownsGroup=Dt={ops:[Gg.curOp],delayedCallbacks:[]}}}function Az(Gg){var Gk=Gg.delayedCallbacks,Gh=0;do{for(;Gh<Gk.length;Gh++){Gk[Gh]()}for(var Gj=0;Gj<Gg.ops.length;Gj++){var Gi=Gg.ops[Gj];if(Gi.cursorActivityHandlers){while(Gi.cursorActivityCalled<Gi.cursorActivityHandlers.length){Gi.cursorActivityHandlers[Gi.cursorActivityCalled++](Gi.cm)}}}}while(Gh<Gk.length)}function E4(Gj){var Gi=Gj.curOp,Gg=Gi.ownsGroup;if(!Gg){return}try{Az(Gg)}finally{Dt=null;for(var Gh=0;Gh<Gg.ops.length;Gh++){Gg.ops[Gh].cm.curOp=null}FG(Gg)}}function FG(Gg){var Gi=Gg.ops;for(var Gh=0;Gh<Gi.length;Gh++){G(Gi[Gh])}for(var Gh=0;Gh<Gi.length;Gh++){Bi(Gi[Gh])}for(var Gh=0;Gh<Gi.length;Gh++){B3(Gi[Gh])}for(var Gh=0;Gh<Gi.length;Gh++){Bk(Gi[Gh])}for(var Gh=0;Gh<Gi.length;Gh++){Ct(Gi[Gh])}}function G(Gg){var Gh=Gg.cm,Gi=Gh.display;Bx(Gh);if(Gg.updateMaxLine){DK(Gh)}Gg.mustUpdate=Gg.viewChanged||Gg.forceUpdate||Gg.scrollTop!=null||Gg.scrollToPos&&(Gg.scrollToPos.from.line<Gi.viewFrom||Gg.scrollToPos.to.line>=Gi.viewTo)||Gi.maxLineChanged&&Gh.options.lineWrapping;Gg.update=Gg.mustUpdate&&new A5(Gh,Gg.mustUpdate&&{top:Gg.scrollTop,ensure:Gg.scrollToPos},Gg.forceUpdate)}function Bi(Gg){Gg.updatedDisplay=Gg.mustUpdate&&w(Gg.cm,Gg.update)}function B3(Gg){var Gh=Gg.cm,Gi=Gh.display;if(Gg.updatedDisplay){BH(Gh)}Gg.barMeasure=A9(Gh);if(Gi.maxLineChanged&&!Gh.options.lineWrapping){Gg.adjustWidthTo=D3(Gh,Gi.maxLine,Gi.maxLine.text.length).left+3;Gh.display.sizerWidth=Gg.adjustWidthTo;Gg.barMeasure.scrollWidth=Math.max(Gi.scroller.clientWidth,Gi.sizer.offsetLeft+Gg.adjustWidthTo+q(Gh)+Gh.display.barWidth);Gg.maxScrollLeft=Math.max(0,Gi.sizer.offsetLeft+Gg.adjustWidthTo-CT(Gh))}if(Gg.updatedDisplay||Gg.selectionChanged){Gg.preparedSelection=Gi.input.prepareSelection()}}function Bk(Gg){var Gh=Gg.cm;if(Gg.adjustWidthTo!=null){Gh.display.sizer.style.minWidth=Gg.adjustWidthTo+"px";if(Gg.maxScrollLeft<Gh.doc.scrollLeft){Bg(Gh,Math.min(Gh.display.scroller.scrollLeft,Gg.maxScrollLeft),true)}Gh.display.maxLineChanged=false}if(Gg.preparedSelection){Gh.display.input.showSelection(Gg.preparedSelection)}if(Gg.updatedDisplay){Ed(Gh,Gg.barMeasure)}if(Gg.updatedDisplay||Gg.startHeight!=Gh.doc.height){AP(Gh,Gg.barMeasure)}if(Gg.selectionChanged){EC(Gh)}if(Gh.state.focused&&Gg.updateInput){Gh.display.input.reset(Gg.typing)}if(Gg.focus&&Gg.focus==Db()){CA(Gg.cm)}}function Ct(Gm){var Gh=Gm.cm,Gn=Gh.display,Gk=Gh.doc;if(Gm.updatedDisplay){Ci(Gh,Gm.update)}if(Gn.wheelStartX!=null&&(Gm.scrollTop!=null||Gm.scrollLeft!=null||Gm.scrollToPos)){Gn.wheelStartX=Gn.wheelStartY=null}if(Gm.scrollTop!=null&&(Gn.scroller.scrollTop!=Gm.scrollTop||Gm.forceScroll)){Gk.scrollTop=Math.max(0,Math.min(Gn.scroller.scrollHeight-Gn.scroller.clientHeight,Gm.scrollTop));Gn.scrollbars.setScrollTop(Gk.scrollTop);Gn.scroller.scrollTop=Gk.scrollTop}if(Gm.scrollLeft!=null&&(Gn.scroller.scrollLeft!=Gm.scrollLeft||Gm.forceScroll)){Gk.scrollLeft=Math.max(0,Math.min(Gn.scroller.scrollWidth-CT(Gh),Gm.scrollLeft));Gn.scrollbars.setScrollLeft(Gk.scrollLeft);Gn.scroller.scrollLeft=Gk.scrollLeft;Ex(Gh)}if(Gm.scrollToPos){var Gl=Dz(Gh,F8(Gk,Gm.scrollToPos.from),F8(Gk,Gm.scrollToPos.to),Gm.scrollToPos.margin);if(Gm.scrollToPos.isCursor&&Gh.state.focused){DC(Gh,Gl)}}var Gg=Gm.maybeHiddenMarkers,Gj=Gm.maybeUnhiddenMarkers;if(Gg){for(var Gi=0;Gi<Gg.length;++Gi){if(!Gg[Gi].lines.length){BA(Gg[Gi],"hide")}}}if(Gj){for(var Gi=0;Gi<Gj.length;++Gi){if(Gj[Gi].lines.length){BA(Gj[Gi],"unhide")}}}if(Gn.wrapper.offsetHeight){Gk.scrollTop=Gh.display.scroller.scrollTop}if(Gm.changeObjs){BA(Gh,"changes",Gh,Gm.changeObjs)}if(Gm.update){Gm.update.finish()}}function Cc(Gg,Gh){if(Gg.curOp){return Gh()}DN(Gg);try{return Gh()}finally{E4(Gg)}}function BQ(Gg,Gh){return function(){if(Gg.curOp){return Gh.apply(Gg,arguments)}DN(Gg);try{return Gh.apply(Gg,arguments)}finally{E4(Gg)}}}function DW(Gg){return function(){if(this.curOp){return Gg.apply(this,arguments)}DN(this);try{return Gg.apply(this,arguments)}finally{E4(this)}}}function D7(Gg){return function(){var Gh=this.cm;if(!Gh||Gh.curOp){return Gg.apply(this,arguments)}DN(Gh);try{return Gg.apply(this,arguments)}finally{E4(Gh)}}}function As(Gi,Gh,Gg){this.line=Gh;this.rest=P(Gh);this.size=this.rest?E5(Am(this.rest))-Gg+1:1;this.node=this.text=null;this.hidden=EN(Gi,Gh)}function Fx(Gl,Gg,Gh){var Gk=[],Gi;for(var Gm=Gg;Gm<Gh;Gm=Gi){var Gj=new As(Gl.doc,Df(Gl.doc,Gm),Gm);Gi=Gm+Gj.size;Gk.push(Gj)}return Gk}function DA(Gi,Gk,Go,Gl){if(Gk==null){Gk=Gi.doc.first}if(Go==null){Go=Gi.doc.first+Gi.doc.size}if(!Gl){Gl=0}var Gn=Gi.display;if(Gl&&Go<Gn.viewTo&&(Gn.updateLineNumbers==null||Gn.updateLineNumbers>Gk)){Gn.updateLineNumbers=Gk}Gi.curOp.viewChanged=true;if(Gk>=Gn.viewTo){if(Bb&&Cb(Gi.doc,Gk)<Gn.viewTo){DH(Gi)}}else{if(Go<=Gn.viewFrom){if(Bb&&Ds(Gi.doc,Go+Gl)>Gn.viewFrom){DH(Gi)}else{Gn.viewFrom+=Gl;Gn.viewTo+=Gl}}else{if(Gk<=Gn.viewFrom&&Go>=Gn.viewTo){DH(Gi)}else{if(Gk<=Gn.viewFrom){var Gg=f(Gi,Go,Go+Gl,1);if(Gg){Gn.view=Gn.view.slice(Gg.index);Gn.viewFrom=Gg.lineN;Gn.viewTo+=Gl}else{DH(Gi)}}else{if(Go>=Gn.viewTo){var Gg=f(Gi,Gk,Gk,-1);if(Gg){Gn.view=Gn.view.slice(0,Gg.index);Gn.viewTo=Gg.lineN}else{DH(Gi)}}else{var Gh=f(Gi,Gk,Gk,-1);var Gj=f(Gi,Go,Go+Gl,1);if(Gh&&Gj){Gn.view=Gn.view.slice(0,Gh.index).concat(Fx(Gi,Gh.lineN,Gj.lineN)).concat(Gn.view.slice(Gj.index));Gn.viewTo+=Gl}else{DH(Gi)}}}}}}var Gm=Gn.externalMeasured;if(Gm){if(Go<Gm.lineN){Gm.lineN+=Gl}else{if(Gk<Gm.lineN+Gm.size){Gn.externalMeasured=null}}}}function BZ(Gl,Gk,Gg){Gl.curOp.viewChanged=true;var Gi=Gl.display,Gm=Gl.display.externalMeasured;if(Gm&&Gk>=Gm.lineN&&Gk<Gm.lineN+Gm.size){Gi.externalMeasured=null}if(Gk<Gi.viewFrom||Gk>=Gi.viewTo){return}var Gh=Gi.view[Bj(Gl,Gk)];if(Gh.node==null){return}var Gj=Gh.changes||(Gh.changes=[]);if(DG(Gj,Gg)==-1){Gj.push(Gg)}}function DH(Gg){Gg.display.viewFrom=Gg.display.viewTo=Gg.doc.first;Gg.display.view=[];Gg.display.viewOffset=0}function Bj(Gj,Gh){if(Gh>=Gj.display.viewTo){return null}Gh-=Gj.display.viewFrom;if(Gh<0){return null}var Gi=Gj.display.view;for(var Gg=0;Gg<Gi.length;Gg++){Gh-=Gi[Gg].size;if(Gh<0){return Gg}}}function f(Gk,Gj,Gn,Gh){var Gi=Bj(Gk,Gj),Gl,Gg=Gk.display.view;if(!Bb||Gn==Gk.doc.first+Gk.doc.size){return{index:Gi,lineN:Gn}}for(var Gm=0,Go=Gk.display.viewFrom;Gm<Gi;Gm++){Go+=Gg[Gm].size}if(Go!=Gj){if(Gh>0){if(Gi==Gg.length-1){return null}Gl=(Go+Gg[Gi].size)-Gj;Gi++}else{Gl=Go-Gj}Gj+=Gl;Gn+=Gl}while(Cb(Gk.doc,Gn)!=Gn){if(Gi==(Gh<0?0:Gg.length-1)){return null}Gn+=Gh*Gg[Gi-(Gh<0?1:0)].size;Gi+=Gh}return{index:Gi,lineN:Gn}}function Ey(Gk,Gg,Gh){var Gi=Gk.display,Gj=Gi.view;if(Gj.length==0||Gg>=Gi.viewTo||Gh<=Gi.viewFrom){Gi.view=Fx(Gk,Gg,Gh);Gi.viewFrom=Gg}else{if(Gi.viewFrom>Gg){Gi.view=Fx(Gk,Gg,Gi.viewFrom).concat(Gi.view)}else{if(Gi.viewFrom<Gg){Gi.view=Gi.view.slice(Bj(Gk,Gg))}}Gi.viewFrom=Gg;if(Gi.viewTo<Gh){Gi.view=Gi.view.concat(Fx(Gk,Gi.viewTo,Gh))}else{if(Gi.viewTo>Gh){Gi.view=Gi.view.slice(0,Bj(Gk,Gh))}}}Gi.viewTo=Gh}function Dq(Gj){var Gh=Gj.display.view,Gk=0;for(var Gg=0;Gg<Gh.length;Gg++){var Gi=Gh[Gg];if(!Gi.hidden&&(!Gi.node||Gi.changes)){++Gk}}return Gk}function c(Gj){var Gh=Gj.display;B(Gh.scroller,"mousedown",BQ(Gj,Er));if(Au&&D5<11){B(Gh.scroller,"dblclick",BQ(Gj,function(Go){if(F6(Gj,Go)){return}var Gp=DR(Gj,Go);if(!Gp||C7(Gj,Go)||AM(Gj.display,Go)){return}FQ(Go);var Gq=Gj.findWordAt(Gp);Gc(Gj.doc,Gq.anchor,Gq.head)}))}else{B(Gh.scroller,"dblclick",function(Go){F6(Gj,Go)||FQ(Go)})}if(!DY){B(Gh.scroller,"contextmenu",function(Go){CC(Gj,Go)})}var Gg,Gm={end:0};function Gn(){if(Gh.activeTouch){Gg=setTimeout(function(){Gh.activeTouch=null},1000);Gm=Gh.activeTouch;Gm.end=+new Date}}function Gl(Go){if(Go.touches.length!=1){return false}var Gp=Go.touches[0];return Gp.radiusX<=1&&Gp.radiusY<=1}function Gk(Gq,Gr){if(Gr.left==null){return true}var Go=Gr.left-Gq.left,Gp=Gr.top-Gq.top;return Go*Go+Gp*Gp>20*20}B(Gh.scroller,"touchstart",function(Go){if(!Gl(Go)){clearTimeout(Gg);var Gp=+new Date;Gh.activeTouch={start:Gp,moved:false,prev:Gp-Gm.end<=300?Gm:null};if(Go.touches.length==1){Gh.activeTouch.left=Go.touches[0].pageX;Gh.activeTouch.top=Go.touches[0].pageY}}});B(Gh.scroller,"touchmove",function(){if(Gh.activeTouch){Gh.activeTouch.moved=true}});B(Gh.scroller,"touchend",function(Go){var Gq=Gh.activeTouch;if(Gq&&!AM(Gh,Go)&&Gq.left!=null&&!Gq.moved&&new Date-Gq.start<300){var Gp=Gj.coordsChar(Gh.activeTouch,"page"),Gr;if(!Gq.prev||Gk(Gq,Gq.prev)){Gr=new A(Gp,Gp)}else{if(!Gq.prev.prev||Gk(Gq,Gq.prev.prev)){Gr=Gj.findWordAt(Gp)}else{Gr=new A(AW(Gp.line,0),F8(Gj.doc,AW(Gp.line+1,0)))}}Gj.setSelection(Gr.anchor,Gr.head);Gj.focus();FQ(Go)}Gn()});B(Gh.scroller,"touchcancel",Gn);B(Gh.scroller,"scroll",function(){if(Gh.scroller.clientHeight){Dg(Gj,Gh.scroller.scrollTop);Bg(Gj,Gh.scroller.scrollLeft,true);BA(Gj,"scroll",Gj)}});B(Gh.scroller,"mousewheel",function(Go){F9(Gj,Go)});B(Gh.scroller,"DOMMouseScroll",function(Go){F9(Gj,Go)});B(Gh.wrapper,"scroll",function(){Gh.wrapper.scrollTop=Gh.wrapper.scrollLeft=0});Gh.dragFunctions={simple:function(Go){if(!F6(Gj,Go)){DF(Go)}},start:function(Go){Bv(Gj,Go)},drop:BQ(Gj,CX)};var Gi=Gh.input.getField();B(Gi,"keyup",function(Go){FB.call(Gj,Go)});B(Gi,"keydown",BQ(Gj,Cv));B(Gi,"keypress",BQ(Gj,Eu));B(Gi,"focus",Cx(DM,Gj));B(Gi,"blur",Cx(Z,Gj))}function AN(Gl,Gk,Gi){var Gg=Gi&&Gi!=Da.Init;if(!Gk!=!Gg){var Gh=Gl.display.dragFunctions;var Gj=Gk?B:Aq;Gj(Gl.display.scroller,"dragstart",Gh.start);Gj(Gl.display.scroller,"dragenter",Gh.simple);Gj(Gl.display.scroller,"dragover",Gh.simple);Gj(Gl.display.scroller,"drop",Gh.drop)}}function Br(Gh){var Gg=Gh.display;if(Gg.lastWrapHeight==Gg.wrapper.clientHeight&&Gg.lastWrapWidth==Gg.wrapper.clientWidth){return}Gg.cachedCharWidth=Gg.cachedTextHeight=Gg.cachedPaddingH=null;Gg.scrollbarsClipped=false;Gh.setSize()}function AM(Gi,Gg){for(var Gh=Cd(Gg);Gh!=Gi.wrapper;Gh=Gh.parentNode){if(!Gh||(Gh.nodeType==1&&Gh.getAttribute("cm-ignore-events")=="true")||(Gh.parentNode==Gi.sizer&&Gh!=Gi.mover)){return true}}}function DR(Gl,Gg,Gj,Gh){var Go=Gl.display;if(!Gj&&Cd(Gg).getAttribute("cm-not-content")=="true"){return null}var Gm,Gn,Gk=Go.lineSpace.getBoundingClientRect();try{Gm=Gg.clientX-Gk.left;Gn=Gg.clientY-Gk.top}catch(Gg){return null}var Gp=Ao(Gl,Gm,Gn),Gi;if(Gh&&Gp.xRel==1&&(Gi=Df(Gl.doc,Gp.line).text).length==Gp.ch){var Gq=h(Gi,Gi.length,Gl.options.tabSize)-Gi.length;Gp=AW(Gp.line,Math.max(0,Math.round((Gm-g(Gl.display).left)/Dd(Gl.display))-Gq))}return Gp}function Er(Gg){var Gi=this,Gh=Gi.display;if(Gh.activeTouch&&Gh.input.supportsTouch()||F6(Gi,Gg)){return}Gh.shift=Gg.shiftKey;if(AM(Gh,Gg)){if(!AB){Gh.scroller.draggable=false;setTimeout(function(){Gh.scroller.draggable=true},100)}return}if(C7(Gi,Gg)){return}var Gj=DR(Gi,Gg);window.focus();switch(A8(Gg)){case 1:if(Gj){EE(Gi,Gg,Gj)}else{if(Cd(Gg)==Gh.scroller){FQ(Gg)}}break;case 2:if(AB){Gi.state.lastMiddleDown=+new Date}if(Gj){Gc(Gi.doc,Gj)}setTimeout(function(){Gh.input.focus()},20);FQ(Gg);break;case 3:if(DY){CC(Gi,Gg)}else{DQ(Gi)}break}}var CV,C1;function EE(Gj,Gg,Gh){if(Au){setTimeout(Cx(CA,Gj),0)}else{Gj.curOp.focus=Db()}var Gn=+new Date,Gm;if(C1&&C1.time>Gn-400&&BP(C1.pos,Gh)==0){Gm="triple"}else{if(CV&&CV.time>Gn-400&&BP(CV.pos,Gh)==0){Gm="double";C1={time:Gn,pos:Gh}}else{Gm="single";CV={time:Gn,pos:Gh}}}var Gl=Gj.doc.sel,Gi=FZ?Gg.metaKey:Gg.ctrlKey,Gk;if(Gj.options.dragDrop&&AA&&!EM(Gj)&&Gm=="single"&&(Gk=Gl.contains(Gh))>-1&&(BP((Gk=Gl.ranges[Gk]).from(),Gh)<0||Gh.xRel>0)&&(BP(Gk.to(),Gh)>0||Gh.xRel<0)){A1(Gj,Gg,Gh,Gi)}else{EU(Gj,Gg,Gh,Gm,Gi)}}function A1(Gl,Gh,Gm,Gi){var Gj=Gl.display,Gk=+new Date;var Gg=BQ(Gl,function(Gn){if(AB){Gj.scroller.draggable=false}Gl.state.draggingText=false;Aq(document,"mouseup",Gg);Aq(Gj.scroller,"drop",Gg);if(Math.abs(Gh.clientX-Gn.clientX)+Math.abs(Gh.clientY-Gn.clientY)<10){FQ(Gn);if(!Gi&&+new Date-200<Gk){Gc(Gl.doc,Gm)}if(AB||Au&&D5==9){setTimeout(function(){document.body.focus();Gj.input.focus()},20)}else{Gj.input.focus()}}});if(AB){Gj.scroller.draggable=true}Gl.state.draggingText=Gg;if(Gj.scroller.dragDrop){Gj.scroller.dragDrop()}B(document,"mouseup",Gg);B(Gj.scroller,"drop",Gg)}function EU(Gs,Gn,GA,Gg,Gp){var Gt=Gs.display,Gq=Gs.doc;FQ(Gn);var Gv,Gu,Gr=Gq.sel,Gz=Gr.ranges;if(Gp&&!Gn.shiftKey){Gu=Gq.sel.contains(GA);if(Gu>-1){Gv=Gz[Gu]}else{Gv=new A(GA,GA)}}else{Gv=Gq.sel.primary();Gu=Gq.sel.primIndex}if(Gn.altKey){Gg="rect";if(!Gp){Gv=new A(GA,GA)}GA=DR(Gs,Gn,true,true);Gu=-1}else{if(Gg=="double"){var Gj=Gs.findWordAt(GA);if(Gs.display.shift||Gq.extend){Gv=AQ(Gq,Gv,Gj.anchor,Gj.head)}else{Gv=Gj}}else{if(Gg=="triple"){var Gh=new A(AW(GA.line,0),F8(Gq,AW(GA.line+1,0)));if(Gs.display.shift||Gq.extend){Gv=AQ(Gq,Gv,Gh.anchor,Gh.head)}else{Gv=Gh}}else{Gv=AQ(Gq,Gv,GA)}}}if(!Gp){Gu=0;Cz(Gq,new CW([Gv],0),C4);Gr=Gq.sel}else{if(Gu==-1){Gu=Gz.length;Cz(Gq,BL(Gz.concat([Gv]),Gu),{scroll:false,origin:"*mouse"})}else{if(Gz.length>1&&Gz[Gu].empty()&&Gg=="single"&&!Gn.shiftKey){Cz(Gq,BL(Gz.slice(0,Gu).concat(Gz.slice(Gu+1)),0));Gr=Gq.sel}else{E1(Gq,Gu,Gv,C4)}}}var Gw=GA;function Go(GK){if(BP(Gw,GK)==0){return}Gw=GK;if(Gg=="rect"){var GF=[],GM=Gs.options.tabSize;var GG=h(Df(Gq,GA.line).text,GA.ch,GM);var GH=h(Df(Gq,GK.line).text,GK.ch,GM);var GI=Math.min(GG,GH),GD=Math.max(GG,GH);for(var GC=Math.min(GA.line,GK.line),GP=Math.min(Gs.lastLine(),Math.max(GA.line,GK.line));GC<=GP;GC++){var GJ=Df(Gq,GC).text,GB=AU(GJ,GI,GM);if(GI==GD){GF.push(new A(AW(GC,GB),AW(GC,GB)))}else{if(GJ.length>GB){GF.push(new A(AW(GC,GB),AW(GC,AU(GJ,GD,GM))))}}}if(!GF.length){GF.push(new A(GA,GA))}Cz(Gq,BL(Gr.ranges.slice(0,Gu).concat(GF),Gu),{origin:"*mouse",scroll:false});Gs.scrollIntoView(GK)}else{var GO=Gv;var GL=GO.anchor,GE=GK;if(Gg!="single"){if(Gg=="double"){var GN=Gs.findWordAt(GK)}else{var GN=new A(AW(GK.line,0),F8(Gq,AW(GK.line+1,0)))}if(BP(GN.anchor,GL)>0){GE=GN.head;GL=EA(GO.from(),GN.anchor)}else{GE=GN.anchor;GL=Dp(GO.to(),GN.head)}}var GF=Gr.ranges.slice(0);GF[Gu]=new A(F8(Gq,GL),GE);Cz(Gq,BL(GF,Gu),C4)}}var Gy=Gt.wrapper.getBoundingClientRect();var Gm=0;function Gk(GD){var GF=++Gm;var GB=DR(Gs,GD,true,Gg=="rect");if(!GB){return}if(BP(GB,Gw)!=0){Gs.curOp.focus=Db();Go(GB);var GE=t(Gt,Gq);if(GB.line>=GE.to||GB.line<GE.from){setTimeout(BQ(Gs,function(){if(Gm==GF){Gk(GD)}}),150)}}else{var GC=GD.clientY<Gy.top?-20:GD.clientY>Gy.bottom?20:0;if(GC){setTimeout(BQ(Gs,function(){if(Gm!=GF){return}Gt.scroller.scrollTop+=GC;Gk(GD)}),50)}}}function Gi(GB){Gm=Infinity;FQ(GB);Gt.input.focus();Aq(document,"mousemove",Gx);Aq(document,"mouseup",Gl);Gq.history.lastSelOrigin=null}var Gx=BQ(Gs,function(GB){if(!A8(GB)){Gi(GB)}else{Gk(GB)}});var Gl=BQ(Gs,Gi);B(document,"mousemove",Gx);B(document,"mouseup",Gl)}function EP(Gk,Gg,Gr,Gq,Gn){try{var Gj=Gg.clientX,Gl=Gg.clientY}catch(Gg){return false}if(Gj>=Math.floor(Gk.display.gutters.getBoundingClientRect().right)){return false}if(Gq){FQ(Gg)}var Gm=Gk.display;var Gi=Gm.lineDiv.getBoundingClientRect();if(Gl>Gi.bottom||!AK(Gk,Gr)){return Dx(Gg)}Gl-=Gi.top-Gm.viewOffset;for(var Go=0;Go<Gk.options.gutters.length;++Go){var Gs=Gm.gutters.childNodes[Go];if(Gs&&Gs.getBoundingClientRect().right>=Gj){var Gh=FF(Gk.doc,Gl);var Gp=Gk.options.gutters[Go];Gn(Gk,Gr,Gk,Gh,Gp,Gg);return Dx(Gg)}}}function C7(Gh,Gg){return EP(Gh,Gg,"gutterClick",true,U)}var Fo=0;function CX(Gg){var Gj=this;if(F6(Gj,Gg)||AM(Gj.display,Gg)){return}FQ(Gg);if(Au){Fo=+new Date}var Gn=DR(Gj,Gg,true),Gi=Gg.dataTransfer.files;if(!Gn||EM(Gj)){return}if(Gi&&Gi.length&&window.FileReader&&window.File){var Gl=Gi.length,Gm=Array(Gl),Gh=0;var Gp=function(Gs,Gq){var Gr=new FileReader;Gr.onload=BQ(Gj,function(){Gm[Gq]=Gr.result;if(++Gh==Gl){Gn=F8(Gj.doc,Gn);var Gt={from:Gn,to:Gn,text:Gj.doc.splitLines(Gm.join(Gj.doc.lineSeparator())),origin:"paste"};EB(Gj.doc,Gt);Dk(Gj.doc,Ff(Gn,Fa(Gt)))}});Gr.readAsText(Gs)};for(var Gk=0;Gk<Gl;++Gk){Gp(Gi[Gk],Gk)}}else{if(Gj.state.draggingText&&Gj.doc.sel.contains(Gn)>-1){Gj.state.draggingText(Gg);setTimeout(function(){Gj.display.input.focus()},20);return}try{var Gm=Gg.dataTransfer.getData("Text");if(Gm){if(Gj.state.draggingText&&!(FZ?Gg.altKey:Gg.ctrlKey)){var Go=Gj.listSelections()}C0(Gj.doc,Ff(Gn,Gn));if(Go){for(var Gk=0;Gk<Go.length;++Gk){E2(Gj.doc,"",Go[Gk].anchor,Go[Gk].head,"drag")}}Gj.replaceSelection(Gm,"around","paste");Gj.display.input.focus()}}catch(Gg){}}}function Bv(Gi,Gg){if(Au&&(!Gi.state.draggingText||+new Date-Fo<100)){DF(Gg);return}if(F6(Gi,Gg)||AM(Gi.display,Gg)){return}Gg.dataTransfer.setData("Text",Gi.getSelection());if(Gg.dataTransfer.setDragImage&&!Gf){var Gh=Bf("img",null,null,"position: fixed; left: 0; top: 0;");Gh.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(Fr){Gh.width=Gh.height=1;Gi.display.wrapper.appendChild(Gh);Gh._top=Gh.offsetTop}Gg.dataTransfer.setDragImage(Gh,0,0);if(Fr){Gh.parentNode.removeChild(Gh)}}}function Dg(Gh,Gg){if(Math.abs(Gh.doc.scrollTop-Gg)<2){return}Gh.doc.scrollTop=Gg;if(!FR){E9(Gh,{top:Gg})}if(Gh.display.scroller.scrollTop!=Gg){Gh.display.scroller.scrollTop=Gg}Gh.display.scrollbars.setScrollTop(Gg);if(FR){E9(Gh)}CD(Gh,100)}function Bg(Gi,Gh,Gg){if(Gg?Gh==Gi.doc.scrollLeft:Math.abs(Gi.doc.scrollLeft-Gh)<2){return}Gh=Math.min(Gh,Gi.display.scroller.scrollWidth-Gi.display.scroller.clientWidth);Gi.doc.scrollLeft=Gh;Ex(Gi);if(Gi.display.scroller.scrollLeft!=Gh){Gi.display.scroller.scrollLeft=Gh}Gi.display.scrollbars.setScrollLeft(Gh)}var Ek=0,ET=null;if(Au){ET=-0.53}else{if(FR){ET=15}else{if(B0){ET=-0.7}else{if(Gf){ET=-1/3}}}}var Eg=function(Gg){var Gh=Gg.wheelDeltaX,Gi=Gg.wheelDeltaY;if(Gh==null&&Gg.detail&&Gg.axis==Gg.HORIZONTAL_AXIS){Gh=Gg.detail}if(Gi==null&&Gg.detail&&Gg.axis==Gg.VERTICAL_AXIS){Gi=Gg.detail}else{if(Gi==null){Gi=Gg.wheelDelta}}return{x:Gh,y:Gi}};Da.wheelEventPixels=function(Gh){var Gg=Eg(Gh);Gg.x*=ET;Gg.y*=ET;return Gg};function F9(Gj,Gg){var Gq=Eg(Gg),Gp=Gq.x,Gm=Gq.y;var Gr=Gj.display,Go=Gr.scroller;if(!(Gp&&Go.scrollWidth>Go.clientWidth||Gm&&Go.scrollHeight>Go.clientHeight)){return}if(Gm&&FZ&&AB){outer:for(var Gh=Gg.target,Gl=Gr.view;Gh!=Go;Gh=Gh.parentNode){for(var Gn=0;Gn<Gl.length;Gn++){if(Gl[Gn].node==Gh){Gj.display.currentWheelTarget=Gh;break outer}}}}if(Gp&&!FR&&!Fr&&ET!=null){if(Gm){Dg(Gj,Math.max(0,Math.min(Go.scrollTop+Gm*ET,Go.scrollHeight-Go.clientHeight)))}Bg(Gj,Math.max(0,Math.min(Go.scrollLeft+Gp*ET,Go.scrollWidth-Go.clientWidth)));FQ(Gg);Gr.wheelStartX=null;return}if(Gm&&ET!=null){var Gi=Gm*ET;var Gk=Gj.doc.scrollTop,Gs=Gk+Gr.wrapper.clientHeight;if(Gi<0){Gk=Math.max(0,Gk+Gi-50)}else{Gs=Math.min(Gj.doc.height,Gs+Gi+50)}E9(Gj,{top:Gk,bottom:Gs})}if(Ek<20){if(Gr.wheelStartX==null){Gr.wheelStartX=Go.scrollLeft;Gr.wheelStartY=Go.scrollTop;Gr.wheelDX=Gp;Gr.wheelDY=Gm;setTimeout(function(){if(Gr.wheelStartX==null){return}var Gu=Go.scrollLeft-Gr.wheelStartX;var Gt=Go.scrollTop-Gr.wheelStartY;var Gv=(Gt&&Gr.wheelDY&&Gt/Gr.wheelDY)||(Gu&&Gr.wheelDX&&Gu/Gr.wheelDX);Gr.wheelStartX=Gr.wheelStartY=null;if(!Gv){return}ET=(ET*Ek+Gv)/(Ek+1);++Ek},200)}else{Gr.wheelDX+=Gp;Gr.wheelDY+=Gm}}}function CH(Gk,Gh,Gg){if(typeof Gh=="string"){Gh=AV[Gh];if(!Gh){return false}}Gk.display.input.ensurePolled();var Gj=Gk.display.shift,Gi=false;try{if(EM(Gk)){Gk.state.suppressEdits=true}if(Gg){Gk.display.shift=false}Gi=Gh(Gk)!=Ca}finally{Gk.display.shift=Gj;Gk.state.suppressEdits=false}return Gi}function Ak(Gk,Gj,Gg){for(var Gh=0;Gh<Gk.state.keyMaps.length;Gh++){var Gi=CL(Gj,Gk.state.keyMaps[Gh],Gg,Gk);if(Gi){return Gi}}return(Gk.options.extraKeys&&CL(Gj,Gk.options.extraKeys,Gg,Gk))||CL(Gj,Gk.options.keyMap,Gg,Gk)}var Bc=new Fg;function Ei(Gl,Gj,Gh,Gg){var Gi=Gl.state.keySeq;if(Gi){if(Y(Gj)){return"handled"}Bc.set(50,function(){if(Gl.state.keySeq==Gi){Gl.state.keySeq=null;Gl.display.input.reset()}});Gj=Gi+" "+Gj}var Gk=Ak(Gl,Gj,Gg);if(Gk=="multi"){Gl.state.keySeq=Gj}if(Gk=="handled"){U(Gl,"keyHandled",Gl,Gj,Gh)}if(Gk=="handled"||Gk=="multi"){FQ(Gh);EC(Gl)}if(Gi&&!Gk&&/\'$/.test(Gj)){FQ(Gh);return true}return !!Gk}function AY(Gi,Gg){var Gh=Fu(Gg,true);if(!Gh){return false}if(Gg.shiftKey&&!Gi.state.keySeq){return Ei(Gi,"Shift-"+Gh,Gg,function(Gj){return CH(Gi,Gj,true)})||Ei(Gi,Gh,Gg,function(Gj){if(typeof Gj=="string"?/^go[A-Z]/.test(Gj):Gj.motion){return CH(Gi,Gj)}})}else{return Ei(Gi,Gh,Gg,function(Gj){return CH(Gi,Gj)})}}function DX(Gi,Gg,Gh){return Ei(Gi,"'"+Gh+"'",Gg,function(Gj){return CH(Gi,Gj,true)})}var Dm=null;function Cv(Gh){var Gj=this;Gj.curOp.focus=Db();if(F6(Gj,Gh)){return}if(Au&&D5<11&&Gh.keyCode==27){Gh.returnValue=false}var Gi=Gh.keyCode;Gj.display.shift=Gi==16||Gh.shiftKey;var Gg=AY(Gj,Gh);if(Fr){Dm=Gg?Gi:null;if(!Gg&&Gi==88&&!Av&&(FZ?Gh.metaKey:Gh.ctrlKey)){Gj.replaceSelection("",null,"cut")}}if(Gi==18&&!/\bCodeMirror-crosshair\b/.test(Gj.display.lineDiv.className)){Fl(Gj)}}function Fl(Gh){var Gg=Gh.display.lineDiv;FC(Gg,"CodeMirror-crosshair");function Gi(Gj){if(Gj.keyCode==18||!Gj.altKey){Fw(Gg,"CodeMirror-crosshair");Aq(document,"keyup",Gi);Aq(document,"mouseover",Gi)}}B(document,"keyup",Gi);B(document,"mouseover",Gi)}function FB(Gg){if(Gg.keyCode==16){this.doc.sel.shift=false}F6(this,Gg)}function Eu(Gg){var Gk=this;if(AM(Gk.display,Gg)||F6(Gk,Gg)||Gg.ctrlKey&&!Gg.altKey||FZ&&Gg.metaKey){return}var Gh=Gg.keyCode,Gj=Gg.charCode;if(Fr&&Gh==Dm){Dm=null;FQ(Gg);return}if((Fr&&(!Gg.which||Gg.which<10))&&AY(Gk,Gg)){return}var Gi=String.fromCharCode(Gj==null?Gh:Gj);if(DX(Gk,Gg,Gi)){return}Gk.display.input.onKeyPress(Gg)}function DQ(Gg){Gg.state.delayingBlurEvent=true;setTimeout(function(){if(Gg.state.delayingBlurEvent){Gg.state.delayingBlurEvent=false;Z(Gg)}},100)}function DM(Gg){if(Gg.state.delayingBlurEvent){Gg.state.delayingBlurEvent=false}if(Gg.options.readOnly=="nocursor"){return}if(!Gg.state.focused){BA(Gg,"focus",Gg);Gg.state.focused=true;FC(Gg.display.wrapper,"CodeMirror-focused");if(!Gg.curOp&&Gg.display.selForContextMenu!=Gg.doc.sel){Gg.display.input.reset();if(AB){setTimeout(function(){Gg.display.input.reset(true)},20)}}Gg.display.input.receivedFocus()}EC(Gg)}function Z(Gg){if(Gg.state.delayingBlurEvent){return}if(Gg.state.focused){BA(Gg,"blur",Gg);Gg.state.focused=false;Fw(Gg.display.wrapper,"CodeMirror-focused")}clearInterval(Gg.display.blinker);setTimeout(function(){if(!Gg.state.focused){Gg.display.shift=false}},150)}function CC(Gh,Gg){if(AM(Gh.display,Gg)||a(Gh,Gg)){return}Gh.display.input.onContextMenu(Gg)}function a(Gh,Gg){if(!AK(Gh,"gutterContextMenu")){return false}return EP(Gh,Gg,"gutterContextMenu",false,BA)}var Fa=Da.changeEnd=function(Gg){if(!Gg.text){return Gg.to}return AW(Gg.from.line+Gg.text.length-1,Am(Gg.text).length+(Gg.text.length==1?Gg.from.ch:0))};function CB(Gh,Gg){if(BP(Gh,Gg.from)<0){return Gh}if(BP(Gh,Gg.to)<=0){return Fa(Gg)}var Gj=Gh.line+Gg.text.length-(Gg.to.line-Gg.from.line)-1,Gi=Gh.ch;if(Gh.line==Gg.to.line){Gi+=Fa(Gg).ch-Gg.to.ch}return AW(Gj,Gi)}function j(Gk,Gh){var Gi=[];for(var Gg=0;Gg<Gk.sel.ranges.length;Gg++){var Gj=Gk.sel.ranges[Gg];Gi.push(new A(CB(Gj.anchor,Gh),CB(Gj.head,Gh)))}return BL(Gi,Gk.sel.primIndex)}function BO(Gi,Gh,Gg){if(Gi.line==Gh.line){return AW(Gg.line,Gi.ch-Gh.ch+Gg.ch)}else{return AW(Gg.line+(Gi.line-Gh.line),Gi.ch)}}function Dy(Gm,Gr,Gq){var Gg=[];var Gi=AW(Gm.first,0),Gl=Gi;for(var Gk=0;Gk<Gr.length;Gk++){var Gn=Gr[Gk];var Gp=BO(Gn.from,Gi,Gl);var Gh=BO(Fa(Gn),Gi,Gl);Gi=Gn.to;Gl=Gh;if(Gq=="around"){var Go=Gm.sel.ranges[Gk],Gj=BP(Go.head,Go.anchor)<0;Gg[Gk]=new A(Gj?Gh:Gp,Gj?Gp:Gh)}else{Gg[Gk]=new A(Gp,Gp)}}return new CW(Gg,Gm.sel.primIndex)}function B8(Gj,Gh,Gg){var Gi={canceled:false,from:Gh.from,to:Gh.to,text:Gh.text,origin:Gh.origin,cancel:function(){this.canceled=true}};if(Gg){Gi.update=function(Gk,Gl,Gm,Gn){if(Gk){this.from=F8(Gj,Gk)}if(Gl){this.to=F8(Gj,Gl)}if(Gm){this.text=Gm}if(Gn!==undefined){this.origin=Gn}}}BA(Gj,"beforeChange",Gj,Gi);if(Gj.cm){BA(Gj.cm,"beforeChange",Gj.cm,Gi)}if(Gi.canceled){return null}return{from:Gi.from,to:Gi.to,text:Gi.text,origin:Gi.origin}}function EB(Gk,Gh,Gg){if(Gk.cm){if(!Gk.cm.curOp){return BQ(Gk.cm,EB)(Gk,Gh,Gg)}if(Gk.cm.state.suppressEdits){return}}if(AK(Gk,"beforeChange")||Gk.cm&&AK(Gk.cm,"beforeChange")){Gh=B8(Gk,Gh,true);if(!Gh){return}}var Gj=Fy&&!Gg&&Fv(Gk,Gh.from,Gh.to);if(Gj){for(var Gi=Gj.length-1;Gi>=0;--Gi){D0(Gk,{from:Gj[Gi].from,to:Gj[Gi].to,text:Gi?[""]:Gh.text})}}else{D0(Gk,Gh)}}function D0(Gj,Gg){if(Gg.text.length==1&&Gg.text[0]==""&&BP(Gg.from,Gg.to)==0){return}var Gh=j(Gj,Gg);Ej(Gj,Gg,Gh,Gj.cm?Gj.cm.curOp.id:NaN);p(Gj,Gg,Gh,Ch(Gj,Gg));var Gi=[];Ga(Gj,function(Gl,Gk){if(!Gk&&DG(Gi,Gl.history)==-1){An(Gl.history,Gg);Gi.push(Gl.history)}p(Gl,Gg,null,Ch(Gl,Gg))})}function DV(Gn,Gr,Gg){if(Gn.cm&&Gn.cm.state.suppressEdits){return}var Gk=Gn.history,Gj,Gh=Gn.sel;var Go=Gr=="undo"?Gk.done:Gk.undone,Gq=Gr=="undo"?Gk.undone:Gk.done;for(var Gl=0;Gl<Go.length;Gl++){Gj=Go[Gl];if(Gg?Gj.ranges&&!Gj.equals(Gn.sel):!Gj.ranges){break}}if(Gl==Go.length){return}Gk.lastOrigin=Gk.lastSelOrigin=null;for(;;){Gj=Go.pop();if(Gj.ranges){Aj(Gj,Gq);if(Gg&&!Gj.equals(Gn.sel)){Cz(Gn,Gj,{clearRedo:false});return}Gh=Gj}else{break}}var Gt=[];Aj(Gh,Gq);Gq.push({changes:Gt,generation:Gk.generation});Gk.generation=Gj.generation||++Gk.maxGeneration;var Gi=AK(Gn,"beforeChange")||Gn.cm&&AK(Gn.cm,"beforeChange");for(var Gl=Gj.changes.length-1;Gl>=0;--Gl){var Gp=Gj.changes[Gl];Gp.origin=Gr;if(Gi&&!B8(Gn,Gp,false)){Go.length=0;return}Gt.push(BK(Gn,Gp));var Gs=Gl?j(Gn,Gp):Am(Go);p(Gn,Gp,Gs,BE(Gn,Gp));if(!Gl&&Gn.cm){Gn.cm.scrollIntoView({from:Gp.from,to:Fa(Gp)})}var Gm=[];Ga(Gn,function(Gv,Gu){if(!Gu&&DG(Gm,Gv.history)==-1){An(Gv.history,Gp);Gm.push(Gv.history)}p(Gv,Gp,null,BE(Gv,Gp))})}}function Ae(Gj,Gi){if(Gi==0){return}Gj.first+=Gi;Gj.sel=new CW(FT(Gj.sel.ranges,function(Gk){return new A(AW(Gk.anchor.line+Gi,Gk.anchor.ch),AW(Gk.head.line+Gi,Gk.head.ch))}),Gj.sel.primIndex);if(Gj.cm){DA(Gj.cm,Gj.first,Gj.first-Gi,Gi);for(var Gg=Gj.cm.display,Gh=Gg.viewFrom;Gh<Gg.viewTo;Gh++){BZ(Gj.cm,Gh,"gutter")}}}function p(Gl,Gg,Gi,Gj){if(Gl.cm&&!Gl.cm.curOp){return BQ(Gl.cm,p)(Gl,Gg,Gi,Gj)}if(Gg.to.line<Gl.first){Ae(Gl,Gg.text.length-1-(Gg.to.line-Gg.from.line));return}if(Gg.from.line>Gl.lastLine()){return}if(Gg.from.line<Gl.first){var Gh=Gg.text.length-1-(Gl.first-Gg.from.line);Ae(Gl,Gh);Gg={from:AW(Gl.first,0),to:AW(Gg.to.line+Gh,Gg.to.ch),text:[Am(Gg.text)],origin:Gg.origin}}var Gk=Gl.lastLine();if(Gg.to.line>Gk){Gg={from:Gg.from,to:AW(Gk,Df(Gl,Gk).text.length),text:[Gg.text[0]],origin:Gg.origin}}Gg.removed=Cq(Gl,Gg.from,Gg.to);if(!Gi){Gi=j(Gl,Gg)}if(Gl.cm){Bt(Gl.cm,Gg,Gj)}else{H(Gl,Gg,Gj)}C0(Gl,Gi,BI)}function Bt(Gj,Gp,Gi){var Gn=Gj.doc,Gq=Gj.display,Gh=Gp.from,Gs=Gp.to;var Gk=false,Gl=Gh.line;if(!Gj.options.lineWrapping){Gl=E5(Fm(Df(Gn,Gh.line)));Gn.iter(Gl,Gs.line+1,function(Gt){if(Gt==Gq.maxLine){Gk=true;return true}})}if(Gn.sel.contains(Gp.from,Gp.to)>-1){DB(Gj)}H(Gn,Gp,Gi,AL(Gj));if(!Gj.options.lineWrapping){Gn.iter(Gl,Gh.line+Gp.text.length,function(Gu){var Gt=BM(Gu);if(Gt>Gq.maxLineLength){Gq.maxLine=Gu;Gq.maxLineLength=Gt;Gq.maxLineChanged=true;Gk=false}});if(Gk){Gj.curOp.updateMaxLine=true}}Gn.frontier=Math.min(Gn.frontier,Gh.line);CD(Gj,400);var Go=Gp.text.length-(Gs.line-Gh.line)-1;if(Gp.full){DA(Gj)}else{if(Gh.line==Gs.line&&Gp.text.length==1&&!Bz(Gj.doc,Gp)){BZ(Gj,Gh.line,"text")}else{DA(Gj,Gh.line,Gs.line+1,Go)}}var Gm=AK(Gj,"changes"),Gg=AK(Gj,"change");if(Gg||Gm){var Gr={from:Gh,to:Gs,text:Gp.text,removed:Gp.removed,origin:Gp.origin};if(Gg){U(Gj,"change",Gj,Gr)}if(Gm){(Gj.curOp.changeObjs||(Gj.curOp.changeObjs=[])).push(Gr)}}Gj.display.selForContextMenu=null}function E2(Gl,Gi,Gh,Gj,Gk){if(!Gj){Gj=Gh}if(BP(Gj,Gh)<0){var Gg=Gj;Gj=Gh;Gh=Gg}if(typeof Gi=="string"){Gi=Gl.splitLines(Gi)}EB(Gl,{from:Gh,to:Gj,text:Gi,origin:Gk})}function DC(Gl,Gh){if(F6(Gl,"scrollCursorIntoView")){return}var Gi=Gl.display,Gj=Gi.sizer.getBoundingClientRect(),Gk=null;if(Gh.top+Gj.top<0){Gk=true}else{if(Gh.bottom+Gj.top>(window.innerHeight||document.documentElement.clientHeight)){Gk=false}}if(Gk!=null&&!R){var Gg=Bf("div","\u200b",null,"position: absolute; top: "+(Gh.top-Gi.viewOffset-S(Gl.display))+"px; height: "+(Gh.bottom-Gh.top+q(Gl)+Gi.barHeight)+"px; left: "+Gh.left+"px; width: 2px;");Gl.display.lineSpace.appendChild(Gg);Gg.scrollIntoView(Gk);Gl.display.lineSpace.removeChild(Gg)}}function Dz(Gk,Gm,Gj,Gg){if(Gg==null){Gg=0}for(var Gh=0;Gh<5;Gh++){var Gq=false,Gn=b(Gk,Gm);var Gl=!Gj||Gj==Gm?Gn:b(Gk,Gj);var Gi=FM(Gk,Math.min(Gn.left,Gl.left),Math.min(Gn.top,Gl.top)-Gg,Math.max(Gn.left,Gl.left),Math.max(Gn.bottom,Gl.bottom)+Gg);var Go=Gk.doc.scrollTop,Gp=Gk.doc.scrollLeft;if(Gi.scrollTop!=null){Dg(Gk,Gi.scrollTop);if(Math.abs(Gk.doc.scrollTop-Go)>1){Gq=true}}if(Gi.scrollLeft!=null){Bg(Gk,Gi.scrollLeft);if(Math.abs(Gk.doc.scrollLeft-Gp)>1){Gq=true}}if(!Gq){break}}return Gn}function BT(Gl,Gk,Gj,Gg,Gh){var Gi=FM(Gl,Gk,Gj,Gg,Gh);if(Gi.scrollTop!=null){Dg(Gl,Gi.scrollTop)}if(Gi.scrollLeft!=null){Bg(Gl,Gi.scrollLeft)}}function FM(Gp,Gr,Gs,Gv,Gw){var Gq=Gp.display,Gm=D8(Gp.display);if(Gs<0){Gs=0}var Gn=Gp.curOp&&Gp.curOp.scrollTop!=null?Gp.curOp.scrollTop:Gq.scroller.scrollTop;var Gh=Bu(Gp),Go={};if(Gw-Gs>Gh){Gw=Gs+Gh}var Gl=Gp.doc.height+Fq(Gq);var Gg=Gs<Gm,Gj=Gw>Gl-Gm;if(Gs<Gn){Go.scrollTop=Gg?0:Gs}else{if(Gw>Gn+Gh){var Gu=Math.min(Gs,(Gj?Gl:Gw)-Gh);if(Gu!=Gn){Go.scrollTop=Gu}}}var Gk=Gp.curOp&&Gp.curOp.scrollLeft!=null?Gp.curOp.scrollLeft:Gq.scroller.scrollLeft;var Gi=CT(Gp)-(Gp.options.fixedGutter?Gq.gutters.offsetWidth:0);var Gt=Gv-Gr>Gi;if(Gt){Gv=Gr+Gi}if(Gr<10){Go.scrollLeft=0}else{if(Gr<Gk){Go.scrollLeft=Math.max(0,Gr-(Gt?0:10))}else{if(Gv>Gi+Gk-3){Go.scrollLeft=Gv+(Gt?0:10)-Gi}}}return Go}function X(Gi,Gg,Gh){if(Gg!=null||Gh!=null){Di(Gi)}if(Gg!=null){Gi.curOp.scrollLeft=(Gi.curOp.scrollLeft==null?Gi.doc.scrollLeft:Gi.curOp.scrollLeft)+Gg}if(Gh!=null){Gi.curOp.scrollTop=(Gi.curOp.scrollTop==null?Gi.doc.scrollTop:Gi.curOp.scrollTop)+Gh}}function F(Gj){Di(Gj);var Gg=Gj.getCursor(),Gh=Gg,Gi=Gg;if(!Gj.options.lineWrapping){Gh=Gg.ch?AW(Gg.line,Gg.ch-1):Gg;Gi=AW(Gg.line,Gg.ch+1)}Gj.curOp.scrollToPos={from:Gh,to:Gi,margin:Gj.options.cursorScrollMargin,isCursor:true}}function Di(Gk){var Gj=Gk.curOp.scrollToPos;if(Gj){Gk.curOp.scrollToPos=null;var Gg=Dl(Gk,Gj.from),Gi=Dl(Gk,Gj.to);var Gh=FM(Gk,Math.min(Gg.left,Gi.left),Math.min(Gg.top,Gi.top)-Gj.margin,Math.max(Gg.right,Gi.right),Math.max(Gg.bottom,Gi.bottom)+Gj.margin);Gk.scrollTo(Gh.scrollLeft,Gh.scrollTop)}}function AI(Gk,Gn,Gu,Gi){var Gp=Gk.doc,Gm;if(Gu==null){Gu="add"}if(Gu=="smart"){if(!Gp.mode.indent){Gu="prev"}else{Gm=EK(Gk,Gn)}}var Gr=Gk.options.tabSize;var Gh=Df(Gp,Gn),Gl=h(Gh.text,null,Gr);if(Gh.stateAfter){Gh.stateAfter=null}var Gq=Gh.text.match(/^\s*/)[0],Gg;if(!Gi&&!/\S/.test(Gh.text)){Gg=0;Gu="not"}else{if(Gu=="smart"){Gg=Gp.mode.indent(Gm,Gh.text.slice(Gq.length),Gh.text);if(Gg==Ca||Gg>150){if(!Gi){return}Gu="prev"}}}if(Gu=="prev"){if(Gn>Gp.first){Gg=h(Df(Gp,Gn-1).text,null,Gr)}else{Gg=0}}else{if(Gu=="add"){Gg=Gl+Gk.options.indentUnit}else{if(Gu=="subtract"){Gg=Gl-Gk.options.indentUnit}else{if(typeof Gu=="number"){Gg=Gl+Gu}}}}Gg=Math.max(0,Gg);var Go="",Gj=0;if(Gk.options.indentWithTabs){for(var Gs=Math.floor(Gg/Gr);Gs;--Gs){Gj+=Gr;Go+="\t"}}if(Gj<Gg){Go+=Cl(Gg-Gj)}if(Go!=Gq){E2(Gp,Go,AW(Gn,0),AW(Gn,Gq.length),"+input");Gh.stateAfter=null;return true}else{for(var Gs=0;Gs<Gp.sel.ranges.length;Gs++){var Gt=Gp.sel.ranges[Gs];if(Gt.head.line==Gn&&Gt.head.ch<Gq.length){var Gj=AW(Gn,Gq.length);E1(Gp,Gs,new A(Gj,Gj));break}}}}function Ba(Gl,Gg,Gk,Gi){var Gh=Gg,Gj=Gg;if(typeof Gg=="number"){Gj=Df(Gl,o(Gl,Gg))}else{Gh=E5(Gg)}if(Gh==null){return null}if(Gi(Gj,Gh)&&Gl.cm){BZ(Gl.cm,Gh,Gk)}return Gj}function FO(Gm,Gl){var Gj=Gm.doc.sel.ranges,Gi=[];for(var Gh=0;Gh<Gj.length;Gh++){var Gg=Gl(Gj[Gh]);while(Gi.length&&BP(Gg.from,Am(Gi).to)<=0){var Gk=Gi.pop();if(BP(Gk.from,Gg.from)<0){Gg.from=Gk.from;break}}Gi.push(Gg)}Cc(Gm,function(){for(var Gn=Gi.length-1;Gn>=0;Gn--){E2(Gm.doc,"",Gi[Gn].from,Gi[Gn].to,"+delete")}F(Gm)})}function C9(Gp,Gx,Gk,Gt,Gy){var Gj=Gx.line,Gm=Gx.ch,Gs=Gk;var Gq=Df(Gp,Gj);var Gv=true;function Gu(){var Gz=Gj+Gk;if(Gz<Gp.first||Gz>=Gp.first+Gp.size){return(Gv=false)}Gj=Gz;return Gq=Df(Gp,Gz)}function Gl(GA){var Gz=(Gy?Fz:Dw)(Gq,Gm,Gk,true);if(Gz==null){if(!GA&&Gu()){if(Gy){Gm=(Gk<0?Bp:Fi)(Gq)}else{Gm=Gk<0?Gq.text.length:0}}else{return(Gv=false)}}else{Gm=Gz}return true}if(Gt=="char"){Gl()}else{if(Gt=="column"){Gl(true)}else{if(Gt=="word"||Gt=="group"){var Gg=null,Gr=Gt=="group";var Go=Gp.cm&&Gp.cm.getHelper(Gx,"wordChars");for(var Gh=true;;Gh=false){if(Gk<0&&!Gl(!Gh)){break}var Gn=Gq.text.charAt(Gm)||"\n";var Gw=EF(Gn,Go)?"w":Gr&&Gn=="\n"?"n":!Gr||/\s/.test(Gn)?null:"p";if(Gr&&!Gh&&!Gw){Gw="s"}if(Gg&&Gg!=Gw){if(Gk<0){Gk=1;Gl()}break}if(Gw){Gg=Gw}if(Gk>0&&!Gl(!Gh)){break}}}}}var Gi=Aw(Gp,AW(Gj,Gm),Gs,true);if(!Gv){Gi.hitSide=true}return Gi}function EQ(Gi,Gh,Gg,Go){var Gj=Gi.doc,Gm=Gh.left,Gn;if(Go=="page"){var Gk=Math.min(Gi.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);Gn=Gh.top+Gg*(Gk-(Gg<0?1.5:0.5)*D8(Gi.display))}else{if(Go=="line"){Gn=Gg>0?Gh.bottom+3:Gh.top-3}}for(;;){var Gl=Ao(Gi,Gm,Gn);if(!Gl.outside){break}if(Gg<0?Gn<=0:Gn>=Gj.height){Gl.hitSide=true;break}Gn+=Gg*5}return Gl}Da.prototype={constructor:Da,focus:function(){window.focus();this.display.input.focus()},setOption:function(Gg,Gj){var Gi=this.options,Gh=Gi[Gg];if(Gi[Gg]==Gj&&Gg!="mode"){return}Gi[Gg]=Gj;if(FX.hasOwnProperty(Gg)){BQ(this,FX[Gg])(this,Gj,Gh)}},getOption:function(Gg){return this.options[Gg]},getDoc:function(){return this.doc},addKeyMap:function(Gg,Gh){this.state.keyMaps[Gh?"push":"unshift"](AE(Gg))},removeKeyMap:function(Gh){var Gi=this.state.keyMaps;for(var Gg=0;Gg<Gi.length;++Gg){if(Gi[Gg]==Gh||Gi[Gg].name==Gh){Gi.splice(Gg,1);return true}}},addOverlay:DW(function(Gi,Gh){var Gg=Gi.token?Gi:Da.getMode(this.options,Gi);if(Gg.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:Gg,modeSpec:Gi,opaque:Gh&&Gh.opaque});this.state.modeGen++;DA(this)}),removeOverlay:DW(function(Gj){var Gi=this.state.overlays;for(var Gh=0;Gh<Gi.length;++Gh){var Gg=Gi[Gh].modeSpec;if(Gg==Gj||typeof Gj=="string"&&Gg.name==Gj){Gi.splice(Gh,1);this.state.modeGen++;DA(this);return}}}),indentLine:DW(function(Gi,Gg,Gh){if(typeof Gg!="string"&&typeof Gg!="number"){if(Gg==null){Gg=this.options.smartIndent?"smart":"prev"}else{Gg=Gg?"add":"subtract"}}if(Fp(this.doc,Gi)){AI(this,Gi,Gg,Gh)}}),indentSelection:DW(function(Gn){var Gl=this.doc.sel.ranges,Gi=-1;for(var Gk=0;Gk<Gl.length;Gk++){var Gm=Gl[Gk];if(!Gm.empty()){var Gg=Gm.from(),Gp=Gm.to();var Gh=Math.max(Gi,Gg.line);Gi=Math.min(this.lastLine(),Gp.line-(Gp.ch?0:1))+1;for(var Gj=Gh;Gj<Gi;++Gj){AI(this,Gj,Gn)}var Go=this.doc.sel.ranges;if(Gg.ch==0&&Gl.length==Go.length&&Go[Gk].from().ch>0){E1(this.doc,Gk,new A(Gg,Go[Gk].to()),BI)}}else{if(Gm.head.line>Gi){AI(this,Gm.head.line,Gn,true);Gi=Gm.head.line;if(Gk==this.doc.sel.primIndex){F(this)}}}}}),getTokenAt:function(Gg,Gh){return Em(this,Gg,Gh)},getLineTokens:function(Gg,Gh){return Em(this,AW(Gg),Gh,true)},getTokenTypeAt:function(Gk){Gk=F8(this.doc,Gk);var Gh=At(this,Df(this.doc,Gk.line));var Gn=0,Gi=(Gh.length-1)/2,Gj=Gk.ch;var Gm;if(Gj==0){Gm=Gh[2]}else{for(;;){var Gl=(Gn+Gi)>>1;if((Gl?Gh[Gl*2-1]:0)>=Gj){Gi=Gl}else{if(Gh[Gl*2+1]<Gj){Gn=Gl+1}else{Gm=Gh[Gl*2+2];break}}}}var Gg=Gm?Gm.indexOf("cm-overlay "):-1;return Gg<0?Gm:Gg==0?null:Gm.slice(0,Gg-1)},getModeAt:function(Gh){var Gg=this.doc.mode;if(!Gg.innerMode){return Gg}return Da.innerMode(Gg,this.getTokenAt(Gh).state).mode},getHelper:function(Gh,Gg){return this.getHelpers(Gh,Gg)[0]},getHelpers:function(Gk,Gn){var Gj=[];if(!A3.hasOwnProperty(Gn)){return Gj}var Gh=A3[Gn],Gl=this.getModeAt(Gk);if(typeof Gl[Gn]=="string"){if(Gh[Gl[Gn]]){Gj.push(Gh[Gl[Gn]])}}else{if(Gl[Gn]){for(var Gm=0;Gm<Gl[Gn].length;Gm++){var Gi=Gh[Gl[Gn][Gm]];if(Gi){Gj.push(Gi)}}}else{if(Gl.helperType&&Gh[Gl.helperType]){Gj.push(Gh[Gl.helperType])}else{if(Gh[Gl.name]){Gj.push(Gh[Gl.name])}}}}for(var Gm=0;Gm<Gh._global.length;Gm++){var Gg=Gh._global[Gm];if(Gg.pred(Gl,this)&&DG(Gj,Gg.val)==-1){Gj.push(Gg.val)}}return Gj},getStateAfter:function(Gg,Gh){var Gi=this.doc;Gg=o(Gi,Gg==null?Gi.first+Gi.size-1:Gg);return EK(this,Gg+1,Gh)},cursorCoords:function(Gi,Gg){var Gh,Gj=this.doc.sel.primary();if(Gi==null){Gh=Gj.head}else{if(typeof Gi=="object"){Gh=F8(this.doc,Gi)}else{Gh=Gi?Gj.from():Gj.to()}}return b(this,Gh,Gg||"page")},charCoords:function(Gh,Gg){return Cj(this,F8(this.doc,Gh),Gg||"page")},coordsChar:function(Gg,Gh){Gg=A6(this,Gg,Gh||"page");return Ao(this,Gg.left,Gg.top)},lineAtHeight:function(Gg,Gh){Gg=A6(this,{top:Gg,left:0},Gh||"page").top;return FF(this.doc,Gg+this.display.viewOffset)},heightAtLine:function(Gj,Gh){var Gi=false,Gg;if(typeof Gj=="number"){var Gk=this.doc.first+this.doc.size-1;if(Gj<this.doc.first){Gj=this.doc.first}else{if(Gj>Gk){Gj=Gk;Gi=true}}Gg=Df(this.doc,Gj)}else{Gg=Gj}return B7(this,Gg,{top:0,left:0},Gh||"page").top+(Gi?this.doc.height-E8(Gg):0)},defaultTextHeight:function(){return D8(this.display)},defaultCharWidth:function(){return Dd(this.display)},setGutterMarker:DW(function(Gi,Gh,Gg){return Ba(this.doc,Gi,"gutter",function(Gk){var Gj=Gk.gutterMarkers||(Gk.gutterMarkers={});Gj[Gh]=Gg;if(!Gg&&C(Gj)){Gk.gutterMarkers=null}return true})}),clearGutter:DW(function(Gh){var Gi=this,Gj=Gi.doc,Gg=Gj.first;Gj.iter(function(Gk){if(Gk.gutterMarkers&&Gk.gutterMarkers[Gh]){Gk.gutterMarkers[Gh]=null;BZ(Gi,Gg,"gutter");if(C(Gk.gutterMarkers)){Gk.gutterMarkers=null}}++Gg})}),lineInfo:function(Gh){if(typeof Gh=="number"){if(!Fp(this.doc,Gh)){return null}var Gg=Gh;Gh=Df(this.doc,Gh);if(!Gh){return null}}else{var Gg=E5(Gh);if(Gg==null){return null}}return{line:Gg,handle:Gh,text:Gh.text,gutterMarkers:Gh.gutterMarkers,textClass:Gh.textClass,bgClass:Gh.bgClass,wrapClass:Gh.wrapClass,widgets:Gh.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(Gl,Gn,Gm,Gk,Gg){var Go=this.display;Gl=b(this,F8(this.doc,Gl));var Gi=Gl.bottom,Gj=Gl.left;Gn.style.position="absolute";Gn.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(Gn);Go.sizer.appendChild(Gn);if(Gk=="over"){Gi=Gl.top}else{if(Gk=="above"||Gk=="near"){var Gp=Math.max(Go.wrapper.clientHeight,this.doc.height),Gh=Math.max(Go.sizer.clientWidth,Go.lineSpace.clientWidth);if((Gk=="above"||Gl.bottom+Gn.offsetHeight>Gp)&&Gl.top>Gn.offsetHeight){Gi=Gl.top-Gn.offsetHeight}else{if(Gl.bottom+Gn.offsetHeight<=Gp){Gi=Gl.bottom}}if(Gj+Gn.offsetWidth>Gh){Gj=Gh-Gn.offsetWidth}}}Gn.style.top=Gi+"px";Gn.style.left=Gn.style.right="";if(Gg=="right"){Gj=Go.sizer.clientWidth-Gn.offsetWidth;Gn.style.right="0px"}else{if(Gg=="left"){Gj=0}else{if(Gg=="middle"){Gj=(Go.sizer.clientWidth-Gn.offsetWidth)/2}}Gn.style.left=Gj+"px"}if(Gm){BT(this,Gj,Gi,Gj+Gn.offsetWidth,Gi+Gn.offsetHeight)}},triggerOnKeyDown:DW(Cv),triggerOnKeyPress:DW(Eu),triggerOnKeyUp:FB,execCommand:function(Gg){if(AV.hasOwnProperty(Gg)){return AV[Gg](this)}},triggerElectric:DW(function(Gg){W(this,Gg)}),findPosH:function(Gh,Gm,Gj,Gl){var Gg=1;if(Gm<0){Gg=-1;Gm=-Gm}for(var Gi=0,Gk=F8(this.doc,Gh);Gi<Gm;++Gi){Gk=C9(this.doc,Gk,Gg,Gj,Gl);if(Gk.hitSide){break}}return Gk},moveH:DW(function(Gg,Gh){var Gi=this;Gi.extendSelectionsBy(function(Gj){if(Gi.display.shift||Gi.doc.extend||Gj.empty()){return C9(Gi.doc,Gj.head,Gg,Gh,Gi.options.rtlMoveVisually)}else{return Gg<0?Gj.from():Gj.to()}},Ac)}),deleteH:DW(function(Gg,Gh){var Gi=this.doc.sel,Gj=this.doc;if(Gi.somethingSelected()){Gj.replaceSelection("",null,"+delete")}else{FO(this,function(Gk){var Gl=C9(Gj,Gk.head,Gg,Gh,false);return Gg<0?{from:Gl,to:Gk.head}:{from:Gk.head,to:Gl}})}}),findPosV:function(Gl,Gj,Go,Gg){var Gi=1,Gm=Gg;if(Gj<0){Gi=-1;Gj=-Gj}for(var Gk=0,Gh=F8(this.doc,Gl);Gk<Gj;++Gk){var Gn=b(this,Gh,"div");if(Gm==null){Gm=Gn.left}else{Gn.left=Gm}Gh=EQ(this,Gn,Gi,Go);if(Gh.hitSide){break}}return Gh},moveV:DW(function(Gg,Gj){var Gl=this,Gm=this.doc,Gk=[];var Gh=!Gl.display.shift&&!Gm.extend&&Gm.sel.somethingSelected();Gm.extendSelectionsBy(function(Go){if(Gh){return Gg<0?Go.from():Go.to()}var Gp=b(Gl,Go.head,"div");if(Go.goalColumn!=null){Gp.left=Go.goalColumn}Gk.push(Gp.left);var Gn=EQ(Gl,Gp,Gg,Gj);if(Gj=="page"&&Go==Gm.sel.primary()){X(Gl,null,Cj(Gl,Gn,"div").top-Gp.top)}return Gn},Ac);if(Gk.length){for(var Gi=0;Gi<Gm.sel.ranges.length;Gi++){Gm.sel.ranges[Gi].goalColumn=Gk[Gi]}}}),findWordAt:function(Gi){var Gl=this.doc,Gg=Df(Gl,Gi.line).text;var Gh=Gi.ch,Gj=Gi.ch;if(Gg){var Gn=this.getHelper(Gi,"wordChars");if((Gi.xRel<0||Gj==Gg.length)&&Gh){--Gh}else{++Gj}var Gm=Gg.charAt(Gh);var Gk=EF(Gm,Gn)?function(Go){return EF(Go,Gn)}:/\s/.test(Gm)?function(Go){return/\s/.test(Go)}:function(Go){return !/\s/.test(Go)&&!EF(Go)};while(Gh>0&&Gk(Gg.charAt(Gh-1))){--Gh}while(Gj<Gg.length&&Gk(Gg.charAt(Gj))){++Gj}}return new A(AW(Gi.line,Gh),AW(Gi.line,Gj))},toggleOverwrite:function(Gg){if(Gg!=null&&Gg==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){FC(this.display.cursorDiv,"CodeMirror-overwrite")}else{Fw(this.display.cursorDiv,"CodeMirror-overwrite")}BA(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Db()},scrollTo:DW(function(Gg,Gh){if(Gg!=null||Gh!=null){Di(this)}if(Gg!=null){this.curOp.scrollLeft=Gg}if(Gh!=null){this.curOp.scrollTop=Gh}}),getScrollInfo:function(){var Gg=this.display.scroller;return{left:Gg.scrollLeft,top:Gg.scrollTop,height:Gg.scrollHeight-q(this)-this.display.barHeight,width:Gg.scrollWidth-q(this)-this.display.barWidth,clientHeight:Bu(this),clientWidth:CT(this)}},scrollIntoView:DW(function(Gi,Gg){if(Gi==null){Gi={from:this.doc.sel.primary().head,to:null};if(Gg==null){Gg=this.options.cursorScrollMargin}}else{if(typeof Gi=="number"){Gi={from:AW(Gi,0),to:null}}else{if(Gi.from==null){Gi={from:Gi,to:null}}}}if(!Gi.to){Gi.to=Gi.from}Gi.margin=Gg||0;if(Gi.from.line!=null){Di(this);this.curOp.scrollToPos=Gi}else{var Gh=FM(this,Math.min(Gi.from.left,Gi.to.left),Math.min(Gi.from.top,Gi.to.top)-Gi.margin,Math.max(Gi.from.right,Gi.to.right),Math.max(Gi.from.bottom,Gi.to.bottom)+Gi.margin);this.scrollTo(Gh.scrollLeft,Gh.scrollTop)}}),setSize:DW(function(Gj,Gg){var Gk=this;function Gi(Gl){return typeof Gl=="number"||/^\d+$/.test(String(Gl))?Gl+"px":Gl}if(Gj!=null){Gk.display.wrapper.style.width=Gi(Gj)}if(Gg!=null){Gk.display.wrapper.style.height=Gi(Gg)}if(Gk.options.lineWrapping){Ec(this)}var Gh=Gk.display.viewFrom;Gk.doc.iter(Gh,Gk.display.viewTo,function(Gm){if(Gm.widgets){for(var Gl=0;Gl<Gm.widgets.length;Gl++){if(Gm.widgets[Gl].noHScroll){BZ(Gk,Gh,"widget");break}}}++Gh});Gk.curOp.forceUpdate=true;BA(Gk,"refresh",this)}),operation:function(Gg){return Cc(this,Gg)},refresh:DW(function(){var Gg=this.display.cachedTextHeight;DA(this);this.curOp.forceUpdate=true;d(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);C2(this);if(Gg==null||Math.abs(Gg-D8(this.display))>0.5){Bm(this)}BA(this,"refresh",this)}),swapDoc:DW(function(Gh){var Gg=this.doc;Gg.cm=null;V(this,Gh);d(this);this.display.input.reset();this.scrollTo(Gh.scrollLeft,Gh.scrollTop);this.curOp.forceScroll=true;U(this,"swapDoc",this,Gg);return Gg}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Ai(Da);var Du=Da.defaults={};var FX=Da.optionHandlers={};function F4(Gj,Gi,Gg,Gh){Da.defaults[Gj]=Gi;if(Gg){FX[Gj]=Gh?function(Gm,Gl,Gk){if(Gk!=DL){Gg(Gm,Gl,Gk)}}:Gg}}var DL=Da.Init={toString:function(){return"CodeMirror.Init"}};F4("value","",function(Gh,Gg){Gh.setValue(Gg)},true);F4("mode",null,function(Gh,Gg){Gh.doc.modeOption=Gg;Fh(Gh)},true);F4("indentUnit",2,Fh,true);F4("indentWithTabs",false);F4("smartIndent",true);F4("tabSize",4,function(Gg){CU(Gg);d(Gg);DA(Gg)},true);F4("lineSeparator",null,function(Gk,Gj){Gk.doc.lineSep=Gj;if(!Gj){return}var Gg=[],Gh=Gk.doc.first;Gk.doc.iter(function(Gm){for(var Gl=0;;){var Gn=Gm.text.indexOf(Gj,Gl);if(Gn==-1){break}Gl=Gn+Gj.length;Gg.push(AW(Gh,Gn))}Gh++});for(var Gi=Gg.length-1;Gi>=0;Gi--){E2(Gk.doc,Gj,Gg[Gi],AW(Gg[Gi].line,Gg[Gi].ch+Gj.length))}});F4("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(Gi,Gh,Gg){Gi.state.specialChars=new RegExp(Gh.source+(Gh.test("\t")?"":"|\t"),"g");if(Gg!=Da.Init){Gi.refresh()}});F4("specialCharPlaceholder",DO,function(Gg){Gg.refresh()},true);F4("electricChars",true);F4("inputStyle",O?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);F4("rtlMoveVisually",!I);F4("wholeLineUpdateBefore",true);F4("theme","default",function(Gg){Cg(Gg);CQ(Gg)},true);F4("keyMap","default",function(Gk,Gj,Gi){var Gh=AE(Gj);var Gg=Gi!=Da.Init&&AE(Gi);if(Gg&&Gg.detach){Gg.detach(Gk,Gh)}if(Gh.attach){Gh.attach(Gk,Gg||null)}});F4("extraKeys",null);F4("lineWrapping",false,Cf,true);F4("gutters",[],function(Gg){s(Gg.options);CQ(Gg)},true);F4("fixedGutter",true,function(Gh,Gg){Gh.display.gutters.style.left=Gg?By(Gh.display)+"px":"0";Gh.refresh()},true);F4("coverGutterNextToScrollbar",false,function(Gg){AP(Gg)},true);F4("scrollbarStyle","native",function(Gg){Bl(Gg);AP(Gg);Gg.display.scrollbars.setScrollTop(Gg.doc.scrollTop);Gg.display.scrollbars.setScrollLeft(Gg.doc.scrollLeft)},true);F4("lineNumbers",false,function(Gg){s(Gg.options);CQ(Gg)},true);F4("firstLineNumber",1,CQ,true);F4("lineNumberFormatter",function(Gg){return Gg},CQ,true);F4("showCursorWhenSelecting",false,B2,true);F4("resetSelectionOnContextMenu",true);F4("lineWiseCopyCut",true);F4("readOnly",false,function(Gh,Gg){if(Gg=="nocursor"){Z(Gh);Gh.display.input.blur();Gh.display.disabled=true}else{Gh.display.disabled=false;if(!Gg){Gh.display.input.reset()}}});F4("disableInput",false,function(Gh,Gg){if(!Gg){Gh.display.input.reset()}},true);F4("dragDrop",true,AN);F4("cursorBlinkRate",530);F4("cursorScrollMargin",0);F4("cursorHeight",1,B2,true);F4("singleCursorHeightPerLine",true,B2,true);F4("workTime",100);F4("workDelay",100);F4("flattenSpans",true,CU,true);F4("addModeClass",false,CU,true);F4("pollInterval",100);F4("undoDepth",200,function(Gh,Gg){Gh.doc.history.undoDepth=Gg});F4("historyEventDelay",1250);F4("viewportMargin",10,function(Gg){Gg.refresh()},true);F4("maxHighlightLength",10000,CU,true);F4("moveInputWithCursor",true,function(Gh,Gg){if(!Gg){Gh.display.input.resetPosition()}});F4("tabindex",null,function(Gh,Gg){Gh.display.input.getField().tabIndex=Gg||""});F4("autofocus",null);var BU=Da.modes={},Bo=Da.mimeModes={};Da.defineMode=function(Gh,Gg){if(!Da.defaults.mode&&Gh!="null"){Da.defaults.mode=Gh}if(arguments.length>2){Gg.dependencies=Array.prototype.slice.call(arguments,2)}BU[Gh]=Gg};Da.defineMIME=function(Gg,Gh){Bo[Gg]=Gh};Da.resolveMode=function(Gg){if(typeof Gg=="string"&&Bo.hasOwnProperty(Gg)){Gg=Bo[Gg]}else{if(Gg&&typeof Gg.name=="string"&&Bo.hasOwnProperty(Gg.name)){var Gh=Bo[Gg.name];if(typeof Gh=="string"){Gh={name:Gh}}Gg=CI(Gh,Gg);Gg.name=Gh.name}else{if(typeof Gg=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(Gg)){return Da.resolveMode("application/xml")}}}if(typeof Gg=="string"){return{name:Gg}}else{return Gg||{name:"null"}}};Da.getMode=function(Gi,Gk){var Gk=Da.resolveMode(Gk);var Gh=BU[Gk.name];if(!Gh){return Da.getMode(Gi,"text/plain")}var Gg=Gh(Gi,Gk);if(B1.hasOwnProperty(Gk.name)){var Gl=B1[Gk.name];for(var Gj in Gl){if(!Gl.hasOwnProperty(Gj)){continue}if(Gg.hasOwnProperty(Gj)){Gg["_"+Gj]=Gg[Gj]}Gg[Gj]=Gl[Gj]}}Gg.name=Gk.name;if(Gk.helperType){Gg.helperType=Gk.helperType}if(Gk.modeProps){for(var Gj in Gk.modeProps){Gg[Gj]=Gk.modeProps[Gj]}}return Gg};Da.defineMode("null",function(){return{token:function(Gg){Gg.skipToEnd()}}});Da.defineMIME("text/plain","null");var B1=Da.modeExtensions={};Da.extendMode=function(Gg,Gh){var Gi=B1.hasOwnProperty(Gg)?B1[Gg]:(B1[Gg]={});CG(Gh,Gi)};Da.defineExtension=function(Gh,Gg){Da.prototype[Gh]=Gg};Da.defineDocExtension=function(Gh,Gg){EZ.prototype[Gh]=Gg};Da.defineOption=F4;var A4=[];Da.defineInitHook=function(Gg){A4.push(Gg)};var A3=Da.helpers={};Da.registerHelper=function(Gg,Gh,Gi){if(!A3.hasOwnProperty(Gg)){A3[Gg]=Da[Gg]={_global:[]}}A3[Gg][Gh]=Gi};Da.registerGlobalHelper=function(Gg,Gi,Gh,Gj){Da.registerHelper(Gg,Gi,Gj);A3[Gg]._global.push({pred:Gh,val:Gj})};var Ck=Da.copyState=function(Gg,Gk){if(Gk===true){return Gk}if(Gg.copyState){return Gg.copyState(Gk)}var Gi={};for(var Gh in Gk){var Gj=Gk[Gh];if(Gj instanceof Array){Gj=Gj.concat([])}Gi[Gh]=Gj}return Gi};var Af=Da.startState=function(Gh,Gg,Gi){return Gh.startState?Gh.startState(Gg,Gi):true};Da.innerMode=function(Gg,Gi){while(Gg.innerMode){var Gh=Gg.innerMode(Gi);if(!Gh||Gh.mode==Gg){break}Gi=Gh.state;Gg=Gh.mode}return Gh||{mode:Gg,state:Gi}};var AV=Da.commands={selectAll:function(Gg){Gg.setSelection(AW(Gg.firstLine(),0),AW(Gg.lastLine()),BI)},singleSelection:function(Gg){Gg.setSelection(Gg.getCursor("anchor"),Gg.getCursor("head"),BI)},killLine:function(Gg){FO(Gg,function(Gi){if(Gi.empty()){var Gh=Df(Gg.doc,Gi.head.line).text.length;if(Gi.head.ch==Gh&&Gi.head.line<Gg.lastLine()){return{from:Gi.head,to:AW(Gi.head.line+1,0)}}else{return{from:Gi.head,to:AW(Gi.head.line,Gh)}}}else{return{from:Gi.from(),to:Gi.to()}}})},deleteLine:function(Gg){FO(Gg,function(Gh){return{from:AW(Gh.from().line,0),to:F8(Gg.doc,AW(Gh.to().line+1,0))}})},delLineLeft:function(Gg){FO(Gg,function(Gh){return{from:AW(Gh.from().line,0),to:Gh.from()}})},delWrappedLineLeft:function(Gg){FO(Gg,function(Gj){var Gh=Gg.charCoords(Gj.head,"div").top+5;var Gi=Gg.coordsChar({left:0,top:Gh},"div");return{from:Gi,to:Gj.from()}})},delWrappedLineRight:function(Gg){FO(Gg,function(Gj){var Gi=Gg.charCoords(Gj.head,"div").top+5;var Gh=Gg.coordsChar({left:Gg.display.lineDiv.offsetWidth+100,top:Gi},"div");return{from:Gj.from(),to:Gh}})},undo:function(Gg){Gg.undo()},redo:function(Gg){Gg.redo()},undoSelection:function(Gg){Gg.undoSelection()},redoSelection:function(Gg){Gg.redoSelection()},goDocStart:function(Gg){Gg.extendSelection(AW(Gg.firstLine(),0))},goDocEnd:function(Gg){Gg.extendSelection(AW(Gg.lastLine()))},goLineStart:function(Gg){Gg.extendSelectionsBy(function(Gh){return Ad(Gg,Gh.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(Gg){Gg.extendSelectionsBy(function(Gh){return F7(Gg,Gh.head)},{origin:"+move",bias:1})},goLineEnd:function(Gg){Gg.extendSelectionsBy(function(Gh){return FP(Gg,Gh.head.line)},{origin:"+move",bias:-1})},goLineRight:function(Gg){Gg.extendSelectionsBy(function(Gi){var Gh=Gg.charCoords(Gi.head,"div").top+5;return Gg.coordsChar({left:Gg.display.lineDiv.offsetWidth+100,top:Gh},"div")},Ac)},goLineLeft:function(Gg){Gg.extendSelectionsBy(function(Gi){var Gh=Gg.charCoords(Gi.head,"div").top+5;return Gg.coordsChar({left:0,top:Gh},"div")},Ac)},goLineLeftSmart:function(Gg){Gg.extendSelectionsBy(function(Gj){var Gi=Gg.charCoords(Gj.head,"div").top+5;var Gh=Gg.coordsChar({left:0,top:Gi},"div");if(Gh.ch<Gg.getLine(Gh.line).search(/\S/)){return F7(Gg,Gj.head)}return Gh},Ac)},goLineUp:function(Gg){Gg.moveV(-1,"line")},goLineDown:function(Gg){Gg.moveV(1,"line")},goPageUp:function(Gg){Gg.moveV(-1,"page")},goPageDown:function(Gg){Gg.moveV(1,"page")},goCharLeft:function(Gg){Gg.moveH(-1,"char")},goCharRight:function(Gg){Gg.moveH(1,"char")},goColumnLeft:function(Gg){Gg.moveH(-1,"column")},goColumnRight:function(Gg){Gg.moveH(1,"column")},goWordLeft:function(Gg){Gg.moveH(-1,"word")},goGroupRight:function(Gg){Gg.moveH(1,"group")},goGroupLeft:function(Gg){Gg.moveH(-1,"group")},goWordRight:function(Gg){Gg.moveH(1,"word")},delCharBefore:function(Gg){Gg.deleteH(-1,"char")},delCharAfter:function(Gg){Gg.deleteH(1,"char")},delWordBefore:function(Gg){Gg.deleteH(-1,"word")},delWordAfter:function(Gg){Gg.deleteH(1,"word")},delGroupBefore:function(Gg){Gg.deleteH(-1,"group")},delGroupAfter:function(Gg){Gg.deleteH(1,"group")},indentAuto:function(Gg){Gg.indentSelection("smart")},indentMore:function(Gg){Gg.indentSelection("add")},indentLess:function(Gg){Gg.indentSelection("subtract")},insertTab:function(Gg){Gg.replaceSelection("\t")},insertSoftTab:function(Gl){var Gh=[],Gj=Gl.listSelections(),Gg=Gl.options.tabSize;for(var Gi=0;Gi<Gj.length;Gi++){var Gm=Gj[Gi].from();var Gk=h(Gl.getLine(Gm.line),Gm.ch,Gg);Gh.push(new Array(Gg-Gk%Gg+1).join(" "))}Gl.replaceSelections(Gh)},defaultTab:function(Gg){if(Gg.somethingSelected()){Gg.indentSelection("add")}else{Gg.execCommand("insertTab")}},transposeChars:function(Gg){Cc(Gg,function(){var Gj=Gg.listSelections(),Gk=[];for(var Gi=0;Gi<Gj.length;Gi++){var Gh=Gj[Gi].head,Gl=Df(Gg.doc,Gh.line).text;if(Gl){if(Gh.ch==Gl.length){Gh=new AW(Gh.line,Gh.ch-1)}if(Gh.ch>0){Gh=new AW(Gh.line,Gh.ch+1);Gg.replaceRange(Gl.charAt(Gh.ch-1)+Gl.charAt(Gh.ch-2),AW(Gh.line,Gh.ch-2),Gh,"+transpose")}else{if(Gh.line>Gg.doc.first){var Gm=Df(Gg.doc,Gh.line-1).text;if(Gm){Gg.replaceRange(Gl.charAt(0)+Gg.doc.lineSeparator()+Gm.charAt(Gm.length-1),AW(Gh.line-1,Gm.length-1),AW(Gh.line,1),"+transpose")}}}}Gk.push(new A(Gh,Gh))}Gg.setSelections(Gk)})},newlineAndIndent:function(Gg){Cc(Gg,function(){var Gi=Gg.listSelections().length;for(var Gh=0;Gh<Gi;Gh++){var Gj=Gg.listSelections()[Gh];Gg.replaceRange(Gg.doc.lineSeparator(),Gj.anchor,Gj.head,"+input");Gg.indentLine(Gj.from().line+1,null,true);F(Gg)}})},toggleOverwrite:function(Gg){Gg.toggleOverwrite()}};var EI=Da.keyMap={};EI.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};EI.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};EI.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};EI.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};EI["default"]=FZ?EI.macDefault:EI.pcDefault;function A7(Gg){var Gl=Gg.split(/-(?!$)/),Gg=Gl[Gl.length-1];var Gn,Gj,Gi,Gh;for(var Gk=0;Gk<Gl.length-1;Gk++){var Gm=Gl[Gk];if(/^(cmd|meta|m)$/i.test(Gm)){Gh=true}else{if(/^a(lt)?$/i.test(Gm)){Gn=true}else{if(/^(c|ctrl|control)$/i.test(Gm)){Gj=true}else{if(/^s(hift)$/i.test(Gm)){Gi=true}else{throw new Error("Unrecognized modifier name: "+Gm)}}}}}if(Gn){Gg="Alt-"+Gg}if(Gj){Gg="Ctrl-"+Gg}if(Gh){Gg="Cmd-"+Gg}if(Gi){Gg="Shift-"+Gg}return Gg}Da.normalizeKeyMap=function(Gp){var Go={};for(var Gl in Gp){if(Gp.hasOwnProperty(Gl)){var Gi=Gp[Gl];if(/^(name|fallthrough|(de|at)tach)$/.test(Gl)){continue}if(Gi=="..."){delete Gp[Gl];continue}var Gn=FT(Gl.split(" "),A7);for(var Gm=0;Gm<Gn.length;Gm++){var Gj,Gg;if(Gm==Gn.length-1){Gg=Gn.join(" ");Gj=Gi}else{Gg=Gn.slice(0,Gm+1).join(" ");Gj="..."}var Gk=Go[Gg];if(!Gk){Go[Gg]=Gj}else{if(Gk!=Gj){throw new Error("Inconsistent bindings for "+Gg)}}}delete Gp[Gl]}}for(var Gh in Go){Gp[Gh]=Go[Gh]}return Gp};var CL=Da.lookupKey=function(Gh,Gi,Gg,Gm){Gi=AE(Gi);var Gl=Gi.call?Gi.call(Gh,Gm):Gi[Gh];if(Gl===false){return"nothing"}if(Gl==="..."){return"multi"}if(Gl!=null&&Gg(Gl)){return"handled"}if(Gi.fallthrough){if(Object.prototype.toString.call(Gi.fallthrough)!="[object Array]"){return CL(Gh,Gi.fallthrough,Gg,Gm)}for(var Gj=0;Gj<Gi.fallthrough.length;Gj++){var Gk=CL(Gh,Gi.fallthrough[Gj],Gg,Gm);if(Gk){return Gk}}}};var Y=Da.isModifierKey=function(Gh){var Gg=typeof Gh=="string"?Gh:Cu[Gh.keyCode];return Gg=="Ctrl"||Gg=="Alt"||Gg=="Shift"||Gg=="Mod"};var Fu=Da.keyName=function(Gh,Gi){if(Fr&&Gh.keyCode==34&&Gh["char"]){return false}var Gj=Cu[Gh.keyCode],Gg=Gj;if(Gg==null||Gh.altGraphKey){return false}if(Gh.altKey&&Gj!="Alt"){Gg="Alt-"+Gg}if((ER?Gh.metaKey:Gh.ctrlKey)&&Gj!="Ctrl"){Gg="Ctrl-"+Gg}if((ER?Gh.ctrlKey:Gh.metaKey)&&Gj!="Cmd"){Gg="Cmd-"+Gg}if(!Gi&&Gh.shiftKey&&Gj!="Shift"){Gg="Shift-"+Gg}return Gg};function AE(Gg){return typeof Gg=="string"?EI[Gg]:Gg}Da.fromTextArea=function(Gn,Gm){Gm=Gm?CG(Gm):{};Gm.value=Gn.value;if(!Gm.tabindex&&Gn.tabIndex){Gm.tabindex=Gn.tabIndex}if(!Gm.placeholder&&Gn.placeholder){Gm.placeholder=Gn.placeholder}if(Gm.autofocus==null){var Gl=Db();Gm.autofocus=Gl==Gn||Gn.getAttribute("autofocus")!=null&&Gl==document.body}function Gj(){Gn.value=Gk.getValue()}if(Gn.form){B(Gn.form,"submit",Gj);if(!Gm.leaveSubmitMethodAlone){var Gi=Gn.form,Go=Gi.submit;try{var Gh=Gi.submit=function(){Gj();Gi.submit=Go;Gi.submit();Gi.submit=Gh}}catch(Gg){}}}Gm.finishInit=function(Gp){Gp.save=Gj;Gp.getTextArea=function(){return Gn};Gp.toTextArea=function(){Gp.toTextArea=isNaN;Gj();Gn.parentNode.removeChild(Gp.getWrapperElement());Gn.style.display="";if(Gn.form){Aq(Gn.form,"submit",Gj);if(typeof Gn.form.submit=="function"){Gn.form.submit=Go}}}};Gn.style.display="none";var Gk=Da(function(Gp){Gn.parentNode.insertBefore(Gp,Gn.nextSibling)},Gm);return Gk};var En=Da.StringStream=function(Gh,Gg){this.pos=this.start=0;this.string=Gh;this.tabSize=Gg||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};En.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(Gh){var Gi=this.string.charAt(this.pos);if(typeof Gh=="string"){var Gg=Gi==Gh}else{var Gg=Gi&&(Gh.test?Gh.test(Gi):Gh(Gi))}if(Gg){++this.pos;return Gi}},eatWhile:function(Gg){var Gh=this.pos;while(this.eat(Gg)){}return this.pos>Gh},eatSpace:function(){var Gg=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>Gg},skipToEnd:function(){this.pos=this.string.length},skipTo:function(Gg){var Gh=this.string.indexOf(Gg,this.pos);if(Gh>-1){this.pos=Gh;return true}},backUp:function(Gg){this.pos-=Gg},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=h(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return h(this.string,null,this.tabSize)-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},match:function(Gk,Gj,Gg){if(typeof Gk=="string"){var Gl=function(Gm){return Gg?Gm.toLowerCase():Gm};var Gi=this.string.substr(this.pos,Gk.length);if(Gl(Gi)==Gl(Gk)){if(Gj!==false){this.pos+=Gk.length}return true}}else{var Gh=this.string.slice(this.pos).match(Gk);if(Gh&&Gh.index>0){return null}if(Gh&&Gj!==false){this.pos+=Gh[0].length}return Gh}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(Gg,Gh){this.lineStart+=Gg;try{return Gh()}finally{this.lineStart-=Gg}}};var DI=0;var i=Da.TextMarker=function(Gh,Gg){this.lines=[];this.type=Gg;this.doc=Gh;this.id=++DI};Ai(i);i.prototype.clear=function(){if(this.explicitlyCleared){return}var Gk=this.doc.cm,Gh=Gk&&!Gk.curOp;if(Gh){DN(Gk)}if(AK(this,"clear")){var Gm=this.find();if(Gm){U(this,"clear",Gm.from,Gm.to)}}var Gi=null,Gj=null;for(var Gl=0;Gl<this.lines.length;++Gl){var Gg=this.lines[Gl];var Gn=BN(Gg.markedSpans,this);if(Gk&&!this.collapsed){BZ(Gk,E5(Gg),"text")}else{if(Gk){if(Gn.to!=null){Gj=E5(Gg)}if(Gn.from!=null){Gi=E5(Gg)}}}Gg.markedSpans=EH(Gg.markedSpans,Gn);if(Gn.from==null&&this.collapsed&&!EN(this.doc,Gg)&&Gk){CN(Gg,D8(Gk.display))}}if(Gk&&this.collapsed&&!Gk.options.lineWrapping){for(var Gl=0;Gl<this.lines.length;++Gl){var Gp=Fm(this.lines[Gl]),Go=BM(Gp);if(Go>Gk.display.maxLineLength){Gk.display.maxLine=Gp;Gk.display.maxLineLength=Go;Gk.display.maxLineChanged=true}}}if(Gi!=null&&Gk&&this.collapsed){DA(Gk,Gi,Gj+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(Gk){Fj(Gk.doc)}}if(Gk){U(Gk,"markerCleared",Gk,this)}if(Gh){E4(Gk)}if(this.parent){this.parent.clear()}};i.prototype.find=function(Gj,Gk){if(Gj==null&&this.type=="bookmark"){Gj=1}var Gg,Gi;for(var Gh=0;Gh<this.lines.length;++Gh){var Gl=this.lines[Gh];var Gm=BN(Gl.markedSpans,this);if(Gm.from!=null){Gg=AW(Gk?Gl:E5(Gl),Gm.from);if(Gj==-1){return Gg}}if(Gm.to!=null){Gi=AW(Gk?Gl:E5(Gl),Gm.to);if(Gj==1){return Gi}}}return Gg&&{from:Gg,to:Gi}};i.prototype.changed=function(){var Gg=this.find(-1,true),Gh=this,Gi=this.doc.cm;if(!Gg||!Gi){return}Cc(Gi,function(){var Gn=Gg.line,Gm=E5(Gg.line);var Gj=Cw(Gi,Gm);if(Gj){E0(Gj);Gi.curOp.selectionChanged=Gi.curOp.forceUpdate=true}Gi.curOp.updateMaxLine=true;if(!EN(Gh.doc,Gn)&&Gh.height!=null){var Gk=Gh.height;Gh.height=null;var Gl=F0(Gh)-Gk;if(Gl){CN(Gn,Gn.height+Gl)}}})};i.prototype.attachLine=function(Gh){if(!this.lines.length&&this.doc.cm){var Gg=this.doc.cm.curOp;if(!Gg.maybeHiddenMarkers||DG(Gg.maybeHiddenMarkers,this)==-1){(Gg.maybeUnhiddenMarkers||(Gg.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(Gh)};i.prototype.detachLine=function(Gh){this.lines.splice(DG(this.lines,Gh),1);if(!this.lines.length&&this.doc.cm){var Gg=this.doc.cm.curOp;(Gg.maybeHiddenMarkers||(Gg.maybeHiddenMarkers=[])).push(this)}};var DI=0;function FK(Gn,Gg,Gp,Gm,Go){if(Gm&&Gm.shared){return Ft(Gn,Gg,Gp,Gm,Go)}if(Gn.cm&&!Gn.cm.curOp){return BQ(Gn.cm,FK)(Gn,Gg,Gp,Gm,Go)}var Gi=new i(Gn,Go),Gk=BP(Gg,Gp);if(Gm){CG(Gm,Gi,false)}if(Gk>0||Gk==0&&Gi.clearWhenEmpty!==false){return Gi}if(Gi.replacedWith){Gi.collapsed=true;Gi.widgetNode=Bf("span",[Gi.replacedWith],"CodeMirror-widget");if(!Gm.handleMouseEvents){Gi.widgetNode.setAttribute("cm-ignore-events","true")}if(Gm.insertLeft){Gi.widgetNode.insertLeft=true}}if(Gi.collapsed){if(AO(Gn,Gg.line,Gg,Gp,Gi)||Gg.line!=Gp.line&&AO(Gn,Gp.line,Gg,Gp,Gi)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}Bb=true}if(Gi.addToHistory){Ej(Gn,{from:Gg,to:Gp,origin:"markText"},Gn.sel,NaN)}var Gh=Gg.line,Gj=Gn.cm,Gq;Gn.iter(Gh,Gp.line+1,function(Gr){if(Gj&&Gi.collapsed&&!Gj.options.lineWrapping&&Fm(Gr)==Gj.display.maxLine){Gq=true}if(Gi.collapsed&&Gh!=Gg.line){CN(Gr,0)}FJ(Gr,new K(Gi,Gh==Gg.line?Gg.ch:null,Gh==Gp.line?Gp.ch:null));++Gh});if(Gi.collapsed){Gn.iter(Gg.line,Gp.line+1,function(Gr){if(EN(Gn,Gr)){CN(Gr,0)}})}if(Gi.clearOnEnter){B(Gi,"beforeCursorEnter",function(){Gi.clear()})}if(Gi.readOnly){Fy=true;if(Gn.history.done.length||Gn.history.undone.length){Gn.clearHistory()}}if(Gi.collapsed){Gi.id=++DI;Gi.atomic=true}if(Gj){if(Gq){Gj.curOp.updateMaxLine=true}if(Gi.collapsed){DA(Gj,Gg.line,Gp.line+1)}else{if(Gi.className||Gi.title||Gi.startStyle||Gi.endStyle||Gi.css){for(var Gl=Gg.line;Gl<=Gp.line;Gl++){BZ(Gj,Gl,"text")}}}if(Gi.atomic){Fj(Gj.doc)}U(Gj,"markerAdded",Gj,Gi)}return Gi}var u=Da.SharedTextMarker=function(Gg,Gh){this.markers=Gg;this.primary=Gh;for(var Gi=0;Gi<Gg.length;++Gi){Gg[Gi].parent=this}};Ai(u);u.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var Gg=0;Gg<this.markers.length;++Gg){this.markers[Gg].clear()}U(this,"clear")};u.prototype.find=function(Gg,Gh){return this.primary.find(Gg,Gh)};function Ft(Gk,Gg,Gn,Gj,Gm){Gj=CG(Gj);Gj.shared=false;var Gh=[FK(Gk,Gg,Gn,Gj,Gm)],Gi=Gh[0];var Gl=Gj.widgetNode;Ga(Gk,function(Gp){if(Gl){Gj.widgetNode=Gl.cloneNode(true)}Gh.push(FK(Gp,F8(Gp,Gg),F8(Gp,Gn),Gj,Gm));for(var Go=0;Go<Gp.linked.length;++Go){if(Gp.linked[Go].isParent){return}}Gi=Am(Gh)});return new u(Gh,Gi)}function Dr(Gg){return Gg.findMarks(AW(Gg.first,0),Gg.clipPos(AW(Gg.lastLine())),function(Gh){return Gh.parent})}function EL(Gl,Gg){for(var Gk=0;Gk<Gg.length;Gk++){var Gh=Gg[Gk],Gi=Gh.find();var Gn=Gl.clipPos(Gi.from),Gj=Gl.clipPos(Gi.to);if(BP(Gn,Gj)){var Gm=FK(Gl,Gn,Gj,Gh.primary,Gh.primary.type);Gh.markers.push(Gm);Gm.parent=Gh}}}function v(Gh){for(var Gi=0;Gi<Gh.length;Gi++){var Gj=Gh[Gi],Gk=[Gj.primary.doc];Ga(Gj.primary.doc,function(Gm){Gk.push(Gm)});for(var Gl=0;Gl<Gj.markers.length;Gl++){var Gg=Gj.markers[Gl];if(DG(Gk,Gg.doc)==-1){Gg.parent=null;Gj.markers.splice(Gl--,1)}}}}function K(Gi,Gg,Gh){this.marker=Gi;this.from=Gg;this.to=Gh}function BN(Gj,Gi){if(Gj){for(var Gg=0;Gg<Gj.length;++Gg){var Gh=Gj[Gg];if(Gh.marker==Gi){return Gh}}}}function EH(Gj,Gh){for(var Gg,Gi=0;Gi<Gj.length;++Gi){if(Gj[Gi]!=Gh){(Gg||(Gg=[])).push(Gj[Gi])}}return Gg}function FJ(Gh,Gg){Gh.markedSpans=Gh.markedSpans?Gh.markedSpans.concat([Gg]):[Gg];Gg.marker.attachLine(Gh)}function Fb(Gh,Gg,Gl){if(Gh){for(var Gn=0,Go;Gn<Gh.length;++Gn){var Gm=Gh[Gn],Gj=Gm.marker;var Gi=Gm.from==null||(Gj.inclusiveLeft?Gm.from<=Gg:Gm.from<Gg);if(Gi||Gm.from==Gg&&Gj.type=="bookmark"&&(!Gl||!Gm.marker.insertLeft)){var Gk=Gm.to==null||(Gj.inclusiveRight?Gm.to>=Gg:Gm.to>Gg);(Go||(Go=[])).push(new K(Gj,Gm.from,Gk?null:Gm.to))}}}return Go}function FW(Gh,Gk,Gl){if(Gh){for(var Gn=0,Go;Gn<Gh.length;++Gn){var Gm=Gh[Gn],Gj=Gm.marker;var Gg=Gm.to==null||(Gj.inclusiveRight?Gm.to>=Gk:Gm.to>Gk);if(Gg||Gm.from==Gk&&Gj.type=="bookmark"&&(!Gl||Gm.marker.insertLeft)){var Gi=Gm.from==null||(Gj.inclusiveLeft?Gm.from<=Gk:Gm.from<Gk);(Go||(Go=[])).push(new K(Gj,Gi?null:Gm.from-Gk,Gm.to==null?null:Gm.to-Gk))}}}return Go}function Ch(Gq,Gw){if(Gw.full){return null}var Gh=Fp(Gq,Gw.from.line)&&Df(Gq,Gw.from.line).markedSpans;var Gu=Fp(Gq,Gw.to.line)&&Df(Gq,Gw.to.line).markedSpans;if(!Gh&&!Gu){return null}var Gm=Gw.from.ch,Gl=Gw.to.ch,Gv=BP(Gw.from,Gw.to)==0;var Gg=Fb(Gh,Gm,Gv);var Gs=FW(Gu,Gl,Gv);var Gp=Gw.text.length==1,Go=Am(Gw.text).length+(Gp?Gm:0);if(Gg){for(var Gk=0;Gk<Gg.length;++Gk){var Gr=Gg[Gk];if(Gr.to==null){var Gn=BN(Gs,Gr.marker);if(!Gn){Gr.to=Gm}else{if(Gp){Gr.to=Gn.to==null?null:Gn.to+Go}}}}}if(Gs){for(var Gk=0;Gk<Gs.length;++Gk){var Gr=Gs[Gk];if(Gr.to!=null){Gr.to+=Go}if(Gr.from==null){var Gn=BN(Gg,Gr.marker);if(!Gn){Gr.from=Go;if(Gp){(Gg||(Gg=[])).push(Gr)}}}else{Gr.from+=Go;if(Gp){(Gg||(Gg=[])).push(Gr)}}}}if(Gg){Gg=CE(Gg)}if(Gs&&Gs!=Gg){Gs=CE(Gs)}var Gi=[Gg];if(!Gp){var Gj=Gw.text.length-2,Gt;if(Gj>0&&Gg){for(var Gk=0;Gk<Gg.length;++Gk){if(Gg[Gk].to==null){(Gt||(Gt=[])).push(new K(Gg[Gk].marker,null,null))}}}for(var Gk=0;Gk<Gj;++Gk){Gi.push(Gt)}Gi.push(Gs)}return Gi}function CE(Gi){for(var Gg=0;Gg<Gi.length;++Gg){var Gh=Gi[Gg];if(Gh.from!=null&&Gh.from==Gh.to&&Gh.marker.clearWhenEmpty!==false){Gi.splice(Gg--,1)}}if(!Gi.length){return null}return Gi}function BE(Gn,Go){var Gg=Fd(Gn,Go);var Gp=Ch(Gn,Go);if(!Gg){return Gp}if(!Gp){return Gg}for(var Gl=0;Gl<Gg.length;++Gl){var Gi=Gg[Gl],Gh=Gp[Gl];if(Gi&&Gh){spans:for(var Gj=0;Gj<Gh.length;++Gj){var Gm=Gh[Gj];for(var Gk=0;Gk<Gi.length;++Gk){if(Gi[Gk].marker==Gm.marker){continue spans}}Gi.push(Gm)}}else{if(Gh){Gg[Gl]=Gh}}}return Gg}function Fv(Go,Gg,Gs){var Gi=null;Go.iter(Gg.line,Gs.line+1,function(Gu){if(Gu.markedSpans){for(var Gt=0;Gt<Gu.markedSpans.length;++Gt){var Gv=Gu.markedSpans[Gt].marker;if(Gv.readOnly&&(!Gi||DG(Gi,Gv)==-1)){(Gi||(Gi=[])).push(Gv)}}}});if(!Gi){return null}var Gj=[{from:Gg,to:Gs}];for(var Gq=0;Gq<Gi.length;++Gq){var Gn=Gi[Gq],Gp=Gn.find(0);for(var Gl=0;Gl<Gj.length;++Gl){var Gh=Gj[Gl];if(BP(Gh.to,Gp.from)<0||BP(Gh.from,Gp.to)>0){continue}var Gr=[Gl,1],Gk=BP(Gh.from,Gp.from),Gm=BP(Gh.to,Gp.to);if(Gk<0||!Gn.inclusiveLeft&&!Gk){Gr.push({from:Gh.from,to:Gp.from})}if(Gm>0||!Gn.inclusiveRight&&!Gm){Gr.push({from:Gp.to,to:Gh.to})}Gj.splice.apply(Gj,Gr);Gl+=Gr.length-1}}return Gj}function EG(Gi){var Gh=Gi.markedSpans;if(!Gh){return}for(var Gg=0;Gg<Gh.length;++Gg){Gh[Gg].marker.detachLine(Gi)}Gi.markedSpans=null}function Ag(Gi,Gh){if(!Gh){return}for(var Gg=0;Gg<Gh.length;++Gg){Gh[Gg].marker.attachLine(Gi)}Gi.markedSpans=Gh}function Bh(Gg){return Gg.inclusiveLeft?-1:0}function AG(Gg){return Gg.inclusiveRight?1:0}function ES(Gm,Gk){var Gh=Gm.lines.length-Gk.lines.length;if(Gh!=0){return Gh}var Gl=Gm.find(),Gi=Gk.find();var Gj=BP(Gl.from,Gi.from)||Bh(Gm)-Bh(Gk);if(Gj){return -Gj}var Gg=BP(Gl.to,Gi.to)||AG(Gm)-AG(Gk);if(Gg){return Gg}return Gk.id-Gm.id}function BV(Gk,Gl){var Gj=Bb&&Gk.markedSpans,Gi;if(Gj){for(var Gh,Gg=0;Gg<Gj.length;++Gg){Gh=Gj[Gg];if(Gh.marker.collapsed&&(Gl?Gh.from:Gh.to)==null&&(!Gi||ES(Gi,Gh.marker)<0)){Gi=Gh.marker}}}return Gi}function E(Gg){return BV(Gg,true)}function Co(Gg){return BV(Gg,false)}function AO(Gn,Gr,Gg,Gp,Gi){var Gh=Df(Gn,Gr);var Gm=Bb&&Gh.markedSpans;if(Gm){for(var Gk=0;Gk<Gm.length;++Gk){var Gj=Gm[Gk];if(!Gj.marker.collapsed){continue}var Gl=Gj.marker.find(0);var Go=BP(Gl.from,Gg)||Bh(Gj.marker)-Bh(Gi);var Gq=BP(Gl.to,Gp)||AG(Gj.marker)-AG(Gi);if(Go>=0&&Gq<=0||Go<=0&&Gq>=0){continue}if(Go<=0&&(BP(Gl.to,Gg)>0||(Gj.marker.inclusiveRight&&Gi.inclusiveLeft))||Go>=0&&(BP(Gl.from,Gp)<0||(Gj.marker.inclusiveLeft&&Gi.inclusiveRight))){return true}}}}function Fm(Gh){var Gg;while(Gg=E(Gh)){Gh=Gg.find(-1,true).line}return Gh}function P(Gi){var Gh,Gg;while(Gh=Co(Gi)){Gi=Gh.find(1,true).line;(Gg||(Gg=[])).push(Gi)}return Gg}function Cb(Gj,Gh){var Gi=Df(Gj,Gh),Gg=Fm(Gi);if(Gi==Gg){return Gh}return E5(Gg)}function Ds(Gj,Gh){if(Gh>Gj.lastLine()){return Gh}var Gi=Df(Gj,Gh),Gg;if(!EN(Gj,Gi)){return Gh}while(Gg=Co(Gi)){Gi=Gg.find(1,true).line}return E5(Gi)+1}function EN(Gk,Gj){var Gi=Bb&&Gj.markedSpans;if(Gi){for(var Gh,Gg=0;Gg<Gi.length;++Gg){Gh=Gi[Gg];if(!Gh.marker.collapsed){continue}if(Gh.from==null){return true}if(Gh.marker.widgetNode){continue}if(Gh.from==0&&Gh.marker.inclusiveLeft&&BS(Gk,Gj,Gh)){return true}}}}function BS(Gl,Gk,Gh){if(Gh.to==null){var Gj=Gh.marker.find(1,true);return BS(Gl,Gj.line,BN(Gj.line.markedSpans,Gh.marker))}if(Gh.marker.inclusiveRight&&Gh.to==Gk.text.length){return true}for(var Gi,Gg=0;Gg<Gk.markedSpans.length;++Gg){Gi=Gk.markedSpans[Gg];if(Gi.marker.collapsed&&!Gi.marker.widgetNode&&Gi.from==Gh.to&&(Gi.to==null||Gi.to!=Gh.from)&&(Gi.marker.inclusiveLeft||Gh.marker.inclusiveRight)&&BS(Gl,Gk,Gi)){return true}}}var Ee=Da.LineWidget=function(Gj,Gh,Gi){if(Gi){for(var Gg in Gi){if(Gi.hasOwnProperty(Gg)){this[Gg]=Gi[Gg]}}}this.doc=Gj;this.node=Gh};Ai(Ee);function Et(Gh,Gg,Gi){if(E8(Gg)<((Gh.curOp&&Gh.curOp.scrollTop)||Gh.doc.scrollTop)){X(Gh,null,Gi)}}Ee.prototype.clear=function(){var Gl=this.doc.cm,Gi=this.line.widgets,Gk=this.line,Gh=E5(Gk);if(Gh==null||!Gi){return}for(var Gg=0;Gg<Gi.length;++Gg){if(Gi[Gg]==this){Gi.splice(Gg--,1)}}if(!Gi.length){Gk.widgets=null}var Gj=F0(this);CN(Gk,Math.max(0,Gk.height-Gj));if(Gl){Cc(Gl,function(){Et(Gl,Gk,-Gj);BZ(Gl,Gh,"widget")})}};Ee.prototype.changed=function(){var Gg=this.height,Gi=this.doc.cm,Gh=this.line;this.height=null;var Gj=F0(this)-Gg;if(!Gj){return}CN(Gh,Gh.height+Gj);if(Gi){Cc(Gi,function(){Gi.curOp.forceUpdate=true;Et(Gi,Gh,Gj)})}};function F0(Gh){if(Gh.height!=null){return Gh.height}var Gi=Gh.doc.cm;if(!Gi){return 0}if(!CM(document.body,Gh.node)){var Gg="position: relative;";if(Gh.coverGutter){Gg+="margin-left: -"+Gi.display.gutters.offsetWidth+"px;"}if(Gh.noHScroll){Gg+="width: "+Gi.display.wrapper.clientWidth+"px;"}Eb(Gi.display.measure,Bf("div",[Gh.node],null,Gg))}return Gh.height=Gh.node.offsetHeight}function FU(Gl,Gg,Gh,Gi){var Gj=new Ee(Gl,Gh,Gi);var Gk=Gl.cm;if(Gk&&Gj.noHScroll){Gk.display.alignWidgets=true}Ba(Gl,Gg,"widget",function(Gn){var Go=Gn.widgets||(Gn.widgets=[]);if(Gj.insertAt==null){Go.push(Gj)}else{Go.splice(Math.min(Go.length-1,Math.max(0,Gj.insertAt)),0,Gj)}Gj.line=Gn;if(Gk&&!EN(Gl,Gn)){var Gm=E8(Gn)<Gl.scrollTop;CN(Gn,Gn.height+F0(Gj));if(Gm){X(Gk,null,Gj.height)}Gk.curOp.forceUpdate=true}return true});return Gj}var N=Da.Line=function(Gh,Gg,Gi){this.text=Gh;Ag(this,Gg);this.height=Gi?Gi(this):1};Ai(N);N.prototype.lineNo=function(){return E5(this)};function CO(Gj,Gh,Gg,Gi){Gj.text=Gh;if(Gj.stateAfter){Gj.stateAfter=null}if(Gj.styles){Gj.styles=null}if(Gj.order!=null){Gj.order=null}EG(Gj);Ag(Gj,Gg);var Gk=Gi?Gi(Gj):1;if(Gk!=Gj.height){CN(Gj,Gk)}}function FY(Gg){Gg.parent=null;EG(Gg)}function Gb(Gg,Gj){if(Gg){for(;;){var Gh=Gg.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!Gh){break}Gg=Gg.slice(0,Gh.index)+Gg.slice(Gh.index+Gh[0].length);var Gi=Gh[1]?"bgClass":"textClass";if(Gj[Gi]==null){Gj[Gi]=Gh[2]}else{if(!(new RegExp("(?:^|s)"+Gh[2]+"(?:$|s)")).test(Gj[Gi])){Gj[Gi]+=" "+Gh[2]}}}}return Gg}function CP(Gg,Gi){if(Gg.blankLine){return Gg.blankLine(Gi)}if(!Gg.innerMode){return}var Gh=Da.innerMode(Gg,Gi);if(Gh.mode.blankLine){return Gh.mode.blankLine(Gh.state)}}function CJ(Gh,Gl,Gj,Gk){for(var Gg=0;Gg<10;Gg++){if(Gk){Gk[0]=Da.innerMode(Gh,Gj).mode}var Gi=Gh.token(Gl,Gj);if(Gl.pos>Gl.start){return Gi}}throw new Error("Mode "+Gh.name+" failed to advance stream.")}function Em(Gj,Gh,Gq,Gi){function Gr(Gs){return{start:Gl.start,end:Gl.pos,string:Gl.current(),type:Gn||null,state:Gs?Ck(Go.mode,Gm):Gm}}var Go=Gj.doc,Gp=Go.mode,Gn;Gh=F8(Go,Gh);var Gg=Df(Go,Gh.line),Gm=EK(Gj,Gh.line,Gq);var Gl=new En(Gg.text,Gj.options.tabSize),Gk;if(Gi){Gk=[]}while((Gi||Gl.pos<Gh.ch)&&!Gl.eol()){Gl.start=Gl.pos;Gn=CJ(Gp,Gl,Gm);if(Gi){Gk.push(Gr(true))}}return Gi?Gk:Gr()}function Fe(Gj,Gp,Gr,Gn,Gt,Gq,Gi){var Gk=Gr.flattenSpans;if(Gk==null){Gk=Gj.options.flattenSpans}var Gl=0,Gh=null;var Gm=new En(Gp,Gj.options.tabSize),Go;var Gg=Gj.options.addModeClass&&[null];if(Gp==""){Gb(CP(Gr,Gn),Gq)}while(!Gm.eol()){if(Gm.pos>Gj.options.maxHighlightLength){Gk=false;if(Gi){AR(Gj,Gp,Gn,Gm.pos)}Gm.pos=Gp.length;Go=null}else{Go=Gb(CJ(Gr,Gm,Gn,Gg),Gq)}if(Gg){var Gu=Gg[0].name;if(Gu){Go="m-"+(Go?Gu+" "+Go:Gu)}}if(!Gk||Gh!=Go){while(Gl<Gm.start){Gl=Math.min(Gm.start,Gl+50000);Gt(Gl,Gh)}Gh=Go}Gm.start=Gm.pos}while(Gl<Gm.pos){var Gs=Math.min(Gm.pos,Gl+50000);Gt(Gs,Gh);Gl=Gs}}function DT(Gj,Gh,Gk,Gi){var Gg=[Gj.state.modeGen],Gm={};Fe(Gj,Gh.text,Gj.doc.mode,Gk,function(Gr,Gq){Gg.push(Gr,Gq)},Gm,Gi);for(var Gl=0;Gl<Gj.state.overlays.length;++Gl){var Gp=Gj.state.overlays[Gl],Gn=1,Go=0;Fe(Gj,Gh.text,Gp.mode,true,function(Gs,Gr){var Gu=Gn;while(Go<Gs){var Gt=Gg[Gn];if(Gt>Gs){Gg.splice(Gn,1,Gs,Gg[Gn+1],Gt)}Gn+=2;Go=Math.min(Gs,Gt)}if(!Gr){return}if(Gp.opaque){Gg.splice(Gu,Gn-Gu,Gs,"cm-overlay "+Gr);Gn=Gu+2}else{for(;Gu<Gn;Gu+=2){var Gq=Gg[Gu+1];Gg[Gu+1]=(Gq?Gq+" ":"")+"cm-overlay "+Gr}}},Gm)}return{styles:Gg,classes:Gm.bgClass||Gm.textClass?Gm:null}}function At(Gj,Gi,Gg){if(!Gi.styles||Gi.styles[0]!=Gj.state.modeGen){var Gh=DT(Gj,Gi,Gi.stateAfter=EK(Gj,E5(Gi)));Gi.styles=Gh.styles;if(Gh.classes){Gi.styleClasses=Gh.classes}else{if(Gi.styleClasses){Gi.styleClasses=null}}if(Gg===Gj.doc.frontier){Gj.doc.frontier++}}return Gi.styles}function AR(Gk,Gj,Gl,Gh){var Gg=Gk.doc.mode;var Gi=new En(Gj,Gk.options.tabSize);Gi.start=Gi.pos=Gh||0;if(Gj==""){CP(Gg,Gl)}while(!Gi.eol()&&Gi.pos<=Gk.options.maxHighlightLength){CJ(Gg,Gi,Gl);Gi.start=Gi.pos}}var FD={},BW={};function C6(Gi,Gh){if(!Gi||/^\s*$/.test(Gi)){return null}var Gg=Gh.addModeClass?BW:FD;return Gg[Gi]||(Gg[Gi]=Gi.replace(/\S+/g,"cm-$&"))}function T(Gj,Gh){var Gn=Bf("span",null,null,AB?"padding-right: .1px":null);var Gm={pre:Bf("pre",[Gn],"CodeMirror-line"),content:Gn,col:0,pos:0,cm:Gj,splitSpaces:(Au||AB)&&Gj.getOption("lineWrapping")};Gh.measure={};for(var Gk=0;Gk<=(Gh.rest?Gh.rest.length:0);Gk++){var Gg=Gk?Gh.rest[Gk-1]:Gh.line,Gl;Gm.pos=0;Gm.addToken=Aa;if(CY(Gj.display.measure)&&(Gl=Ea(Gg))){Gm.addToken=AH(Gm.addToken,Gl)}Gm.map=[];var Gi=Gh!=Gj.display.externalMeasured&&E5(Gg);D(Gg,Gm,At(Gj,Gg,Gi));if(Gg.styleClasses){if(Gg.styleClasses.bgClass){Gm.bgClass=Ef(Gg.styleClasses.bgClass,Gm.bgClass||"")}if(Gg.styleClasses.textClass){Gm.textClass=Ef(Gg.styleClasses.textClass,Gm.textClass||"")}}if(Gm.map.length==0){Gm.map.push(0,0,Gm.content.appendChild(Bn(Gj.display.measure)))}if(Gk==0){Gh.measure.map=Gm.map;Gh.measure.cache={}}else{(Gh.measure.maps||(Gh.measure.maps=[])).push(Gm.map);(Gh.measure.caches||(Gh.measure.caches=[])).push({})}}if(AB&&/\bcm-tab\b/.test(Gm.content.lastChild.className)){Gm.content.className="cm-tab-wrap-hack"}BA(Gj,"renderLine",Gj,Gh.line,Gm.pre);if(Gm.pre.className){Gm.textClass=Ef(Gm.pre.className,Gm.textClass||"")}return Gm}function DO(Gh){var Gg=Bf("span","\u2022","cm-invalidchar");Gg.title="\\u"+Gh.charCodeAt(0).toString(16);Gg.setAttribute("aria-label",Gg.title);return Gg}function Aa(Gv,Gg,Gy,Gj,Gu,Gp,Gk){if(!Gg){return}var Gt=Gv.splitSpaces?Gg.replace(/ {3,}/g,Do):Gg;var Gn=Gv.cm.state.specialChars,Gh=false;if(!Gn.test(Gg)){Gv.col+=Gg.length;var Gr=document.createTextNode(Gt);Gv.map.push(Gv.pos,Gv.pos+Gg.length,Gr);if(Au&&D5<9){Gh=true}Gv.pos+=Gg.length}else{var Gr=document.createDocumentFragment(),Gw=0;while(true){Gn.lastIndex=Gw;var Gm=Gn.exec(Gg);var Gx=Gm?Gm.index-Gw:Gg.length-Gw;if(Gx){var Gq=document.createTextNode(Gt.slice(Gw,Gw+Gx));if(Au&&D5<9){Gr.appendChild(Bf("span",[Gq]))}else{Gr.appendChild(Gq)}Gv.map.push(Gv.pos,Gv.pos+Gx,Gq);Gv.col+=Gx;Gv.pos+=Gx}if(!Gm){break}Gw+=Gx+1;if(Gm[0]=="\t"){var Gi=Gv.cm.options.tabSize,Gs=Gi-Gv.col%Gi;var Gq=Gr.appendChild(Bf("span",Cl(Gs),"cm-tab"));Gq.setAttribute("role","presentation");Gq.setAttribute("cm-text","\t");Gv.col+=Gs}else{if(Gm[0]=="\r"||Gm[0]=="\n"){var Gq=Gr.appendChild(Bf("span",Gm[0]=="\r"?"":"","cm-invalidchar"));Gq.setAttribute("cm-text",Gm[0]);Gv.col+=1}else{var Gq=Gv.cm.options.specialCharPlaceholder(Gm[0]);Gq.setAttribute("cm-text",Gm[0]);if(Au&&D5<9){Gr.appendChild(Bf("span",[Gq]))}else{Gr.appendChild(Gq)}Gv.col+=1}}Gv.map.push(Gv.pos,Gv.pos+1,Gq);Gv.pos++}}if(Gy||Gj||Gu||Gh||Gk){var Go=Gy||"";if(Gj){Go+=Gj}if(Gu){Go+=Gu}var Gl=Bf("span",[Gr],Go,Gk);if(Gp){Gl.title=Gp}return Gv.content.appendChild(Gl)}Gv.content.appendChild(Gr)}function Do(Gh){var Gi=" ";for(var Gg=0;Gg<Gh.length-2;++Gg){Gi+=Gg%2?" ":"\u00a0"}Gi+=" ";return Gi}function AH(Gh,Gg){return function(Gk,Gn,Gm,Gi,Gl,Gq,Gj){Gm=Gm?Gm+" cm-force-border":"cm-force-border";var Gs=Gk.pos,Go=Gs+Gn.length;for(;;){for(var Gr=0;Gr<Gg.length;Gr++){var Gp=Gg[Gr];if(Gp.to>Gs&&Gp.from<=Gs){break}}if(Gp.to>=Go){return Gh(Gk,Gn,Gm,Gi,Gl,Gq,Gj)}Gh(Gk,Gn.slice(0,Gp.to-Gs),Gm,Gi,null,Gq,Gj);Gi=null;Gn=Gn.slice(Gp.to-Gs);Gs=Gp.to}}}function n(Gh,Gg,Gi,Gk){var Gj=!Gk&&Gi.widgetNode;if(Gj){Gh.map.push(Gh.pos,Gh.pos+Gg,Gj)}if(!Gk&&Gh.cm.display.input.needsContentAttribute){if(!Gj){Gj=Gh.content.appendChild(document.createElement("span"))}Gj.setAttribute("cm-marker",Gi.id)}if(Gj){Gh.cm.display.input.setUneditable(Gj);Gh.content.appendChild(Gj)}Gh.pos+=Gg}function D(Gv,Gz,Gx){var Gh=Gv.markedSpans,Gw=Gv.text,Gl=0;if(!Gh){for(var Gn=1;Gn<Gx.length;Gn+=2){Gz.addToken(Gz,Gw.slice(Gl,Gl=Gx[Gn]),C6(Gx[Gn+1],Gz.cm.options))}return}var Gg=Gw.length,GD=0,Gn=1,Gs="",GE,Gj;var Gu=0,Gt,Gk,Gr,Gy,Gi;for(;;){if(Gu==GD){Gt=Gk=Gr=Gy=Gj="";Gi=null;Gu=Infinity;var Gm=[];for(var GA=0;GA<Gh.length;++GA){var Go=Gh[GA],Gp=Go.marker;if(Gp.type=="bookmark"&&Go.from==GD&&Gp.widgetNode){Gm.push(Gp)}else{if(Go.from<=GD&&(Go.to==null||Go.to>GD||Gp.collapsed&&Go.to==GD&&Go.from==GD)){if(Go.to!=null&&Go.to!=GD&&Gu>Go.to){Gu=Go.to;Gk=""}if(Gp.className){Gt+=" "+Gp.className}if(Gp.css){Gj=Gp.css}if(Gp.startStyle&&Go.from==GD){Gr+=" "+Gp.startStyle}if(Gp.endStyle&&Go.to==Gu){Gk+=" "+Gp.endStyle}if(Gp.title&&!Gy){Gy=Gp.title}if(Gp.collapsed&&(!Gi||ES(Gi.marker,Gp)<0)){Gi=Go}}else{if(Go.from>GD&&Gu>Go.from){Gu=Go.from}}}}if(Gi&&(Gi.from||0)==GD){n(Gz,(Gi.to==null?Gg+1:Gi.to)-GD,Gi.marker,Gi.from==null);if(Gi.to==null){return}if(Gi.to==GD){Gi=false}}if(!Gi&&Gm.length){for(var GA=0;GA<Gm.length;++GA){n(Gz,0,Gm[GA])}}}if(GD>=Gg){break}var GC=Math.min(Gg,Gu);while(true){if(Gs){var Gq=GD+Gs.length;if(!Gi){var GB=Gq>GC?Gs.slice(0,GC-GD):Gs;Gz.addToken(Gz,GB,GE?GE+Gt:Gt,Gr,GD+GB.length==Gu?Gk:"",Gy,Gj)}if(Gq>=GC){Gs=Gs.slice(GC-GD);GD=GC;break}GD=Gq;Gr=""}Gs=Gw.slice(Gl,Gl=Gx[Gn++]);GE=C6(Gx[Gn++],Gz.cm.options)}}}function Bz(Gh,Gg){return Gg.from.ch==0&&Gg.to.ch==0&&Am(Gg.text)==""&&(!Gh.cm||Gh.cm.options.wholeLineUpdateBefore)}function H(Go,Gq,Gn,Gi){function Gh(Gw){return Gn?Gn[Gw]:null}function Gl(Gy,Gw,Gx){CO(Gy,Gw,Gx,Gi);U(Gy,"change",Gy,Gq)}function Gk(Gz,Gy){for(var Gw=Gz,Gx=[];Gw<Gy;++Gw){Gx.push(new N(Gg[Gw],Gh(Gw),Gi))}return Gx}var Gs=Gq.from,Gv=Gq.to,Gg=Gq.text;var Gu=Df(Go,Gs.line),Gj=Df(Go,Gv.line);var Gp=Am(Gg),Gr=Gh(Gg.length-1),Gt=Gv.line-Gs.line;if(Gq.full){Go.insert(0,Gk(0,Gg.length));Go.remove(Gg.length,Go.size-Gg.length)}else{if(Bz(Go,Gq)){var Gm=Gk(0,Gg.length-1);Gl(Gj,Gj.text,Gr);if(Gt){Go.remove(Gs.line,Gt)}if(Gm.length){Go.insert(Gs.line,Gm)}}else{if(Gu==Gj){if(Gg.length==1){Gl(Gu,Gu.text.slice(0,Gs.ch)+Gp+Gu.text.slice(Gv.ch),Gr)}else{var Gm=Gk(1,Gg.length-1);Gm.push(new N(Gp+Gu.text.slice(Gv.ch),Gr,Gi));Gl(Gu,Gu.text.slice(0,Gs.ch)+Gg[0],Gh(0));Go.insert(Gs.line+1,Gm)}}else{if(Gg.length==1){Gl(Gu,Gu.text.slice(0,Gs.ch)+Gg[0]+Gj.text.slice(Gv.ch),Gh(0));Go.remove(Gs.line+1,Gt)}else{Gl(Gu,Gu.text.slice(0,Gs.ch)+Gg[0],Gh(0));Gl(Gj,Gp+Gj.text.slice(Gv.ch),Gr);var Gm=Gk(1,Gg.length-1);if(Gt>1){Go.remove(Gs.line+1,Gt-1)}Go.insert(Gs.line+1,Gm)}}}}U(Go,"change",Go,Gq)}function DU(Gh){this.lines=Gh;this.parent=null;for(var Gg=0,Gi=0;Gg<Gh.length;++Gg){Gh[Gg].parent=this;Gi+=Gh[Gg].height}this.height=Gi}DU.prototype={chunkSize:function(){return this.lines.length},removeInner:function(Gk,Gh){for(var Gg=Gk,Gi=Gk+Gh;Gg<Gi;++Gg){var Gj=this.lines[Gg];this.height-=Gj.height;FY(Gj);U(Gj,"delete")}this.lines.splice(Gk,Gh)},collapse:function(Gg){Gg.push.apply(Gg,this.lines)},insertInner:function(Gj,Gi,Gg){this.height+=Gg;this.lines=this.lines.slice(0,Gj).concat(Gi).concat(this.lines.slice(Gj));for(var Gh=0;Gh<Gi.length;++Gh){Gi[Gh].parent=this}},iterN:function(Gj,Gg,Gh){for(var Gi=Gj+Gg;Gj<Gi;++Gj){if(Gh(this.lines[Gj])){return true}}}};function B6(Gk){this.children=Gk;var Gg=0,Gh=0;for(var Gi=0;Gi<Gk.length;++Gi){var Gj=Gk[Gi];Gg+=Gj.chunkSize();Gh+=Gj.height;Gj.parent=this}this.size=Gg;this.height=Gh;this.parent=null}B6.prototype={chunkSize:function(){return this.size},removeInner:function(Gn,Gk){this.size-=Gk;for(var Gj=0;Gj<this.children.length;++Gj){var Gm=this.children[Gj],Gg=Gm.chunkSize();if(Gn<Gg){var Gl=Math.min(Gk,Gg-Gn),Gh=Gm.height;Gm.removeInner(Gn,Gl);this.height-=Gh-Gm.height;if(Gg==Gl){this.children.splice(Gj--,1);Gm.parent=null}if((Gk-=Gl)==0){break}Gn=0}else{Gn-=Gg}}if(this.size-Gk<25&&(this.children.length>1||!(this.children[0] instanceof DU))){var Gi=[];this.collapse(Gi);this.children=[new DU(Gi)];this.children[0].parent=this}},collapse:function(Gh){for(var Gg=0;Gg<this.children.length;++Gg){this.children[Gg].collapse(Gh)}},insertInner:function(Gn,Gj,Gi){this.size+=Gj.length;this.height+=Gi;for(var Gk=0;Gk<this.children.length;++Gk){var Gm=this.children[Gk],Gh=Gm.chunkSize();if(Gn<=Gh){Gm.insertInner(Gn,Gj,Gi);if(Gm.lines&&Gm.lines.length>50){while(Gm.lines.length>50){var Gg=Gm.lines.splice(Gm.lines.length-25,25);var Gl=new DU(Gg);Gm.height-=Gl.height;this.children.splice(Gk+1,0,Gl);Gl.parent=this}this.maybeSpill()}break}Gn-=Gh}},maybeSpill:function(){if(this.children.length<=10){return}var Gj=this;do{var Gg=Gj.children.splice(Gj.children.length-5,5);var Gi=new B6(Gg);if(!Gj.parent){var Gk=new B6(Gj.children);Gk.parent=Gj;Gj.children=[Gk,Gi];Gj=Gk}else{Gj.size-=Gi.size;Gj.height-=Gi.height;var Gh=DG(Gj.parent.children,Gj);Gj.parent.children.splice(Gh+1,0,Gi)}Gi.parent=Gj.parent}while(Gj.children.length>10);Gj.parent.maybeSpill()},iterN:function(Gm,Gi,Gk){for(var Gh=0;Gh<this.children.length;++Gh){var Gg=this.children[Gh],Gj=Gg.chunkSize();if(Gm<Gj){var Gl=Math.min(Gi,Gj-Gm);if(Gg.iterN(Gm,Gl,Gk)){return true}if((Gi-=Gl)==0){break}Gm=0}else{Gm-=Gj}}}};var BJ=0;var EZ=Da.Doc=function(Gh,Gg,Gi,Gk){if(!(this instanceof EZ)){return new EZ(Gh,Gg,Gi,Gk)}if(Gi==null){Gi=0}B6.call(this,[new DU([new N("",null)])]);this.first=Gi;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=Gi;var Gj=AW(Gi,0);this.sel=Ff(Gj);this.history=new Fk(null);this.id=++BJ;this.modeOption=Gg;this.lineSep=Gk;if(typeof Gh=="string"){Gh=this.splitLines(Gh)}H(this,{from:Gj,to:Gj,text:Gh});Cz(this,Ff(Gj),BI)};EZ.prototype=CI(B6.prototype,{constructor:EZ,iter:function(Gg,Gh,Gi){if(Gi){this.iterN(Gg-this.first,Gh-Gg,Gi)}else{this.iterN(this.first,this.first+this.size,Gg)}},insert:function(Gj,Gi){var Gg=0;for(var Gh=0;Gh<Gi.length;++Gh){Gg+=Gi[Gh].height}this.insertInner(Gj-this.first,Gi,Gg)},remove:function(Gh,Gg){this.removeInner(Gh-this.first,Gg)},getValue:function(Gg){var Gh=Eh(this,this.first,this.first+this.size);if(Gg===false){return Gh}return Gh.join(Gg||this.lineSeparator())},setValue:D7(function(Gg){var Gh=AW(this.first,0),Gi=this.first+this.size-1;EB(this,{from:Gh,to:AW(Gi,Df(this,Gi).text.length),text:this.splitLines(Gg),origin:"setValue",full:true},true);Cz(this,Ff(Gh))}),replaceRange:function(Gh,Gg,Gi,Gj){Gg=F8(this,Gg);Gi=Gi?F8(this,Gi):Gg;E2(this,Gh,Gg,Gi,Gj)},getRange:function(Gg,Gi,Gh){var Gj=Cq(this,F8(this,Gg),F8(this,Gi));if(Gh===false){return Gj}return Gj.join(Gh||this.lineSeparator())},getLine:function(Gh){var Gg=this.getLineHandle(Gh);return Gg&&Gg.text},getLineHandle:function(Gg){if(Fp(this,Gg)){return Df(this,Gg)}},getLineNumber:function(Gg){return E5(Gg)},getLineHandleVisualStart:function(Gg){if(typeof Gg=="number"){Gg=Df(this,Gg)}return Fm(Gg)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(Gg){return F8(this,Gg)},getCursor:function(Gh){var Gg=this.sel.primary(),Gi;if(Gh==null||Gh=="head"){Gi=Gg.head}else{if(Gh=="anchor"){Gi=Gg.anchor}else{if(Gh=="end"||Gh=="to"||Gh===false){Gi=Gg.to()}else{Gi=Gg.from()}}}return Gi},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:D7(function(Gi,Gh,Gg){z(this,F8(this,typeof Gi=="number"?AW(Gi,Gh||0):Gi),null,Gg)}),setSelection:D7(function(Gi,Gh,Gg){z(this,F8(this,Gi),F8(this,Gh||Gi),Gg)}),extendSelection:D7(function(Gh,Gi,Gg){Gc(this,F8(this,Gh),Gi&&F8(this,Gi),Gg)}),extendSelections:D7(function(Gg,Gh){F2(this,FH(this,Gg,Gh))}),extendSelectionsBy:D7(function(Gh,Gg){F2(this,FT(this.sel.ranges,Gh),Gg)}),setSelections:D7(function(Gi,Gh,Gj){if(!Gi.length){return}for(var Gg=0,Gk=[];Gg<Gi.length;Gg++){Gk[Gg]=new A(F8(this,Gi[Gg].anchor),F8(this,Gi[Gg].head))}if(Gh==null){Gh=Math.min(Gi.length-1,this.sel.primIndex)}Cz(this,BL(Gk,Gh),Gj)}),addSelection:D7(function(Gj,Gi,Gh){var Gg=this.sel.ranges.slice(0);Gg.push(new A(F8(this,Gj),F8(this,Gi||Gj)));Cz(this,BL(Gg,Gg.length-1),Gh)}),getSelection:function(Gh){var Gi=this.sel.ranges,Gk;for(var Gg=0;Gg<Gi.length;Gg++){var Gj=Cq(this,Gi[Gg].from(),Gi[Gg].to());Gk=Gk?Gk.concat(Gj):Gj}if(Gh===false){return Gk}else{return Gk.join(Gh||this.lineSeparator())}},getSelections:function(Gi){var Gg=[],Gj=this.sel.ranges;for(var Gh=0;Gh<Gj.length;Gh++){var Gk=Cq(this,Gj[Gh].from(),Gj[Gh].to());if(Gi!==false){Gk=Gk.join(Gi||this.lineSeparator())}Gg[Gh]=Gk}return Gg},replaceSelection:function(Gi,Gg,Gj){var Gk=[];for(var Gh=0;Gh<this.sel.ranges.length;Gh++){Gk[Gh]=Gi}this.replaceSelections(Gk,Gg,Gj||"+input")},replaceSelections:D7(function(Gh,Gl,Gj){var Gn=[],Gi=this.sel;for(var Gk=0;Gk<Gi.ranges.length;Gk++){var Gm=Gi.ranges[Gk];Gn[Gk]={from:Gm.from(),to:Gm.to(),text:this.splitLines(Gh[Gk]),origin:Gj}}var Gg=Gl&&Gl!="end"&&Dy(this,Gn,Gl);for(var Gk=Gn.length-1;Gk>=0;Gk--){EB(this,Gn[Gk])}if(Gg){Dk(this,Gg)}else{if(this.cm){F(this.cm)}}}),undo:D7(function(){DV(this,"undo")}),redo:D7(function(){DV(this,"redo")}),undoSelection:D7(function(){DV(this,"undo",true)}),redoSelection:D7(function(){DV(this,"redo",true)}),setExtending:function(Gg){this.extend=Gg},getExtending:function(){return this.extend},historySize:function(){var Gj=this.history,Gg=0,Gi=0;for(var Gh=0;Gh<Gj.done.length;Gh++){if(!Gj.done[Gh].ranges){++Gg}}for(var Gh=0;Gh<Gj.undone.length;Gh++){if(!Gj.undone[Gh].ranges){++Gi}}return{undo:Gg,redo:Gi}},clearHistory:function(){this.history=new Fk(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(Gg){if(Gg){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(Gg){return this.history.generation==(Gg||this.cleanGeneration)},getHistory:function(){return{done:E6(this.history.done),undone:E6(this.history.undone)}},setHistory:function(Gg){var Gh=this.history=new Fk(this.history.maxGeneration);Gh.done=E6(Gg.done.slice(0),null,true);Gh.undone=E6(Gg.undone.slice(0),null,true)},addLineClass:D7(function(Gg,Gi,Gh){return Ba(this,Gg,Gi=="gutter"?"gutter":"class",function(Gk){var Gj=Gi=="text"?"textClass":Gi=="background"?"bgClass":Gi=="gutter"?"gutterClass":"wrapClass";if(!Gk[Gj]){Gk[Gj]=Gh}else{if(Ce(Gh).test(Gk[Gj])){return false}else{Gk[Gj]+=" "+Gh}}return true})}),removeLineClass:D7(function(Gg,Gi,Gh){return Ba(this,Gg,Gi=="gutter"?"gutter":"class",function(Gm){var Gk=Gi=="text"?"textClass":Gi=="background"?"bgClass":Gi=="gutter"?"gutterClass":"wrapClass";var Gj=Gm[Gk];if(!Gj){return false}else{if(Gh==null){Gm[Gk]=null}else{var Gn=Gj.match(Ce(Gh));if(!Gn){return false}var Gl=Gn.index+Gn[0].length;Gm[Gk]=Gj.slice(0,Gn.index)+(!Gn.index||Gl==Gj.length?"":" ")+Gj.slice(Gl)||null}}return true})}),addLineWidget:D7(function(Gg,Gh,Gi){return FU(this,Gg,Gh,Gi)}),removeLineWidget:function(Gg){Gg.clear()},markText:function(Gg,Gh,Gi){return FK(this,F8(this,Gg),F8(this,Gh),Gi,"range")},setBookmark:function(Gg,Gh){var Gi={replacedWith:Gh&&(Gh.nodeType==null?Gh.widget:Gh),insertLeft:Gh&&Gh.insertLeft,clearWhenEmpty:false,shared:Gh&&Gh.shared,handleMouseEvents:Gh&&Gh.handleMouseEvents};Gg=F8(this,Gg);return FK(this,Gg,Gg,Gi,"bookmark")},findMarksAt:function(Gi){Gi=F8(this,Gi);var Gg=[],Gj=Df(this,Gi.line).markedSpans;if(Gj){for(var Gh=0;Gh<Gj.length;++Gh){var Gk=Gj[Gh];if((Gk.from==null||Gk.from<=Gi.ch)&&(Gk.to==null||Gk.to>=Gi.ch)){Gg.push(Gk.marker.parent||Gk.marker)}}}return Gg},findMarks:function(Gg,Gi,Gj){Gg=F8(this,Gg);Gi=F8(this,Gi);var Gk=[],Gh=Gg.line;this.iter(Gg.line,Gi.line+1,function(Go){var Gn=Go.markedSpans;if(Gn){for(var Gl=0;Gl<Gn.length;Gl++){var Gm=Gn[Gl];if(!(Gh==Gg.line&&Gg.ch>Gm.to||Gm.from==null&&Gh!=Gg.line||Gh==Gi.line&&Gm.from>Gi.ch)&&(!Gj||Gj(Gm.marker))){Gk.push(Gm.marker.parent||Gm.marker)}}}++Gh});return Gk},getAllMarks:function(){var Gg=[];this.iter(function(Gj){var Gi=Gj.markedSpans;if(Gi){for(var Gh=0;Gh<Gi.length;++Gh){if(Gi[Gh].from!=null){Gg.push(Gi[Gh].marker)}}}});return Gg},posFromIndex:function(Gg){var Gi,Gh=this.first;this.iter(function(Gk){var Gj=Gk.text.length+1;if(Gj>Gg){Gi=Gg;return true}Gg-=Gj;++Gh});return F8(this,AW(Gh,Gi))},indexFromPos:function(Gg){Gg=F8(this,Gg);var Gh=Gg.ch;if(Gg.line<this.first||Gg.ch<0){return 0}this.iter(this.first,Gg.line,function(Gi){Gh+=Gi.text.length+1});return Gh},copy:function(Gg){var Gh=new EZ(Eh(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);Gh.scrollTop=this.scrollTop;Gh.scrollLeft=this.scrollLeft;Gh.sel=this.sel;Gh.extend=false;if(Gg){Gh.history.undoDepth=this.history.undoDepth;Gh.setHistory(this.getHistory())}return Gh},linkedDoc:function(Gi){if(!Gi){Gi={}}var Gg=this.first,Gh=this.first+this.size;if(Gi.from!=null&&Gi.from>Gg){Gg=Gi.from}if(Gi.to!=null&&Gi.to<Gh){Gh=Gi.to}var Gj=new EZ(Eh(this,Gg,Gh),Gi.mode||this.modeOption,Gg,this.lineSep);if(Gi.sharedHist){Gj.history=this.history}(this.linked||(this.linked=[])).push({doc:Gj,sharedHist:Gi.sharedHist});Gj.linked=[{doc:this,isParent:true,sharedHist:Gi.sharedHist}];EL(Gj,Dr(this));return Gj},unlinkDoc:function(Gj){if(Gj instanceof Da){Gj=Gj.doc}if(this.linked){for(var Gg=0;Gg<this.linked.length;++Gg){var Gi=this.linked[Gg];if(Gi.doc!=Gj){continue}this.linked.splice(Gg,1);Gj.unlinkDoc(this);v(Dr(this));break}}if(Gj.history==this.history){var Gh=[Gj.id];Ga(Gj,function(Gk){Gh.push(Gk.id)},true);Gj.history=new Fk(null);Gj.history.done=E6(this.history.done,Gh);Gj.history.undone=E6(this.history.undone,Gh)}},iterLinkedDocs:function(Gg){Ga(this,Gg)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(Gg){if(this.lineSep){return Gg.split(this.lineSep)}return FV(Gg)},lineSeparator:function(){return this.lineSep||"\n"}});EZ.prototype.eachLine=EZ.prototype.iter;var Ep="iter insert remove copy getEditor constructor".split(" ");for(var Fn in EZ.prototype){if(EZ.prototype.hasOwnProperty(Fn)&&DG(Ep,Fn)<0){Da.prototype[Fn]=(function(Gg){return function(){return Gg.apply(this.doc,arguments)}})(EZ.prototype[Fn])}}Ai(EZ);function Ga(Gj,Gh,Gi){function Gg(Gp,Gk,Gl){if(Gp.linked){for(var Gm=0;Gm<Gp.linked.length;++Gm){var Gn=Gp.linked[Gm];if(Gn.doc==Gk){continue}var Go=Gl&&Gn.sharedHist;if(Gi&&!Go){continue}Gh(Gn.doc,Go);Gg(Gn.doc,Gp,Go)}}}Gg(Gj,null,true)}function V(Gg,Gh){if(Gh.cm){throw new Error("This document is already in use.")}Gg.doc=Gh;Gh.cm=Gg;Bm(Gg);Fh(Gg);if(!Gg.options.lineWrapping){DK(Gg)}Gg.options.mode=Gh.modeOption;DA(Gg)}function Df(Gl,Gi){Gi-=Gl.first;if(Gi<0||Gi>=Gl.size){throw new Error("There is no line "+(Gi+Gl.first)+" in the document.")}for(var Gg=Gl;!Gg.lines;){for(var Gh=0;;++Gh){var Gk=Gg.children[Gh],Gj=Gk.chunkSize();if(Gi<Gj){Gg=Gk;break}Gi-=Gj}}return Gg.lines[Gi]}function Cq(Gk,Gj,Gi){var Gh=[],Gg=Gj.line;Gk.iter(Gj.line,Gi.line+1,function(Gm){var Gl=Gm.text;if(Gg==Gi.line){Gl=Gl.slice(0,Gi.ch)}if(Gg==Gj.line){Gl=Gl.slice(Gj.ch)}Gh.push(Gl);++Gg});return Gh}function Eh(Gj,Gg,Gh){var Gi=[];Gj.iter(Gg,Gh,function(Gk){Gi.push(Gk.text)});return Gi}function CN(Gi,Gg){var Gj=Gg-Gi.height;if(Gj){for(var Gh=Gi;Gh;Gh=Gh.parent){Gh.height+=Gj}}}function E5(Gi){if(Gi.parent==null){return null}var Gg=Gi.parent,Gj=DG(Gg.lines,Gi);for(var Gk=Gg.parent;Gk;Gg=Gk,Gk=Gk.parent){for(var Gh=0;;++Gh){if(Gk.children[Gh]==Gg){break}Gj+=Gk.children[Gh].chunkSize()}}return Gj+Gg.first}function FF(Gm,Gl){var Gk=Gm.first;outer:do{for(var Gj=0;Gj<Gm.children.length;++Gj){var Gn=Gm.children[Gj],Gi=Gn.height;if(Gl<Gi){Gm=Gn;continue outer}Gl-=Gi;Gk+=Gn.chunkSize()}return Gk}while(!Gm.lines);for(var Gj=0;Gj<Gm.lines.length;++Gj){var Gg=Gm.lines[Gj],Gh=Gg.height;if(Gl<Gh){break}Gl-=Gh}return Gk+Gj}function E8(Gk){Gk=Fm(Gk);var Gg=0,Gm=Gk.parent;for(var Gh=0;Gh<Gm.lines.length;++Gh){var Gl=Gm.lines[Gh];if(Gl==Gk){break}else{Gg+=Gl.height}}for(var Gi=Gm.parent;Gi;Gm=Gi,Gi=Gm.parent){for(var Gh=0;Gh<Gi.children.length;++Gh){var Gj=Gi.children[Gh];if(Gj==Gm){break}else{Gg+=Gj.height}}}return Gg}function Ea(Gh){var Gg=Gh.order;if(Gg==null){Gg=Gh.order=Ap(Gh.text)}return Gg}function Fk(Gg){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=Gg||1}function BK(Gi,Gg){var Gh={from:FN(Gg.from),to:Fa(Gg),text:Cq(Gi,Gg.from,Gg.to)};DE(Gi,Gh,Gg.from.line,Gg.to.line+1);Ga(Gi,function(Gj){DE(Gj,Gh,Gg.from.line,Gg.to.line+1)},true);return Gh}function DZ(Gg){while(Gg.length){var Gh=Am(Gg);if(Gh.ranges){Gg.pop()}else{break}}}function Cs(Gh,Gg){if(Gg){DZ(Gh.done);return Am(Gh.done)}else{if(Gh.done.length&&!Am(Gh.done).ranges){return Am(Gh.done)}else{if(Gh.done.length>1&&!Gh.done[Gh.done.length-2].ranges){Gh.done.pop();return Am(Gh.done)}}}}function Ej(Gl,Gm,Gh,Gn){var Gj=Gl.history;Gj.undone.length=0;var Gg=+new Date,Gi;if((Gj.lastOp==Gn||Gj.lastOrigin==Gm.origin&&Gm.origin&&((Gm.origin.charAt(0)=="+"&&Gl.cm&&Gj.lastModTime>Gg-Gl.cm.options.historyEventDelay)||Gm.origin.charAt(0)=="*"))&&(Gi=Cs(Gj,Gj.lastOp==Gn))){var Gk=Am(Gi.changes);if(BP(Gm.from,Gm.to)==0&&BP(Gm.from,Gk.to)==0){Gk.to=Fa(Gm)}else{Gi.changes.push(BK(Gl,Gm))}}else{var Go=Am(Gj.done);if(!Go||!Go.ranges){Aj(Gl.sel,Gj.done)}Gi={changes:[BK(Gl,Gm)],generation:Gj.generation};Gj.done.push(Gi);while(Gj.done.length>Gj.undoDepth){Gj.done.shift();if(!Gj.done[0].ranges){Gj.done.shift()}}}Gj.done.push(Gh);Gj.generation=++Gj.maxGeneration;Gj.lastModTime=Gj.lastSelTime=Gg;Gj.lastOp=Gj.lastSelOp=Gn;Gj.lastOrigin=Gj.lastSelOrigin=Gm.origin;if(!Gk){BA(Gl,"historyAdded")}}function C8(Gk,Gi,Gj,Gh){var Gg=Gi.charAt(0);return Gg=="*"||Gg=="+"&&Gj.ranges.length==Gh.ranges.length&&Gj.somethingSelected()==Gh.somethingSelected()&&new Date-Gk.history.lastSelTime<=(Gk.cm?Gk.cm.options.historyEventDelay:500)}function x(Gl,Gj,Gg,Gi){var Gh=Gl.history,Gk=Gi&&Gi.origin;if(Gg==Gh.lastSelOp||(Gk&&Gh.lastSelOrigin==Gk&&(Gh.lastModTime==Gh.lastSelTime&&Gh.lastOrigin==Gk||C8(Gl,Gk,Am(Gh.done),Gj)))){Gh.done[Gh.done.length-1]=Gj}else{Aj(Gj,Gh.done)}Gh.lastSelTime=+new Date;Gh.lastSelOrigin=Gk;Gh.lastSelOp=Gg;if(Gi&&Gi.clearRedo!==false){DZ(Gh.undone)}}function Aj(Gi,Gg){var Gh=Am(Gg);if(!(Gh&&Gh.ranges&&Gh.equals(Gi))){Gg.push(Gi)}}function DE(Gl,Gh,Gg,Gi){var Gk=Gh["spans_"+Gl.id],Gj=0;Gl.iter(Math.max(Gl.first,Gg),Math.min(Gl.first+Gl.size,Gi),function(Gm){if(Gm.markedSpans){(Gk||(Gk=Gh["spans_"+Gl.id]={}))[Gj]=Gm.markedSpans}++Gj})}function AZ(Gi){if(!Gi){return null}for(var Gg=0,Gh;Gg<Gi.length;++Gg){if(Gi[Gg].marker.explicitlyCleared){if(!Gh){Gh=Gi.slice(0,Gg)}}else{if(Gh){Gh.push(Gi[Gg])}}}return !Gh?Gi:Gh.length?Gh:null}function Fd(Gk,Gi){var Gj=Gi["spans_"+Gk.id];if(!Gj){return null}for(var Gh=0,Gg=[];Gh<Gi.text.length;++Gh){Gg.push(AZ(Gj[Gh]))}return Gg}function E6(Gp,Gi,Gj){for(var Gl=0,Go=[];Gl<Gp.length;++Gl){var Gk=Gp[Gl];if(Gk.ranges){Go.push(Gj?CW.prototype.deepCopy.call(Gk):Gk);continue}var Gr=Gk.changes,Gq=[];Go.push({changes:Gq});for(var Gm=0;Gm<Gr.length;++Gm){var Gg=Gr[Gm],Gn;Gq.push({from:Gg.from,to:Gg.to,text:Gg.text});if(Gi){for(var Gh in Gg){if(Gn=Gh.match(/^spans_(\d+)$/)){if(DG(Gi,Number(Gn[1]))>-1){Am(Gq)[Gh]=Gg[Gh];delete Gg[Gh]}}}}}}return Go}function Ar(Gi,Gg,Gh,Gj){if(Gh<Gi.line){Gi.line+=Gj}else{if(Gg<Gi.line){Gi.line=Gg;Gi.ch=0}}}function B9(Gh,Gl,Go,Gi){for(var Gk=0;Gk<Gh.length;++Gk){var Gn=Gh[Gk],Gj=true;if(Gn.ranges){if(!Gn.copied){Gn=Gh[Gk]=Gn.deepCopy();Gn.copied=true}for(var Gm=0;Gm<Gn.ranges.length;Gm++){Ar(Gn.ranges[Gm].anchor,Gl,Go,Gi);Ar(Gn.ranges[Gm].head,Gl,Go,Gi)}continue}for(var Gm=0;Gm<Gn.changes.length;++Gm){var Gg=Gn.changes[Gm];if(Go<Gg.from.line){Gg.from=AW(Gg.from.line+Gi,Gg.from.ch);Gg.to=AW(Gg.to.line+Gi,Gg.to.ch)}else{if(Gl<=Gg.to.line){Gj=false;break}}}if(!Gj){Gh.splice(0,Gk+1);Gk=0}}}function An(Gj,Gh){var Gg=Gh.from.line,Gi=Gh.to.line,Gk=Gh.text.length-(Gi-Gg)-1;B9(Gj.done,Gg,Gi,Gk);B9(Gj.undone,Gg,Gi,Gk)}var FQ=Da.e_preventDefault=function(Gg){if(Gg.preventDefault){Gg.preventDefault()}else{Gg.returnValue=false}};var L=Da.e_stopPropagation=function(Gg){if(Gg.stopPropagation){Gg.stopPropagation()}else{Gg.cancelBubble=true}};function Dx(Gg){return Gg.defaultPrevented!=null?Gg.defaultPrevented:Gg.returnValue==false}var DF=Da.e_stop=function(Gg){FQ(Gg);L(Gg)};function Cd(Gg){return Gg.target||Gg.srcElement}function A8(Gg){var Gh=Gg.which;if(Gh==null){if(Gg.button&1){Gh=1}else{if(Gg.button&2){Gh=3}else{if(Gg.button&4){Gh=2}}}}if(FZ&&Gg.ctrlKey&&Gh==1){Gh=3}return Gh}var B=Da.on=function(Gi,Gg,Gk){if(Gi.addEventListener){Gi.addEventListener(Gg,Gk,false)}else{if(Gi.attachEvent){Gi.attachEvent("on"+Gg,Gk)}else{var Gh=Gi._handlers||(Gi._handlers={});var Gj=Gh[Gg]||(Gh[Gg]=[]);Gj.push(Gk)}}};var Aq=Da.off=function(Gi,Gg,Gk){if(Gi.removeEventListener){Gi.removeEventListener(Gg,Gk,false)}else{if(Gi.detachEvent){Gi.detachEvent("on"+Gg,Gk)}else{var Gj=Gi._handlers&&Gi._handlers[Gg];if(!Gj){return}for(var Gh=0;Gh<Gj.length;++Gh){if(Gj[Gh]==Gk){Gj.splice(Gh,1);break}}}}};var BA=Da.signal=function(Gi,Gg){var Gj=Gi._handlers&&Gi._handlers[Gg];if(!Gj){return}var Gk=Array.prototype.slice.call(arguments,2);for(var Gh=0;Gh<Gj.length;++Gh){Gj[Gh].apply(null,Gk)}};var EO=null;function U(Gj,Gg){var Gl=Gj._handlers&&Gj._handlers[Gg];if(!Gl){return}var Gm=Array.prototype.slice.call(arguments,2),Gk;if(Dt){Gk=Dt.delayedCallbacks}else{if(EO){Gk=EO}else{Gk=EO=[];setTimeout(D4,0)}}function Gi(Gn){return function(){Gn.apply(null,Gm)}}for(var Gh=0;Gh<Gl.length;++Gh){Gk.push(Gi(Gl[Gh]))}}function D4(){var Gh=EO;EO=null;for(var Gg=0;Gg<Gh.length;++Gg){Gh[Gg]()}}function F6(Gi,Gg,Gh){if(typeof Gg=="string"){Gg={type:Gg,preventDefault:function(){this.defaultPrevented=true}}}BA(Gi,Gh||Gg.type,Gi,Gg);return Dx(Gg)||Gg.codemirrorIgnore}function DB(Gj){var Gh=Gj._handlers&&Gj._handlers.cursorActivity;if(!Gh){return}var Gi=Gj.curOp.cursorActivityHandlers||(Gj.curOp.cursorActivityHandlers=[]);for(var Gg=0;Gg<Gh.length;++Gg){if(DG(Gi,Gh[Gg])==-1){Gi.push(Gh[Gg])}}}function AK(Gh,Gg){var Gi=Gh._handlers&&Gh._handlers[Gg];return Gi&&Gi.length>0}function Ai(Gg){Gg.prototype.on=function(Gh,Gi){B(this,Gh,Gi)};Gg.prototype.off=function(Gh,Gi){Aq(this,Gh,Gi)}}var BR=30;var Ca=Da.Pass={toString:function(){return"CodeMirror.Pass"}};var BI={scroll:false},C4={origin:"*mouse"},Ac={origin:"+move"};function Fg(){this.id=null}Fg.prototype.set=function(Gg,Gh){clearTimeout(this.id);this.id=setTimeout(Gh,Gg)};var h=Da.countColumn=function(Gh,Gg,Gk,Gm,Gj){if(Gg==null){Gg=Gh.search(/[^\s\u00a0]/);if(Gg==-1){Gg=Gh.length}}for(var Gl=Gm||0,Gi=Gj||0;;){var Gn=Gh.indexOf("\t",Gl);if(Gn<0||Gn>=Gg){return Gi+(Gg-Gl)}Gi+=Gn-Gl;Gi+=Gk-(Gi%Gk);Gl=Gn+1}};function AU(Gk,Gg,Gm){for(var Gj=0,Gh=0;;){var Gl=Gk.indexOf("\t",Gj);if(Gl==-1){Gl=Gk.length}var Gi=Gl-Gj;if(Gl==Gk.length||Gh+Gi>=Gg){return Gj+Math.min(Gi,Gg-Gh)}Gh+=Gl-Gj;Gh+=Gm-(Gh%Gm);Gj=Gl+1;if(Gh>=Gg){return Gj}}}var CF=[""];function Cl(Gg){while(CF.length<=Gg){CF.push(Am(CF)+" ")}return CF[Gg]}function Am(Gg){return Gg[Gg.length-1]}var El=function(Gg){Gg.select()};if(C3){El=function(Gg){Gg.selectionStart=0;Gg.selectionEnd=Gg.value.length}}else{if(Au){El=function(Gg){try{Gg.select()}catch(Gh){}}}}function DG(Gg,Gi){for(var Gh=0;Gh<Gg.length;++Gh){if(Gg[Gh]==Gi){return Gh}}return -1}function FT(Gg,Gj){var Gi=[];for(var Gh=0;Gh<Gg.length;Gh++){Gi[Gh]=Gj(Gg[Gh],Gh)}return Gi}function EW(){}function CI(Gi,Gh){var Gg;if(Object.create){Gg=Object.create(Gi)}else{EW.prototype=Gi;Gg=new EW()}if(Gh){CG(Gh,Gg)}return Gg}function CG(Gg,Gj,Gh){if(!Gj){Gj={}}for(var Gi in Gg){if(Gg.hasOwnProperty(Gi)&&(Gh!==false||!Gj.hasOwnProperty(Gi))){Gj[Gi]=Gg[Gi]}}return Gj}function Cx(Gh){var Gg=Array.prototype.slice.call(arguments,1);return function(){return Gh.apply(null,Gg)}}var AJ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var Gd=Da.isWordChar=function(Gg){return/\w/.test(Gg)||Gg>"\x80"&&(Gg.toUpperCase()!=Gg.toLowerCase()||AJ.test(Gg))};function EF(Gg,Gh){if(!Gh){return Gd(Gg)}if(Gh.source.indexOf("\\w")>-1&&Gd(Gg)){return true}return Gh.test(Gg)}function C(Gg){for(var Gh in Gg){if(Gg.hasOwnProperty(Gh)&&Gg[Gh]){return false}}return true}var Dc=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function EY(Gg){return Gg.charCodeAt(0)>=768&&Dc.test(Gg)}function Bf(Gg,Gl,Gh,Gk){var Gi=document.createElement(Gg);if(Gh){Gi.className=Gh}if(Gk){Gi.style.cssText=Gk}if(typeof Gl=="string"){Gi.appendChild(document.createTextNode(Gl))}else{if(Gl){for(var Gj=0;Gj<Gl.length;++Gj){Gi.appendChild(Gl[Gj])}}}return Gi}var A2;if(document.createRange){A2=function(Gi,Gk,Gj,Gh){var Gg=document.createRange();Gg.setEnd(Gh||Gi,Gj);Gg.setStart(Gi,Gk);return Gg}}else{A2=function(Gi,Gk,Gj){var Gg=document.body.createTextRange();try{Gg.moveToElementText(Gi.parentNode)}catch(Gh){return Gg}Gg.collapse(true);Gg.moveEnd("character",Gj);Gg.moveStart("character",Gk);return Gg}}function AS(Gh){for(var Gg=Gh.childNodes.length;Gg>0;--Gg){Gh.removeChild(Gh.firstChild)}return Gh}function Eb(Gh,Gg){return AS(Gh).appendChild(Gg)}var CM=Da.contains=function(Gh,Gg){if(Gg.nodeType==3){Gg=Gg.parentNode}if(Gh.contains){return Gh.contains(Gg)}do{if(Gg.nodeType==11){Gg=Gg.host}if(Gg==Gh){return true}}while(Gg=Gg.parentNode)};function Db(){var Gg=document.activeElement;while(Gg&&Gg.root&&Gg.root.activeElement){Gg=Gg.root.activeElement}return Gg}if(Au&&D5<11){Db=function(){try{return document.activeElement}catch(Gg){return document.body}}}function Ce(Gg){return new RegExp("(^|\\s)"+Gg+"(?:$|\\s)\\s*")}var Fw=Da.rmClass=function(Gh,Gj){var Gi=Gh.className;var Gg=Ce(Gj).exec(Gi);if(Gg){var Gk=Gi.slice(Gg.index+Gg[0].length);Gh.className=Gi.slice(0,Gg.index)+(Gk?Gg[1]+Gk:"")}};var FC=Da.addClass=function(Gg,Gi){var Gh=Gg.className;if(!Ce(Gi).test(Gh)){Gg.className+=(Gh?" ":"")+Gi}};function Ef(Gj,Gh){var Gi=Gj.split(" ");for(var Gg=0;Gg<Gi.length;Gg++){if(Gi[Gg]&&!Ce(Gi[Gg]).test(Gh)){Gh+=" "+Gi[Gg]}}return Gh}function AF(Gj){if(!document.body.getElementsByClassName){return}var Gg=document.body.getElementsByClassName("CodeMirror");for(var Gh=0;Gh<Gg.length;Gh++){var Gi=Gg[Gh].CodeMirror;if(Gi){Gj(Gi)}}}var F1=false;function Eq(){if(F1){return}BX();F1=true}function BX(){var Gg;B(window,"resize",function(){if(Gg==null){Gg=setTimeout(function(){Gg=null;AF(Br)},100)}});B(window,"blur",function(){AF(Z)})}var AA=function(){if(Au&&D5<9){return false}var Gg=Bf("div");return"draggable" in Gg||"dragDrop" in Gg}();var Dj;function Bn(Gi){if(Dj==null){var Gg=Bf("span","\u200b");Eb(Gi,Bf("span",[Gg,document.createTextNode("x")]));if(Gi.firstChild.offsetHeight!=0){Dj=Gg.offsetWidth<=1&&Gg.offsetHeight>2&&!(Au&&D5<8)}}var Gh=Dj?Bf("span","\u200b"):Bf("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");Gh.setAttribute("cm-text","");return Gh}var Ay;function CY(Gj){if(Ay!=null){return Ay}var Gi=Eb(Gj,document.createTextNode("A\u062eA"));var Gg=A2(Gi,0,1).getBoundingClientRect();if(!Gg||Gg.left==Gg.right){return false}var Gh=A2(Gi,1,2).getBoundingClientRect();return Ay=(Gh.right-Gg.right<3)}var FV=Da.splitLines="\n\nb".split(/\n/).length!=3?function(Gl){var Gj=0,Gi=[],Gk=Gl.length;while(Gj<=Gk){var Gg=Gl.indexOf("\n",Gj);if(Gg==-1){Gg=Gl.length}var Gm=Gl.slice(Gj,Gl.charAt(Gg-1)=="\r"?Gg-1:Gg);var Gh=Gm.indexOf("\r");if(Gh!=-1){Gi.push(Gm.slice(0,Gh));Gj+=Gh+1}else{Gi.push(Gm);Gj=Gg+1}}return Gi}:function(Gg){return Gg.split(/\r\n?|\n/)};var Dn=window.getSelection?function(Gh){try{return Gh.selectionStart!=Gh.selectionEnd}catch(Gg){return false}}:function(Gh){try{var Gi=Gh.ownerDocument.selection.createRange()}catch(Gg){}if(!Gi||Gi.parentElement()!=Gh){return false}return Gi.compareEndPoints("StartToEnd",Gi)!=0};var Av=(function(){var Gg=Bf("div");if("oncopy" in Gg){return true}Gg.setAttribute("oncopy","return;");return typeof Gg.oncopy=="function"})();var CZ=null;function Dh(Gj){if(CZ!=null){return CZ}var Gh=Eb(Gj,Bf("span","x"));var Gg=Gh.getBoundingClientRect();var Gi=A2(Gh,0,1).getBoundingClientRect();return CZ=Math.abs(Gg.left-Gi.left)>1}var Cu={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};Da.keyNames=Cu;(function(){for(var Gg=0;Gg<10;Gg++){Cu[Gg+48]=Cu[Gg+96]=String(Gg)}for(var Gg=65;Gg<=90;Gg++){Cu[Gg]=String.fromCharCode(Gg)}for(var Gg=1;Gg<=12;Gg++){Cu[Gg+111]=Cu[Gg+63235]="F"+Gg}})();function EJ(Gj,Gg,Gi,Gm){if(!Gj){return Gm(Gg,Gi,"ltr")}var Gl=false;for(var Gh=0;Gh<Gj.length;++Gh){var Gk=Gj[Gh];if(Gk.from<Gi&&Gk.to>Gg||Gg==Gi&&Gk.to==Gg){Gm(Math.max(Gk.from,Gg),Math.min(Gk.to,Gi),Gk.level==1?"rtl":"ltr");Gl=true}}if(!Gl){Gm(Gg,Gi,"ltr")}}function l(Gg){return Gg.level%2?Gg.to:Gg.from}function FI(Gg){return Gg.level%2?Gg.from:Gg.to}function Fi(Gh){var Gg=Ea(Gh);return Gg?l(Gg[0]):0}function Bp(Gh){var Gg=Ea(Gh);if(!Gg){return Gh.text.length}return FI(Am(Gg))}function Ad(Gk,Gg){var Gj=Df(Gk.doc,Gg);var Gh=Fm(Gj);if(Gh!=Gj){Gg=E5(Gh)}var Gi=Ea(Gh);var Gl=!Gi?0:Gi[0].level%2?Bp(Gh):Fi(Gh);return AW(Gg,Gl)}function FP(Gl,Gh){var Gg,Gk=Df(Gl.doc,Gh);while(Gg=Co(Gk)){Gk=Gg.find(1,true).line;Gh=null}var Gj=Ea(Gk);var Gi=!Gj?Gk.text.length:Gj[0].level%2?Fi(Gk):Bp(Gk);return AW(Gh==null?E5(Gk):Gh,Gi)}function F7(Gl,Gi){var Gm=Ad(Gl,Gi.line);var Gk=Df(Gl.doc,Gm.line);var Gj=Ea(Gk);if(!Gj||Gj[0].level==0){var Gh=Math.max(0,Gk.text.search(/\S/));var Gg=Gi.line==Gm.line&&Gi.ch<=Gh&&Gi.ch;return AW(Gm.line,Gg?0:Gh)}return Gm}function Bs(Gh,Gj,Gi){var Gg=Gh[0].level;if(Gj==Gg){return true}if(Gi==Gg){return false}return Gj<Gi}var Cp;function Ah(Gj,Gi){Cp=null;for(var Gh=0,Gk;Gh<Gj.length;++Gh){var Gg=Gj[Gh];if(Gg.from<Gi&&Gg.to>Gi){return Gh}if((Gg.from==Gi||Gg.to==Gi)){if(Gk==null){Gk=Gh}else{if(Bs(Gj,Gg.level,Gj[Gk].level)){if(Gg.from!=Gg.to){Cp=Gk}return Gh}else{if(Gg.from!=Gg.to){Cp=Gh}return Gk}}}}return Gk}function BF(Gj,Gi,Gg,Gh){if(!Gh){return Gi+Gg}do{Gi+=Gg}while(Gi>0&&EY(Gj.text.charAt(Gi)));return Gi}function Fz(Gg,Gh,Gj,Gn){var Gi=Ea(Gg);if(!Gi){return Dw(Gg,Gh,Gj,Gn)}var Gk=Ah(Gi,Gh),Gl=Gi[Gk];var Gm=BF(Gg,Gh,Gl.level%2?-Gj:Gj,Gn);for(;;){if(Gm>Gl.from&&Gm<Gl.to){return Gm}if(Gm==Gl.from||Gm==Gl.to){if(Ah(Gi,Gm)==Gk){return Gm}Gl=Gi[Gk+=Gj];return(Gj>0)==Gl.level%2?Gl.to:Gl.from}else{Gl=Gi[Gk+=Gj];if(!Gl){return null}if((Gj>0)==Gl.level%2){Gm=BF(Gg,Gl.to,-1,Gn)}else{Gm=BF(Gg,Gl.from,1,Gn)}}}}function Dw(Gj,Gk,Gg,Gh){var Gi=Gk+Gg;if(Gh){while(Gi>0&&EY(Gj.text.charAt(Gi))){Gi+=Gg}}return Gi<0||Gi>Gj.text.length?null:Gi}var Ap=(function(){var Gm="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var Gi="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function Gg(Gq){if(Gq<=247){return Gm.charAt(Gq)}else{if(1424<=Gq&&Gq<=1524){return"R"}else{if(1536<=Gq&&Gq<=1773){return Gi.charAt(Gq-1536)}else{if(1774<=Gq&&Gq<=2220){return"r"}else{if(8192<=Gq&&Gq<=8203){return"w"}else{if(Gq==8204){return"b"}else{return"L"}}}}}}}var Go=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var Gk=/[stwN]/,Gl=/[LRr]/,Gp=/[Lb1n]/,Gn=/[1n]/;var Gh="L";function Gj(Gr,Gq,Gs){this.level=Gr;this.from=Gq;this.to=Gs}return function(Gq){if(!Go.test(Gq)){return false}var Gs=Gq.length,Gv=[];for(var Gw=0,GF;Gw<Gs;++Gw){Gv.push(GF=Gg(Gq.charCodeAt(Gw)))}for(var Gw=0,GD=Gh;Gw<Gs;++Gw){var GF=Gv[Gw];if(GF=="m"){Gv[Gw]=GD}else{GD=GF}}for(var Gw=0,GB=Gh;Gw<Gs;++Gw){var GF=Gv[Gw];if(GF=="1"&&GB=="r"){Gv[Gw]="n"}else{if(Gl.test(GF)){GB=GF;if(GF=="r"){Gv[Gw]="R"}}}}for(var Gw=1,GD=Gv[0];Gw<Gs-1;++Gw){var GF=Gv[Gw];if(GF=="+"&&GD=="1"&&Gv[Gw+1]=="1"){Gv[Gw]="1"}else{if(GF==","&&GD==Gv[Gw+1]&&(GD=="1"||GD=="n")){Gv[Gw]=GD}}GD=GF}for(var Gw=0;Gw<Gs;++Gw){var GF=Gv[Gw];if(GF==","){Gv[Gw]="N"}else{if(GF=="%"){for(var GA=Gw+1;GA<Gs&&Gv[GA]=="%";++GA){}var Gr=(Gw&&Gv[Gw-1]=="!")||(GA<Gs&&Gv[GA]=="1")?"1":"N";for(var Gu=Gw;Gu<GA;++Gu){Gv[Gu]=Gr}Gw=GA-1}}}for(var Gw=0,GB=Gh;Gw<Gs;++Gw){var GF=Gv[Gw];if(GB=="L"&&GF=="1"){Gv[Gw]="L"}else{if(Gl.test(GF)){GB=GF}}}for(var Gw=0;Gw<Gs;++Gw){if(Gk.test(Gv[Gw])){for(var GA=Gw+1;GA<Gs&&Gk.test(Gv[GA]);++GA){}var Gx=(Gw?Gv[Gw-1]:Gh)=="L";var GC=(GA<Gs?Gv[GA]:Gh)=="L";var Gr=Gx||GC?"L":"R";for(var Gu=Gw;Gu<GA;++Gu){Gv[Gu]=Gr}Gw=GA-1}}var Gz=[],Gy;for(var Gw=0;Gw<Gs;){if(Gp.test(Gv[Gw])){var GH=Gw;for(++Gw;Gw<Gs&&Gp.test(Gv[Gw]);++Gw){}Gz.push(new Gj(0,GH,Gw))}else{var GG=Gw,GE=Gz.length;for(++Gw;Gw<Gs&&Gv[Gw]!="L";++Gw){}for(var Gu=GG;Gu<Gw;){if(Gn.test(Gv[Gu])){if(GG<Gu){Gz.splice(GE,0,new Gj(1,GG,Gu))}var Gt=Gu;for(++Gu;Gu<Gw&&Gn.test(Gv[Gu]);++Gu){}Gz.splice(GE,0,new Gj(2,Gt,Gu));GG=Gu}else{++Gu}}if(GG<Gw){Gz.splice(GE,0,new Gj(1,GG,Gw))}}}if(Gz[0].level==1&&(Gy=Gq.match(/^\s+/))){Gz[0].from=Gy[0].length;Gz.unshift(new Gj(0,0,Gy[0].length))}if(Am(Gz).level==1&&(Gy=Gq.match(/\s+$/))){Am(Gz).to-=Gy[0].length;Gz.push(new Gj(0,Gs-Gy[0].length,Gs))}if(Gz[0].level==2){Gz.unshift(new Gj(1,Gz[0].to,Gz[0].to))}if(Gz[0].level!=Am(Gz).level){Gz.push(new Gj(Gz[0].level,Gs,Gs))}return Gz}})();Da.version="5.5.0";return Da});