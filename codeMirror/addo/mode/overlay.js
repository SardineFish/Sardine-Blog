(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(A){A.overlayMode=function(D,C,B){return{startState:function(){return{base:A.startState(D),overlay:A.startState(C),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(E){return{base:A.copyState(D,E.base),overlay:A.copyState(C,E.overlay),basePos:E.basePos,baseCur:null,overlayPos:E.overlayPos,overlayCur:null}},token:function(F,E){if(F!=E.streamSeen||Math.min(E.basePos,E.overlayPos)<F.start){E.streamSeen=F;E.basePos=E.overlayPos=F.start}if(F.start==E.basePos){E.baseCur=D.token(F,E.base);E.basePos=F.pos}if(F.start==E.overlayPos){F.pos=F.start;E.overlayCur=C.token(F,E.overlay);E.overlayPos=F.pos}F.pos=Math.min(E.basePos,E.overlayPos);if(E.overlayCur==null){return E.baseCur}else{if(E.baseCur!=null&&E.overlay.combineTokens||B&&E.overlay.combineTokens==null){return E.baseCur+" "+E.overlayCur}else{return E.overlayCur}}},indent:D.indent&&function(F,E){return D.indent(F.base,E)},electricChars:D.electricChars,innerMode:function(E){return{state:E.base,mode:D}},blankLine:function(E){if(D.blankLine){D.blankLine(E.base)}if(C.blankLine){C.blankLine(E.overlay)}}}}});