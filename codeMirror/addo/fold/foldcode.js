(function(A){if(typeof exports=="object"&&typeof module=="object"){A(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],A)}else{A(CodeMirror)}}})(function(D){function C(H,K,J,G){if(J&&J.call){var F=J;J=null}else{var F=A(H,J,"rangeFinder")}if(typeof K=="number"){K=D.Pos(K,0)}var L=A(H,J,"minFoldSize");function M(Q){var R=F(H,K);if(!R||R.to.line-R.from.line<L){return null}var S=H.findMarksAt(R.from);for(var P=0;P<S.length;++P){if(S[P].__isFold&&G!=="fold"){if(!Q){return null}R.cleared=true;S[P].clear()}}return R}var O=M(true);if(A(H,J,"scanUp")){while(!O&&K.line>H.firstLine()){K=D.Pos(K.line-1,0);O=M(false)}}if(!O||O.cleared||G==="unfold"){return}var I=E(H,J);D.on(I,"mousedown",function(P){N.clear();D.e_preventDefault(P)});var N=H.markText(O.from,O.to,{replacedWith:I,clearOnEnter:true,__isFold:true});N.on("clear",function(P,Q){D.signal(H,"unfold",H,P,Q)});D.signal(H,"fold",H,O.from,O.to)}function E(I,G){var H=A(I,G,"widget");if(typeof H=="string"){var F=document.createTextNode(H);H=document.createElement("span");H.appendChild(F);H.className="CodeMirror-foldmarker"}return H}D.newFoldFunction=function(G,F){return function(I,H){C(I,H,{rangeFinder:G,widget:F})}};D.defineExtension("foldCode",function(F,G,H){C(this,F,G,H)});D.defineExtension("isFolded",function(G){var H=this.findMarksAt(G);for(var F=0;F<H.length;++F){if(H[F].__isFold){return true}}});D.commands.toggleFold=function(F){F.foldCode(F.getCursor())};D.commands.fold=function(F){F.foldCode(F.getCursor(),null,"fold")};D.commands.unfold=function(F){F.foldCode(F.getCursor(),null,"unfold")};D.commands.foldAll=function(F){F.operation(function(){for(var G=F.firstLine(),H=F.lastLine();G<=H;G++){F.foldCode(D.Pos(G,0),null,"fold")}})};D.commands.unfoldAll=function(F){F.operation(function(){for(var G=F.firstLine(),H=F.lastLine();G<=H;G++){F.foldCode(D.Pos(G,0),null,"unfold")}})};D.registerHelper("fold","combine",function(){var F=Array.prototype.slice.call(arguments,0);return function(I,J){for(var G=0;G<F.length;++G){var H=F[G](I,J);if(H){return H}}}});D.registerHelper("fold","auto",function(I,J){var H=I.getHelpers(J,"fold");for(var G=0;G<H.length;G++){var F=H[G](I,J);if(F){return F}}});var B={rangeFinder:D.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false};D.defineOption("foldOptions",null);function A(I,G,H){if(G&&G[H]!==undefined){return G[H]}var F=I.options.foldOptions;if(F&&F[H]!==undefined){return F[H]}return B[H]}D.defineExtension("foldOption",function(F,G){return A(this,F,G)})});